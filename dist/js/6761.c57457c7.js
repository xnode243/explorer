"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[6761],{87608:function(e,t,a){a.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"toastification"},[a("div",{staticClass:"d-flex align-items-start"},[a("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:e.variant,size:"1.8rem"}},[a("feather-icon",{attrs:{icon:e.icon,size:"15"}})],1),a("div",{staticClass:"d-flex flex-grow-1"},[a("div",[e.title?a("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:"text-"+e.variant,domProps:{textContent:e._s(e.title)}}):e._e(),e.text?a("small",{staticClass:"d-inline-block text-body",domProps:{textContent:e._s(e.text)}}):e._e()]),a("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto ",on:{click:function(t){return e.$emit("close-toast")}}},[e.hideClose?e._e():a("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},r=[],i=a(47389),n={components:{BAvatar:i.SH},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},o=n,c=a(1001),l=(0,c.Z)(o,s,r,!1,null,"55dd3057",null),d=l.exports},36761:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-alert",{attrs:{variant:"danger",show:!0,dismissible:""}},[a("h4",{staticClass:"alert-heading"},[e._v(" DISCLAIMER: ")]),a("div",{staticClass:"alert-body"},[a("span",[e._v("Ping.pub is maintained by the community, Everyone could add a chain to ping.pub. Some of those blockchains are not fully tested, Use at your own risk.")])])]),a("form-wizard",{ref:"wizard",staticClass:"steps-transparent mb-3 md",attrs:{color:"#7367F0",title:null,subtitle:null,shape:"square","finish-button-text":"Save","back-button-text":"Previous"},on:{"on-complete":e.formSubmitted}},[a("tab-content",{attrs:{title:"Device","before-change":e.validationFormDevice}},[a("validation-observer",{ref:"deviceRules",attrs:{tag:"form"}},[a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"Select a device to connect","label-for":"device"}},[a("validation-provider",{attrs:{name:"device",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("b-form-radio-group",{attrs:{stacked:""},model:{value:e.device,callback:function(t){e.device=t},expression:"device"}},[a("b-form-radio",{staticClass:"mb-1 mt-1",attrs:{name:"device",value:"keplr",checked:""},model:{value:e.device,callback:function(t){e.device=t},expression:"device"}},[e._v(" Keplr ")]),a("b-form-radio",{staticClass:"mb-1",attrs:{name:"device",value:"ledger"},model:{value:e.device,callback:function(t){e.device=t},expression:"device"}},[e._v(" Ledger via WebUSB ")]),a("b-form-radio",{staticClass:"mb-1",attrs:{name:"device",value:"ledger2"},model:{value:e.device,callback:function(t){e.device=t},expression:"device"}},[e._v(" Ledger via Bluetooth ")]),a("b-form-radio",{staticClass:"mb-1 d-none",attrs:{name:"device",value:"metamask"},model:{value:e.device,callback:function(t){e.device=t},expression:"device"}},[e._v(" Metamask ")]),a("b-form-radio",{attrs:{name:"device",value:"address"},model:{value:e.device,callback:function(t){e.device=t},expression:"device"}},[e._v(" Address (Observe Only) ")])],1),"address"===e.device?a("b-form-input",{staticClass:"mt-1",attrs:{name:"address",placeholder:"cosmos1ev0vtddkl7jlwfawlk06yzncapw2x9quyxx75u"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}):e._e(),a("small",{staticClass:"text-danger"},[e._v(e._s(e.debug)+e._s(s[0]))])]}}])})],1)],1),e.device.startsWith("ledger")?a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"HD Path","label-for":"hdpath"}},[a("validation-provider",{attrs:{name:"HD Path",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("b-form-input",{staticClass:"mt-1",attrs:{name:"hdpath",placeholder:"m/44'/118/0'/0/0"},model:{value:e.hdpath,callback:function(t){e.hdpath=t},expression:"hdpath"}}),a("small",{staticClass:"text-danger"},[e._v(e._s(s[0]))])]}}],null,!1,2397192972)})],1)],1):e._e()],1)],1)],1),a("tab-content",{attrs:{title:"Accounts","before-change":e.validationFormAddress}},[a("validation-observer",{ref:"accountRules",attrs:{tag:"form"}},[a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"Account Name","label-for":"account_name"}},[a("validation-provider",{attrs:{name:"Account Name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("b-form-input",{attrs:{id:"account_name",state:!(s.length>0)&&null,placeholder:"Ping Nano X",readonly:e.edit},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("small",{staticClass:"text-danger"},[e._v(e._s(s[0]))])]}}])})],1)],1),e.hdpath?a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"HD Path","label-for":"ir"}},[a("b-form-input",{attrs:{id:"ir",value:e.hdpath,readonly:""}})],1)],1):e._e(),e.accounts?a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"Public Key","label-for":"ir"}},[a("validation-provider",{attrs:{name:"Public Key",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("b-form-input",{attrs:{id:"ir",value:e.formatPubkey(e.accounts.pubkey),readonly:"",state:!(s.length>0)&&null}}),a("small",{staticClass:"text-danger"},[e._v(e._s(s[0]))])]}}],null,!1,2851721389)})],1)],1):e._e(),a("b-col",{attrs:{md:"12"}},[a("b-form-group",{attrs:{label:"Derivate Address For Chains:"}},[a("validation-provider",{attrs:{name:"addrs",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("div",{staticClass:"demo-inline-spacing text-uppercase"},[a("b-row",e._l(e.chains,(function(t,s){return a("b-col",{key:s,staticClass:"mb-25",attrs:{xs:"12",md:"4",lg:"3"}},[a("b-form-checkbox",{attrs:{name:"addrs",value:s},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[a("b-avatar",{attrs:{src:t.logo,size:"18",variant:"light-primary",rounded:""}}),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-primary",modifiers:{hover:!0,"v-primary":!0}}],class:e.hdpath.startsWith("m/44'/"+t.coin_type)?"text-success":"text-danger",attrs:{title:"Coin Type: "+t.coin_type}},[e._v(" "+e._s(t.chain_name))])],1)],1)})),1)],1),a("small",{staticClass:"text-success"},[e._v(e._s(s[0]))])]}}])})],1),a("b-alert",{attrs:{show:"",variant:"info"}},[a("div",{staticClass:"alert-heading"},[e._v(" IMPORTANT ")]),a("div",{staticClass:"alert-body"},[a("div",[e._v(" If you don't have Ledger, Do not import those addresses in "),a("b",{staticClass:"text-danger"},[e._v("RED")]),e._v(". Because these addresses are derived from different coin_type which is not as same as the official one ")])])])],1)],1)],1)],1),a("tab-content",{attrs:{title:"Confirmation"}},[a("div",{staticClass:"d-flex border-bottom mb-2"},[a("feather-icon",{staticClass:"mb-50",attrs:{icon:"UserIcon",size:"19"}}),a("h4",{staticClass:"mb-0 ml-50"},[e._v(" "+e._s(e.name)+" "),a("small",[e._v(" "+e._s(e.hdpath))])])],1),a("b-row",{staticClass:"mb-2"},e._l(e.addresses,(function(e){return a("b-col",{key:e.addr,attrs:{cols:"12"}},[a("b-input-group",{staticClass:"mb-25"},[a("b-input-group-prepend",{attrs:{"is-text":""}},[a("b-avatar",{attrs:{src:e.logo,size:"18",variant:"light-primary",rounded:""}})],1),a("b-form-input",{attrs:{value:e.addr}})],1)],1)})),1)],1)],1),a("b-alert",{attrs:{variant:"secondary",show:!e.accounts&&"keplr"===e.device}},[a("h4",{staticClass:"alert-heading"},[e._v(" Enable Keplr For "+e._s(e.chainId)+" ")]),a("div",{staticClass:"alert-body p-1"},[a("span",[e._v("If Keplr has not added "),a("code",[e._v(e._s(e.chainId))]),e._v(", We can enable it here.")]),a("b-form-textarea",{staticClass:"mt-1 mb-1",attrs:{value:e.keplr,rows:"10"}}),e.error?a("div",{staticClass:"text-danger"},[e._v(" "+e._s(e.error)+" ")]):e._e(),a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.suggest()}}},[e._v(" Enable Keplr ")])],1)])],1)},r=[],i=(a(26699),a(85498)),n=a(12954),o=a(87608),c=a(79562),l=a(28972),d=a(88384);class u{static create(e){const t=new u;return t.hdpath=(0,c.pathToString)(e).replace("m/","").replace("/60/","/60'/"),t.ethereum=window.ethereum,t}async getAccounts(){return this.ethereum.request({method:"eth_accounts"}).then((e=>e.map((e=>({pubkey:(0,l.fromHex)(e.substring(2)),address:(0,d.ethToEvmos)(e),algo:"ethsecp256k1"})))))}async sign(e,t){return this.ethereum.request({method:"eth_signTypedData_v4",params:[e,JSON.stringify(t)]})}}var h=a(73106),m=a(15193),p=a(47389),v=a(26253),b=a(50725),f=a(90224),g=a(22183),_=a(76398),k=a(65098),y=a(333),x=a(4060),w=a(27754),C=a(87167),P=a(5870),S=a(50742),A=a(54333),D={components:{BAlert:h.F,BButton:m.T,ValidationProvider:n.d_,ValidationObserver:n._j,FormWizard:i.FormWizard,TabContent:i.TabContent,BAvatar:p.SH,BRow:v.T,BCol:b.l,BFormGroup:f.x,BFormInput:g.e,BFormRadio:_.g,BFormCheckbox:k.l,BFormTextarea:y.y,BInputGroup:x.w,BInputGroupPrepend:w.P,BFormRadioGroup:C.Q,ToastificationContent:o.Z},directives:{"b-tooltip":P.o},data(){return{debug:"",device:"keplr",address:"",hdpath:"m/44'/118/0'/0/0",name:"",options:{},required:S.C1,selected:[],accounts:null,exludes:[],edit:!1,keplr:"",chainId:"",error:null}},computed:{chains(){const e=JSON.parse(localStorage.getItem("chains"));return this.exludes.forEach((t=>{delete e[t]})),e},addresses(){if(this.accounts&&this.accounts.address){const{data:e}=(0,A.addressDecode)(this.accounts.address);return this.selected.map((t=>{if(this.chains[t]){const{logo:a,addr_prefix:s,coin_type:r}=this.chains[t],i=(0,A.addressEnCode)(s,e,r);return{chain:t,addr:i,logo:a,hdpath:this.hdpath}}return null})).filter((e=>null!=e))}return[]}},mounted(){const{selected:e}=this.$store.state.chains;this.$http.getLatestBlock().then((t=>{this.chainId=t.block.header.chain_id,this.keplr=this.initParamsForKeplr(this.chainId,e)})),e&&e.chain_name&&!this.exludes.includes(e.chain_name)&&this.selected.push(e.chain_name);const t=new URLSearchParams(window.location.search).get("name"),a=(0,A.getLocalAccounts)();if(t&&a&&a[t]){const e=a[t];this.device=e.device,this.name=e.name,this.edit=!0,e.address&&(e.address.forEach((e=>{this.selected.includes(e.chain)||this.selected.push(e.chain)})),this.address=e.address[0].addr,this.hdpath=e.address[0].hdpath,this.localAddress()&&this.$refs.wizard.nextTab())}else this.hdpath=`m/44'/${e.coin_type}/0'/0/0`},methods:{suggest(){window.keplr&&window.keplr.experimentalSuggestChain(JSON.parse(this.keplr)).catch((e=>{this.error=e}))},initParamsForKeplr(e,t){const a=t.keplr_price_step||{low:.01,average:.025,high:.03};return JSON.stringify({chainId:e,chainName:t.chain_name,rpc:Array.isArray(t.rpc)?t.rpc[0]:t.rpc,rest:Array.isArray(t.api)?t.api[0]:t.api,bip44:{coinType:Number(t.coin_type)},coinType:Number(t.coin_type),bech32Config:{bech32PrefixAccAddr:t.addr_prefix,bech32PrefixAccPub:`${t.addr_prefix}pub`,bech32PrefixValAddr:`${t.addr_prefix}valoper`,bech32PrefixValPub:`${t.addr_prefix}valoperpub`,bech32PrefixConsAddr:`${t.addr_prefix}valcons`,bech32PrefixConsPub:`${t.addr_prefix}valconspub`},currencies:[{coinDenom:t.assets[0].symbol,coinMinimalDenom:t.assets[0].base,coinDecimals:Number(t.assets[0].exponent),coinGeckoId:t.assets[0].coingecko_id||"unknown"}],feeCurrencies:[{coinDenom:t.assets[0].symbol,coinMinimalDenom:t.assets[0].base,coinDecimals:Number(t.assets[0].exponent),coinGeckoId:t.assets[0].coingecko_id||"unknown",gasPriceStep:a}],gasPriceStep:a,stakeCurrency:{coinDenom:t.assets[0].symbol,coinMinimalDenom:t.assets[0].base,coinDecimals:Number(t.assets[0].exponent),coinGeckoId:t.assets[0].coingecko_id||"unknown"},features:t.keplr_features||[]},null,"\t")},formatPubkey(e){return"string"===typeof e?e:e?(0,l.toHex)(e):""},async connect(){const e="ledger"===this.device?"usb":"bluetooth";return(0,A.getLedgerAddress)(e,this.hdpath)},async cennectKeplr(){if(!window.getOfflineSigner||!window.keplr)return this.debug="Please install keplr extension",null;const e=await this.$http.getLatestBlock().then((e=>e.block.header.chain_id));await window.keplr.enable(e);const t=window.getOfflineSigner(e);return t.getAccounts()},async connectMetamask(){if(!window.ethereum)return this.debug="Please install Metamask extension",null;const e=u.create((0,c.stringToPath)(this.hdpath));return e.getAccounts()},localAddress(){if(!this.address)return!1;try{const{data:e}=(0,A.addressDecode)(this.address);if(e)return this.accounts={address:this.address,pubkey:e},!0}catch(e){this.debug=e}return!1},formSubmitted(){const e=localStorage.getItem("accounts"),t=e?JSON.parse(e):{};t[this.name]={name:this.name,device:this.device,address:this.addresses},localStorage.setItem("accounts",JSON.stringify(t)),this.$store.state.chains.defaultWallet||this.$store.commit("setDefaultWallet",this.name),this.$toast({component:o.Z,props:{title:"Address Saved!",icon:"EditIcon",variant:"success"}}),this.$router.push("./accounts")},async validationFormDevice(){let e=String(this.name).length>0;if(!e)switch(this.device){case"keplr":await this.cennectKeplr().then((t=>{t&&(this.accounts=t[0],e=!0)}));break;case"metamask":await this.connectMetamask().then((t=>{t&&(this.accounts=t[0],e=!0)})).catch((e=>{this.debug=e}));break;case"ledger":case"ledger2":await this.connect().then((t=>{t&&(this.accounts=t[0],e=!0)})).catch((e=>{this.debug=e}));break;default:e=this.localAddress()}return new Promise(((t,a)=>{this.$refs.deviceRules.validate().then((s=>{e&&s&&t(!0),a()}))}))},validationFormAddress(){return new Promise(((e,t)=>{this.$refs.accountRules.validate().then((a=>{a?e(!0):t()}))}))}}},I=D,B=a(1001),F=(0,B.Z)(I,s,r,!1,null,null,null),$=F.exports},50742:function(e,t,a){a.d(t,{Fq:function(){return v},F8:function(){return g},vX:function(){return p},nz:function(){return f},Do:function(){return h},_L:function(){return b},kE:function(){return _},VV:function(){return m},Bj:function(){return k},C1:function(){return u},HQ:function(){return y}});var s=a(12954),r=a(34479),i=a(41709),n=a(25505);const o=e=>e>=0,c=e=>{const t=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%&*()]).{8,}/,a=t.test(e);return a},l=e=>{const t=/^(?:3[47][0-9]{13})$/,a=t.test(e);return a},d=e=>{if(void 0===e||null===e||0===e.length)return!0;const t=/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;return t.test(e)},u=(0,s.l7)("required",r.C1),h=(0,s.l7)("email",r.Do),m=(0,s.l7)("min",r.VV),p=((0,s.l7)("confirmed",r.GU),(0,s.l7)("regex",r.Sz),(0,s.l7)("between",r.vX)),v=(0,s.l7)("alpha",r.Fq),b=(0,s.l7)("integer",r._L),f=(0,s.l7)("digits",r.nz),g=(0,s.l7)("alpha-dash",r.E1),_=((0,s.l7)("alpha-num",r.oK),(0,s.l7)("length",r.kE)),k=((0,s.l7)("positive",{validate:o,message:"Please enter positive number!"}),(0,s.l7)("credit-card",{validate:l,message:"It is not valid credit card!"}),(0,s.l7)("password",{validate:c,message:"Your {_field_} must contain at least one uppercase, one lowercase, one special character and one digit"})),y=(0,s.l7)("url",{validate:d,message:"URL is invalid"});(0,s.NC)({en:{messages:n.s,names:{email:"Email",password:"Password"},fields:{password:{min:"{_field_} is too short, you want to get hacked?"}}},ar:{messages:i.s,names:{email:"البريد الإلكتروني",password:"كلمة السر"},fields:{password:{min:"كلمة السر قصيرة جداً سيتم اختراقك"}}}})}}]);