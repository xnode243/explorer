"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[6541],{66541:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-card",{staticClass:"text-truncate",attrs:{"no-body":""}},[s("b-tabs",{staticClass:"mt-1",attrs:{pills:""}},[s("b-tab",{attrs:{title:"Recent",disabled:""}}),s("b-tab",{attrs:{title:"Blocks",active:""}},[s("b-table",{attrs:{items:t.blocks,fields:t.list_fields,"sort-desc":!0,"sort-by":"tokens",striped:"",hover:"",stacked:"sm"},scopedSlots:t._u([{key:"cell(height)",fn:function(e){return[s("router-link",{attrs:{to:"./blocks/"+e.item.block.header.height}},[t._v(" "+t._s(e.item.block.header.height)+" ")])]}},{key:"cell(hash)",fn:function(e){return[s("small",[t._v(t._s(e.item.block_id.hash))])]}},{key:"cell(time)",fn:function(e){return[t._v(" "+t._s(t.formatTime(e.item.block.header.time))+" ")]}},{key:"cell(proposer)",fn:function(e){return[t._v(" "+t._s(t.formatProposer(e.item.block.header.proposer_address))+" ")]}},{key:"cell(txs)",fn:function(e){return[t._v(" "+t._s(t.length(e.item.block.data.txs))+" ")]}}])})],1),s("b-tab",{attrs:{title:"Transactions"}},[s("b-table",{attrs:{items:t.txs,fields:t.txFields,responsive:"sm"},scopedSlots:t._u([{key:"cell(hash)",fn:function(e){return[s("router-link",{attrs:{to:"./tx/"+e.value}},[t._v(" "+t._s(t.shortHash(e.value))+" ")])]}}])})],1)],1)],1)],1)},r=[],o=s(51015),i=s(58887),l=s(8775),h=s(67566),n=s(87047),c=s(49379),d=s(5870),m=s(54333),b=s(74087),k=s(28972),u=s(97826),f={components:{BTab:o.L,BTabs:i.M,BCard:l._,BTable:h.h,BCardHeader:n.p,BCardTitle:c._},directives:{"b-tooltip":d.o},data(){return{islive:!0,blocks:[],txs:[],list_fields:[{key:"height",sortable:!0},{key:"hash",thClass:"d-none d-lg-block",tdClass:"d-none d-lg-block text-truncate"},{key:"proposer",tdClass:"text-truncate"},{key:"txs"},{key:"time",thClass:"d-none d-md-block",tdClass:"d-none d-md-block"}],txFields:[{key:"hash"},{key:"time",formatter:t=>(0,m.toDay)(t,"from")},{key:"fee",formatter:t=>(0,m.tokenFormatter)(t)},{key:"messages",formatter:t=>(0,m.abbrMessage)(t)},{key:"memo"}]}},created(){this.$http.getLatestBlock().then((t=>{this.blocks.push(t);const e=[],{height:s}=t.block.header;for(let r=1;r<10;r+=1)e.push(s-r);(0,m.getCachedValidators)()||this.$http.getValidatorList();let a=Promise.resolve();e.forEach((t=>{a=a.then((()=>new Promise((e=>{this.$http.getBlockByHeight(t).then((t=>{e(),this.blocks.push(t),this.txs.length<20&&this.extractTx(t,"tail")}))}))))})),this.timer=setInterval(this.fetch,6e3)}))},beforeDestroy(){this.islive=!1,clearInterval(this.timer)},methods:{length:t=>Array.isArray(t)?t.length:0,shortHash:t=>(0,m.abbr)(t),formatTime:t=>(0,m.toDay)(t,"from"),formatProposer(t){return(0,m.getStakingValidatorByHex)(this.$http.config.chain_name,t)},fetch(){this.$http.getLatestBlock().then((t=>{const e=this.blocks.findIndex((e=>e.block.header.height===t.block.header.height));e<0&&(this.blocks.unshift(t),this.extractTx(t)),this.blocks.length>200&&this.blocks.pop()}))},extractTx(t,e="head"){const{txs:s}=t.block.data;if(null!==s)for(let r=0;r<s.length;r+=1){let o=new u.Z;try{const e=(0,b.decodeTxRaw)((0,k.fromBase64)(s[r]));o=u.Z.create(e),o.time=t.block.header.time}catch(a){}o.setHash(s[r]),"head"===e?(this.txs.unshift(o),this.txs.length>200&&this.txs.pop()):this.txs.length<100&&this.txs.push(o)}}}},p=f,g=s(1001),x=(0,g.Z)(p,a,r,!1,null,null,null),y=x.exports},97826:function(t,e,s){s.d(e,{Z:function(){return i}});var a=s(79562),r=s(28972),o=s(62173);class i{constructor(){this.hash="",this.fee=[new o.Z],this.memo="",this.messages=[],this.signatures=[],this.time=null}static create(t){const e=new i;return e.hash="",e.fee=t.authInfo.fee.amount,e.memo=t.body.memo,e.messages=t.body.messages,e.signatures=t.signatures,e}setHash(t){this.hash=(0,r.toHex)((0,a.sha256)((0,r.fromBase64)(t))).toUpperCase()}}}}]);