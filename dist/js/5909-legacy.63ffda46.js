"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[5909],{75909:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0===t.delegations.length?a("router-link",{attrs:{to:"/wallet/import"}},[a("b-card",{staticClass:"addzone text-center"},[a("feather-icon",{attrs:{icon:"PlusIcon"}}),t._v(" Connect Wallet ")],1)],1):t._e(),t._l(t.groupedDelegations,(function(e,r){return a("b-card",{key:"row-"+r,attrs:{title:r}},[a("b-row",{staticClass:"bg-light-secondary text-white"},[a("b-col",{staticClass:"p-1 font-weight-bold",attrs:{md:"4",sm:"12"}},[t._v(" VALIDATOR ")]),a("b-col",{staticClass:"p-1 font-weight-bold",attrs:{md:"3",sm:"12"}},[t._v(" DELEGATION ")]),a("b-col",{staticClass:"p-1 font-weight-bold",attrs:{md:"5",sm:"12"}},[t._v(" REWARD ")])],1),t._l(e,(function(e,r){return a("b-row",{key:e.validator.validator+"-"+r,staticClass:"border-bottom"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"4",sm:"12"}},[a("router-link",{attrs:{to:"/"+e.validator.chain+"/staking/"+e.validator.validator}},[a("div",{attrs:{cols:"6"}},[a("b-avatar",{attrs:{src:e.validator.logo,size:"18",variant:"light-primary",rounded:""}}),t._v(" "+t._s(e.validator.moniker)+" ")],1)])],1),a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3",sm:"12"}},[t._v(" "+t._s(e.delegation)+" ")]),a("b-col",{attrs:{md:"5",sm:"12"}},[a("router-link",{attrs:{to:"/"+e.validator.chain+"/account/"+e.delegator_address}},[a("div",[t._v(t._s(e.reward))]),a("div",{staticClass:"text-success"},[t._v(" "+t._s(t.currency)+t._s(t.toCurrency(e.reward))+" ")])])],1)],1)}))],2)}))],2)},n=[],o=(a(21249),a(41539),a(54747),a(69826),a(82526),a(41817),a(74916),a(23123),a(15306),a(73210),a(9653),a(56977),a(47941),a(23157),a(92222),a(47389)),i=a(8775),s=a(26253),d=a(50725),l=a(5870),c=a(20266),u=a(54333),g=a(22742),h={components:{BAvatar:o.SH,BCard:i._,BRow:s.T,BCol:d.l,FeatherIcon:g.Z},directives:{"b-tooltip":l.o,Ripple:c.Z},data:function(){return{address:"",selectedValidator:"",accounts:[],delegations:[],rewards:{},operationModalType:"",ibcDenoms:{},currency:(0,u.getUserCurrencySign)(),currency2:(0,u.getUserCurrency)()}},computed:{formatedDelegations:function(){var t=this,e=this.$http.getSelectedConfig(),a=e.assets[0].exponent||"6";return this.delegations.map((function(e){return{validator:{logo:e.chain.logo,validator:e.delegation.validator_address,moniker:t.findMoniker(e.chain.chain_name,e.delegation.validator_address),chain:e.chain.chain_name},delegator:e.keyname,delegator_address:e.delegation.delegator_address,delegation:(0,u.formatToken)(e.balance,{},a),reward:t.findReward(e.delegation.delegator_address,e.delegation.validator_address)}}))},groupedDelegations:function(){var t=this,e={},a=this.$http.getSelectedConfig(),r=a.assets[0].exponent||"6";return this.delegations.forEach((function(a){var n={validator:{logo:a.chain.logo,validator:a.delegation.validator_address,moniker:t.findMoniker(a.chain.chain_name,a.delegation.validator_address),chain:a.chain.chain_name},delegator:a.keyname,delegator_address:a.delegation.delegator_address,delegation:(0,u.formatToken)(a.balance,{},r),reward:t.findReward(a.delegation.delegator_address,a.delegation.validator_address)};e[a.keyname]?e[a.keyname].push(n):e[a.keyname]=[n]})),e}},created:function(){this.init()},methods:{selectValue:function(t,e){return this.operationModalType=t,this.address=e.delegator_address,this.selectedValidator=e.validator.validator,e},findMoniker:function(t,e){var a=JSON.parse((0,u.getCachedValidators)(t));if(a){var r=a.find((function(t){return t.operator_address===e}));if(r)return r.description.moniker}return e},findReward:function(t,e){var a,r=(null===(a=this.rewards[t])||void 0===a?void 0:a.rewards.find((function(t){return t.validator_address===e})))||null;return r?(0,u.tokenFormatter)(r.reward,this.ibcDenoms):"-"},getPrice:function(t){var e=this.$store.state.chains.quotes[t];return e?e[this.currency2]:0},toCurrency:function(t){var e=this,a=0;return t.split(", ").forEach((function(t){var r=t.trim().replace(/,/,"").split(" ");a+=Number(r[0])*e.getPrice(r[1])})),(0,u.numberWithCommas)(a.toFixed(2))},init:function(){var t=this;this.accounts=(0,u.getLocalAccounts)();var e=(0,u.getLocalChains)();this.accounts&&Object.keys(this.accounts).forEach((function(a){t.accounts[a].address.forEach((function(r){var n=e[r.chain];t.$http.getStakingReward(r.addr,n).then((function(e){t.rewards[r.addr]=e,e.total.forEach((function(e){e.denom.startsWith("ibc")&&t.$http.getIBCDenomTrace(e.denom,n).then((function(a){t.$set(t.ibcDenoms,e.denom,a)}))}))})),t.$http.getStakingDelegations(r.addr,n).then((function(e){if(e.delegation_responses&&e.delegation_responses.length>0){var r=e.delegation_responses.map((function(t){var e=t;return e.keyname=a,e.chain=n,e}));t.delegations=t.delegations.concat(r)}})).catch((function(){}))}))}))}}},f=h,v=a(1001),m=(0,v.Z)(f,r,n,!1,null,null,null),_=m.exports}}]);