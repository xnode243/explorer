"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[3958],{53958:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-card",[a("b-card-title",{staticClass:"d-flex justify-content-between"},[a("span",[t._v("#"+t._s(t.height))]),a("span",[a("b-button",{attrs:{size:"sm"},on:{click:function(e){return t.goblock(t.height-1)}}},[t._v(" < ")]),t._v(" "),a("b-button",{attrs:{size:"sm"},on:{click:function(e){t.goblock(Number(t.height)+1)}}},[t._v(" > ")])],1)]),a("object-field-component",{attrs:{tablefield:t.block.block_id}})],1),a("b-card",{attrs:{title:"Block Header"}},[a("object-field-component",{attrs:{tablefield:t.block.block.header}})],1),t.block.block.data.txs?a("b-card",{attrs:{title:"Transaction"}},[a("b-table",{attrs:{items:t.txs,fields:t.fields,responsive:"sm"},scopedSlots:t._u([{key:"cell(hash)",fn:function(e){return[a("router-link",{attrs:{to:"../tx/"+e.value}},[t._v(" "+t._s(e.value)+" ")])]}}],null,!1,3589811377)})],1):t._e(),t.block.block.evidence.evidence?a("b-card",{attrs:{title:"Evidence"}},[a("array-field-component",{attrs:{tablefield:t.block.block.evidence.evidence}})],1):t._e(),a("b-card",{attrs:{title:"Last Commit"}},[a("object-field-component",{attrs:{tablefield:t.block.block.last_commit,small:!0}})],1)],1)},s=[],n=a(15193),i=a(8775),o=a(67566),l=a(49379),c=a(28972),d=a(74087),u=a(97826),b=a(54333),m=a(49376),f=a(9644),h={components:{BButton:n.T,BCard:i._,BTable:o.h,BCardTitle:l._,ObjectFieldComponent:m.Z,ArrayFieldComponent:f.Z},beforeRouteUpdate(t,e,a){const{height:r}=t.params;r>0&&r!==e.params.height&&(this.initData(r),a())},data(){return{block:{block:{header:{},data:{},evidence:{}}},txs:null,height:0,fields:[{key:"hash"},{key:"fee",formatter:t=>(0,b.tokenFormatter)(t)},{key:"messages",formatter:t=>(0,b.abbrMessage)(t)},{key:"memo"}]}},created(){const{height:t}=this.$route.params;this.initData(t)},methods:{initData(t){this.height=t,this.$http.getBlockByHeight(t).then((t=>{this.block=t;const{txs:e}=t.block.data;if(null===e)return;const a=[];for(let s=0;s<e.length;s+=1){let t=new u.Z;try{const a=(0,d.decodeTxRaw)((0,c.fromBase64)(e[s]));t=u.Z.create(a)}catch(r){}t.setHash(e[s]),a.push(t)}a.length>0&&(this.txs=a)}))},goblock(t){this.$router.push({name:"block",params:{height:t}})}}},p=h,k=a(1001),v=(0,k.Z)(p,r,s,!1,null,null,null),y=v.exports},9644:function(t,e,a){a.d(e,{Z:function(){return u}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return Array.isArray(t.items)?a("b-table",{staticClass:"ml-0 mr-0 dataview text-nowrap",attrs:{items:t.items,"sticky-header":!0,"no-border-collapse":!0,responsive:"md"},scopedSlots:t._u([{key:"cell()",fn:function(e){return[t.isTokenField(e.value)?a("span",[t._v(t._s(t.formatTokens(e.value)))]):t.isHex(e.value)?a("span",[t._v(t._s(t.formatHexAddress(e.value)))]):t.isArrayText(e.value)?a("array-field-component",{attrs:{tablefield:t.eval_value(e.value)}}):a("span",{attrs:{title:e.value}},[t._v(t._s(t.formatText(e.value)))])]}}],null,!1,3233310829)}):t._e()},s=[],n=a(67566),i=a(54333),o={name:"ArrayFieldComponent",components:{BTable:n.h},props:{tablefield:{type:[Array,Object],default:()=>[]}},computed:{items(){return this.tablefield.length>0&&"string"===typeof this.tablefield[0]?this.tablefield.map((t=>({array:t}))):this.tablefield}},methods:{eval_value(t){return"string"===typeof t?JSON.parse(t):t},isTokenField(t){return(0,i.isToken)(t)},isArrayText(t){const e=String(t).startsWith("[")&&String(t).endsWith("]");return e},formatText(t){const e=/^\d{4}.\d{1,2}.\d{1,2}T\d{2}:\d{2}:.+Z$/,a=/^0\.\d+/;return e.test(t)?(0,i.toDay)(t):a.test(t)?`${(0,i.percent)(t)}%`:t},formatTokens(t){return(0,i.tokenFormatter)(t)},isHex(t){return(0,i.isHexAddress)(t)},formatHexAddress(t){return(0,i.getStakingValidatorByHex)(this.$http.config.chain_name,t)}}},l=o,c=a(1001),d=(0,c.Z)(l,r,s,!1,null,"3a881559",null),u=d.exports},49376:function(t,e,a){a.d(e,{Z:function(){return y}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"object"===typeof t.tablefield?a("b-table-simple",{attrs:{hover:"",small:t.small,striped:"",stacked:"sm",responsive:"sm"}},[a("b-tbody",t._l(t.tablefield,(function(e,r){return a("b-tr",{key:r},[a("b-td",{staticStyle:{"text-transform":"capitalize","vertical-align":"top"}},[t._v(" "+t._s(t.formatTitle(r))+" ")]),t.isTokenField(e)?a("b-td",[t._v(" "+t._s(t.formatTokens(e))+" ")]):t.isArrayText(e)?a("b-td",[t._v(" "+t._s(e.join(", "))+" ")]):t.isHex(e)?a("b-td",[t._v(" "+t._s(t.formatHexAddress(e))+" ")]):Array.isArray(e)?a("b-td",[a("array-field-component",{attrs:{tablefield:e}})],1):"object"===typeof e?a("b-td",{staticClass:"overflow-hidden",attrs:{hover:""}},[e?a("b-tabs",{attrs:{small:""}},t._l(Object.keys(e),(function(r){return a("b-tab",{key:r,staticClass:"p-0",attrs:{title:t.formatTitle(r),"title-item-class":"bg-light-primary text-capitalize"}},[Array.isArray(e[r])?a("array-field-component",{attrs:{tablefield:e[r]}}):"object"===typeof e[r]?a("object-field-component",{attrs:{tablefield:e[r]}}):t.isObjectText(e[r])?a("object-field-component",{attrs:{tablefield:t.toObject(e[r])}}):a("div",{staticStyle:{"max-width":"800px","max-height":"300px",overflow:"auto"}},[t._v(t._s(e[r]))])],1)})),1):t._e()],1):a("b-td",["description"===r?a("VueMarkdown",[t._v(" "+t._s(t.addNewLine(e))+" ")]):a("div",{staticStyle:{"max-width":"800px","max-height":"300px",overflow:"auto"}},[t._v(t._s(e))])],1)],1)})),1)],1):t._e()},s=[],n=a(85589),i=a(92095),o=a(66456),l=a(58887),c=a(51015),d=a(80560),u=a(54333),b=a(89296),m=a.n(b),f=a(9644),h={name:"ObjectFieldComponent",components:{BTableSimple:n.t,BTr:i.G,BTd:o.S,BTabs:l.M,BTab:c.L,BTbody:d.p,ArrayFieldComponent:f.Z,VueMarkdown:m()},props:{tablefield:{type:[Array,Object],default:()=>{}},small:{type:Boolean,default:!0}},data(){return{options:{markdownIt:{linkify:!0},linkAttributes:{attrs:{target:"_blank",rel:"noopener"}}}}},methods:{formatObject(t){return t},formatTitle:t=>String(t).replaceAll("_"," "),isObjectText(t){return String(t).startsWith("{")&&String(t).endsWith("}")},toObject(t){return JSON.parse(t)},formatText:t=>(0,u.abbr)(t,60),eval_value(t){return Array.from(t)},isTokenField(t){return!!t&&(0,u.isToken)(t)},isHex(t){return!!t&&(0,u.isHexAddress)(t)},formatHexAddress(t){return(0,u.getStakingValidatorByHex)(this.$http.config.chain_name,t)},isArrayText(t){return!!t&&(0,u.isStringArray)(t)},formatTokens(t){return(0,u.tokenFormatter)(t)},addNewLine(t){const e=/^0\.\d+/;return e.test(t)?`${(0,u.percent)(t)}%`:t?t.replace(/(?:\\[rn])+/g,"\n"):"-"}}},p=h,k=a(1001),v=(0,k.Z)(p,r,s,!1,null,"08f8a3cd",null),y=v.exports},97826:function(t,e,a){a.d(e,{Z:function(){return i}});var r=a(79562),s=a(28972),n=a(62173);class i{constructor(){this.hash="",this.fee=[new n.Z],this.memo="",this.messages=[],this.signatures=[],this.time=null}static create(t){const e=new i;return e.hash="",e.fee=t.authInfo.fee.amount,e.memo=t.body.memo,e.messages=t.body.messages,e.signatures=t.signatures,e}setHash(t){this.hash=(0,s.toHex)((0,r.sha256)((0,s.fromBase64)(t))).toUpperCase()}}}}]);