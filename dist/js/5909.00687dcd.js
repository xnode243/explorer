"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[5909],{75909:function(t,e,a){a.r(e),a.d(e,{default:function(){return v}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0===t.delegations.length?a("router-link",{attrs:{to:"/wallet/import"}},[a("b-card",{staticClass:"addzone text-center"},[a("feather-icon",{attrs:{icon:"PlusIcon"}}),t._v(" Connect Wallet ")],1)],1):t._e(),t._l(t.groupedDelegations,(function(e,s){return a("b-card",{key:"row-"+s,attrs:{title:s}},[a("b-row",{staticClass:"bg-light-secondary text-white"},[a("b-col",{staticClass:"p-1 font-weight-bold",attrs:{md:"4",sm:"12"}},[t._v(" VALIDATOR ")]),a("b-col",{staticClass:"p-1 font-weight-bold",attrs:{md:"3",sm:"12"}},[t._v(" DELEGATION ")]),a("b-col",{staticClass:"p-1 font-weight-bold",attrs:{md:"5",sm:"12"}},[t._v(" REWARD ")])],1),t._l(e,(function(e,s){return a("b-row",{key:e.validator.validator+"-"+s,staticClass:"border-bottom"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"4",sm:"12"}},[a("router-link",{attrs:{to:"/"+e.validator.chain+"/staking/"+e.validator.validator}},[a("div",{attrs:{cols:"6"}},[a("b-avatar",{attrs:{src:e.validator.logo,size:"18",variant:"light-primary",rounded:""}}),t._v(" "+t._s(e.validator.moniker)+" ")],1)])],1),a("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"3",sm:"12"}},[t._v(" "+t._s(e.delegation)+" ")]),a("b-col",{attrs:{md:"5",sm:"12"}},[a("router-link",{attrs:{to:"/"+e.validator.chain+"/account/"+e.delegator_address}},[a("div",[t._v(t._s(e.reward))]),a("div",{staticClass:"text-success"},[t._v(" "+t._s(t.currency)+t._s(t.toCurrency(e.reward))+" ")])])],1)],1)}))],2)}))],2)},r=[],o=a(47389),n=a(8775),i=a(26253),d=a(50725),l=a(5870),c=a(20266),h=a(54333),g=a(22742),u={components:{BAvatar:o.SH,BCard:n._,BRow:i.T,BCol:d.l,FeatherIcon:g.Z},directives:{"b-tooltip":l.o,Ripple:c.Z},data(){return{address:"",selectedValidator:"",accounts:[],delegations:[],rewards:{},operationModalType:"",ibcDenoms:{},currency:(0,h.getUserCurrencySign)(),currency2:(0,h.getUserCurrency)()}},computed:{formatedDelegations(){const t=this.$http.getSelectedConfig(),e=t.assets[0].exponent||"6";return this.delegations.map((t=>({validator:{logo:t.chain.logo,validator:t.delegation.validator_address,moniker:this.findMoniker(t.chain.chain_name,t.delegation.validator_address),chain:t.chain.chain_name},delegator:t.keyname,delegator_address:t.delegation.delegator_address,delegation:(0,h.formatToken)(t.balance,{},e),reward:this.findReward(t.delegation.delegator_address,t.delegation.validator_address)})))},groupedDelegations(){const t={},e=this.$http.getSelectedConfig(),a=e.assets[0].exponent||"6";return this.delegations.forEach((e=>{const s={validator:{logo:e.chain.logo,validator:e.delegation.validator_address,moniker:this.findMoniker(e.chain.chain_name,e.delegation.validator_address),chain:e.chain.chain_name},delegator:e.keyname,delegator_address:e.delegation.delegator_address,delegation:(0,h.formatToken)(e.balance,{},a),reward:this.findReward(e.delegation.delegator_address,e.delegation.validator_address)};t[e.keyname]?t[e.keyname].push(s):t[e.keyname]=[s]})),t}},created(){this.init()},methods:{selectValue(t,e){return this.operationModalType=t,this.address=e.delegator_address,this.selectedValidator=e.validator.validator,e},findMoniker(t,e){const a=JSON.parse((0,h.getCachedValidators)(t));if(a){const t=a.find((t=>t.operator_address===e));if(t)return t.description.moniker}return e},findReward(t,e){const a=this.rewards[t]?.rewards.find((t=>t.validator_address===e))||null;return a?(0,h.tokenFormatter)(a.reward,this.ibcDenoms):"-"},getPrice(t){const e=this.$store.state.chains.quotes[t];return e?e[this.currency2]:0},toCurrency(t){let e=0;return t.split(", ").forEach((t=>{const a=t.trim().replace(/,/,"").split(" ");e+=Number(a[0])*this.getPrice(a[1])})),(0,h.numberWithCommas)(e.toFixed(2))},init(){this.accounts=(0,h.getLocalAccounts)();const t=(0,h.getLocalChains)();this.accounts&&Object.keys(this.accounts).forEach((e=>{this.accounts[e].address.forEach((a=>{const s=t[a.chain];this.$http.getStakingReward(a.addr,s).then((t=>{this.rewards[a.addr]=t,t.total.forEach((t=>{t.denom.startsWith("ibc")&&this.$http.getIBCDenomTrace(t.denom,s).then((e=>{this.$set(this.ibcDenoms,t.denom,e)}))}))})),this.$http.getStakingDelegations(a.addr,s).then((t=>{if(t.delegation_responses&&t.delegation_responses.length>0){const a=t.delegation_responses.map((t=>{const a=t;return a.keyname=e,a.chain=s,a}));this.delegations=this.delegations.concat(a)}})).catch((()=>{}))}))}))}}},m=u,_=a(1001),p=(0,_.Z)(m,s,r,!1,null,null,null),v=p.exports}}]);