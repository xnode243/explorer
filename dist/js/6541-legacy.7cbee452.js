"use strict";(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[6541],{66541:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-card",{staticClass:"text-truncate",attrs:{"no-body":""}},[s("b-tabs",{staticClass:"mt-1",attrs:{pills:""}},[s("b-tab",{attrs:{title:"Recent",disabled:""}}),s("b-tab",{attrs:{title:"Blocks",active:""}},[s("b-table",{attrs:{items:t.blocks,fields:t.list_fields,"sort-desc":!0,"sort-by":"tokens",striped:"",hover:"",stacked:"sm"},scopedSlots:t._u([{key:"cell(height)",fn:function(e){return[s("router-link",{attrs:{to:"./blocks/"+e.item.block.header.height}},[t._v(" "+t._s(e.item.block.header.height)+" ")])]}},{key:"cell(hash)",fn:function(e){return[s("small",[t._v(t._s(e.item.block_id.hash))])]}},{key:"cell(time)",fn:function(e){return[t._v(" "+t._s(t.formatTime(e.item.block.header.time))+" ")]}},{key:"cell(proposer)",fn:function(e){return[t._v(" "+t._s(t.formatProposer(e.item.block.header.proposer_address))+" ")]}},{key:"cell(txs)",fn:function(e){return[t._v(" "+t._s(t.length(e.item.block.data.txs))+" ")]}}])})],1),s("b-tab",{attrs:{title:"Transactions"}},[s("b-table",{attrs:{items:t.txs,fields:t.txFields,responsive:"sm"},scopedSlots:t._u([{key:"cell(hash)",fn:function(e){return[s("router-link",{attrs:{to:"./tx/"+e.value}},[t._v(" "+t._s(t.shortHash(e.value))+" ")])]}}])})],1)],1)],1)],1)},r=[],a=(s(41539),s(34553),s(51015)),o=s(58887),i=s(8775),l=s(67566),h=s(87047),c=s(49379),u=s(5870),f=s(54333),d=s(74087),k=s(28972),m=s(97826),b={components:{BTab:a.L,BTabs:o.M,BCard:i._,BTable:l.h,BCardHeader:h.p,BCardTitle:c._},directives:{"b-tooltip":u.o},data:function(){return{islive:!0,blocks:[],txs:[],list_fields:[{key:"height",sortable:!0},{key:"hash",thClass:"d-none d-lg-block",tdClass:"d-none d-lg-block text-truncate"},{key:"proposer",tdClass:"text-truncate"},{key:"txs"},{key:"time",thClass:"d-none d-md-block",tdClass:"d-none d-md-block"}],txFields:[{key:"hash"},{key:"time",formatter:function(t){return(0,f.toDay)(t,"from")}},{key:"fee",formatter:function(t){return(0,f.tokenFormatter)(t)}},{key:"messages",formatter:function(t){return(0,f.abbrMessage)(t)}},{key:"memo"}]}},created:function(){var t=this;this.$http.getLatestBlock().then((function(e){t.blocks.push(e);for(var s=[],n=e.block.header.height,r=1;r<10;r+=1)s.push(n-r);(0,f.getCachedValidators)()||t.$http.getValidatorList();var a=Promise.resolve();s.forEach((function(e){a=a.then((function(){return new Promise((function(s){t.$http.getBlockByHeight(e).then((function(e){s(),t.blocks.push(e),t.txs.length<20&&t.extractTx(e,"tail")}))}))}))})),t.timer=setInterval(t.fetch,6e3)}))},beforeDestroy:function(){this.islive=!1,clearInterval(this.timer)},methods:{length:function(t){return Array.isArray(t)?t.length:0},shortHash:function(t){return(0,f.abbr)(t)},formatTime:function(t){return(0,f.toDay)(t,"from")},formatProposer:function(t){return(0,f.getStakingValidatorByHex)(this.$http.config.chain_name,t)},fetch:function(){var t=this;this.$http.getLatestBlock().then((function(e){var s=t.blocks.findIndex((function(t){return t.block.header.height===e.block.header.height}));s<0&&(t.blocks.unshift(e),t.extractTx(e)),t.blocks.length>200&&t.blocks.pop()}))},extractTx:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"head",s=t.block.data.txs;if(null!==s)for(var n=0;n<s.length;n+=1){var r=new m.Z;try{var a=(0,d.decodeTxRaw)((0,k.fromBase64)(s[n]));r=m.Z.create(a),r.time=t.block.header.time}catch(o){}r.setHash(s[n]),"head"===e?(this.txs.unshift(r),this.txs.length>200&&this.txs.pop()):this.txs.length<100&&this.txs.push(r)}}}},g=b,p=s(1001),v=(0,p.Z)(g,n,r,!1,null,null,null),y=v.exports},97826:function(t,e,s){s.d(e,{Z:function(){return l}});var n=s(76133),r=s(92751),a=s(79562),o=s(28972),i=s(62173),l=function(){function t(){(0,n.Z)(this,t),this.hash="",this.fee=[new i.Z],this.memo="",this.messages=[],this.signatures=[],this.time=null}return(0,r.Z)(t,[{key:"setHash",value:function(t){this.hash=(0,o.toHex)((0,a.sha256)((0,o.fromBase64)(t))).toUpperCase()}}],[{key:"create",value:function(e){var s=new t;return s.hash="",s.fee=e.authInfo.fee.amount,s.memo=e.body.memo,s.messages=e.body.messages,s.signatures=e.signatures,s}}]),t}()}}]);