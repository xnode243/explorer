(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[8429],{14347:function(e,t,r){"use strict";r.d(t,{An:function(){return l},Ht:function(){return f},R7:function(){return w},RH:function(){return b}});var n,o,i=r(81249),a=r.n(i),u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)};(function(e){e["blue"]="blue",e["nanoS"]="nanoS",e["nanoSP"]="nanoSP",e["nanoX"]="nanoX",e["nanoFTS"]="nanoFTS"})(o||(o={}));var s=(n={},n[o.blue]={id:o.blue,productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:491520,masks:[822083584,822149120],getBlockSize:function(e){return 4096}},n[o.nanoS]={id:o.nanoS,productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:327680,masks:[823132160],getBlockSize:function(e){var t;return a().lt(null!==(t=a().coerce(e))&&void 0!==t?t:"","2.0.0")?4096:2048}},n[o.nanoSP]={id:o.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1572864,masks:[856686592],getBlockSize:function(e){return 32}},n[o.nanoX]={id:o.nanoX,productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2097152,masks:[855638016],getBlockSize:function(e){return 4096},bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},n[o.nanoFTS]={id:o.nanoFTS,productName:"Ledger Nano FTS",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:2097152,masks:[857735168],getBlockSize:function(e){return 4096},bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},n),c=(o.blue,o.nanoS,o.nanoSP,o.nanoX,o.nanoFTS,Object.values(s)),l=11415,f=function(e){var t=c.find((function(t){return t.legacyUsbProductId===e}));if(t)return t;var r=e>>8,n=c.find((function(e){return e.productIdMM===r}));return n},h=[],d={};for(var p in s){var g=s[p],v=g.bluetoothSpec;if(v)for(var y=0;y<v.length;y++){var E=v[y];h.push(E.serviceUuid),d[E.serviceUuid]=d[E.serviceUuid.replace(/-/g,"")]=u({deviceModel:g},E)}}var b=function(){return h},w=function(e){return d[e.toLowerCase()]}},53732:function(e,t,r){"use strict";var n=r(48764)["Buffer"];t.n=void 0;var o=r(50580),i=r(67477),a=r(28716),u=5,s=function(e){return i.Observable.create((function(t){var r=0,i=0,s=n.alloc(0),c=e.subscribe({complete:function(){t.error(new o.DisconnectedDevice),c.unsubscribe()},error:function(e){(0,a.log)("ble-error","in receiveAPDU "+String(e)),t.error(e),c.unsubscribe()},next:function(e){var a=e.readUInt8(0),l=e.readUInt16BE(1),f=e.slice(3);a===u?r===l?(0===l&&(i=f.readUInt16BE(0),f=f.slice(2)),r++,s=n.concat([s,f]),s.length>i?t.error(new o.TransportError("BLE: received too much data. discontinued chunk. Received "+s.length+" but expected "+i,"BLETooMuchData")):s.length===i&&(t.next(s),t.complete(),c.unsubscribe())):t.error(new o.TransportError("BLE: Invalid sequence number. discontinued chunk. Received "+l+" but expected "+r,"InvalidSequence")):t.error(new o.TransportError("Invalid tag "+a.toString(16),"InvalidTag"))}});return function(){c.unsubscribe()}}))};t.n=s},37741:function(e,t,r){"use strict";var n=r(48764)["Buffer"],o=this&&this.__awaiter||function(e,t,r,n){function o(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(t){i(t)}}function u(e){try{s(n["throw"](e))}catch(t){i(t)}}function s(e){e.done?r(e.value):o(e.value).then(a,u)}s((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(e){return function(t){return s([e,t])}}function s(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};t.__esModule=!0,t.sendAPDU=void 0;var u=r(67477),s=r(28716),c=5;function l(e,t){for(var r=[],n=0,o=t(0);n<e.length;n+=o,o=t(n))r.push(e.slice(n,n+o));return r}var f=function(e,t,r){var f=l(t,(function(e){return r-(0===e?5:3)})).map((function(e,r){var o=n.alloc(0===r?5:3);return o.writeUInt8(c,0),o.writeUInt16BE(r,1),0===r&&o.writeUInt16BE(t.length,3),n.concat([o,e])}));return new u.Observable((function(t){var r=!1;function n(){return o(this,void 0,void 0,(function(){var t,n,o,u,s,c;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,6,7]),t=a(f),n=t.next(),i.label=1;case 1:return n.done?[3,4]:(o=n.value,r?[2]:[4,e(o)]);case 2:i.sent(),i.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return u=i.sent(),s={error:u},[3,7];case 6:try{n&&!n.done&&(c=t["return"])&&c.call(t)}finally{if(s)throw s.error}return[7];case 7:return[2]}}))}))}n().then((function(){r=!0,t.complete()}),(function(e){r=!0,(0,s.log)("ble-error","sendAPDU failure "+String(e)),t.error(e)}));var u=function(){r||((0,s.log)("ble-verbose","sendAPDU interruption"),r=!0)};return u}))};t.sendAPDU=f},57204:function(e,t,r){"use strict";var n=r(48764)["Buffer"];var o=r(50580),i=5;function a(e){var t=n.alloc(2);return t.writeUInt16BE(e,0),t}var u={data:n.alloc(0),dataLength:0,sequence:0},s=function(e,t){return{makeBlocks:function(r){var o=n.concat([a(r.length),r]),u=t-5,s=Math.ceil(o.length/u);o=n.concat([o,n.alloc(s*u-o.length+1).fill(0)]);for(var c=[],l=0;l<s;l++){var f=n.alloc(5);f.writeUInt16BE(e,0),f.writeUInt8(i,2),f.writeUInt16BE(l,3);var h=o.slice(l*u,(l+1)*u);c.push(n.concat([f,h]))}return c},reduceResponse:function(t,r){var a=t||u,s=a.data,c=a.dataLength,l=a.sequence;if(r.readUInt16BE(0)!==e)throw new o.TransportError("Invalid channel","InvalidChannel");if(r.readUInt8(2)!==i)throw new o.TransportError("Invalid tag","InvalidTag");if(r.readUInt16BE(3)!==l)throw new o.TransportError("Invalid sequence","InvalidSequence");t||(c=r.readUInt16BE(5)),l++;var f=r.slice(t?5:7);return s=n.concat([s,f]),s.length>c&&(s=s.slice(0,c)),{data:s,dataLength:c,sequence:l}},getReducedResult:function(e){if(e&&e.dataLength===e.data.length)return e.data}}};t.Z=s},50580:function(e,t,r){"use strict";r.r(t),r.d(t,{AccountNameRequiredError:function(){return h},AccountNotSupported:function(){return d},AmountRequired:function(){return p},BluetoothRequired:function(){return g},BtcUnmatchedApp:function(){return v},CantOpenDevice:function(){return y},CantScanQRCode:function(){return Fe},CashAddrNotSupported:function(){return E},CurrencyNotSupported:function(){return b},DBNotReset:function(){return Ze},DBWrongPassword:function(){return Qe},DeviceAppVerifyNotSupported:function(){return w},DeviceGenuineSocketEarlyClose:function(){return S},DeviceHalted:function(){return C},DeviceInOSUExpected:function(){return x},DeviceNameInvalid:function(){return k},DeviceNotGenuineError:function(){return m},DeviceOnDashboardExpected:function(){return _},DeviceOnDashboardUnexpected:function(){return I},DeviceShouldStayInApp:function(){return Ne},DeviceSocketFail:function(){return T},DeviceSocketNoBulkStatus:function(){return A},DisconnectedDevice:function(){return R},DisconnectedDeviceDuringOperation:function(){return U},ETHAddressNonEIP:function(){return ze},EnpointConfigError:function(){return P},EthAppPleaseEnableContractData:function(){return N},FeeEstimationFailed:function(){return D},FeeNotLoaded:function(){return Me},FeeRequired:function(){return qe},FeeTooHigh:function(){return Ge},FirmwareNotRecognized:function(){return O},FirmwareOrAppUpdateRequired:function(){return We},GasLessThanEstimate:function(){return ce},GenuineCheckFailed:function(){return je},HardResetFail:function(){return B},InvalidAddress:function(){return z},InvalidAddressBecauseDestinationIsAlsoSource:function(){return F},InvalidXRPTag:function(){return L},LatestMCUInstalledError:function(){return M},LedgerAPI4xx:function(){return Ve},LedgerAPI5xx:function(){return Ye},LedgerAPIError:function(){return G},LedgerAPIErrorWithMessage:function(){return K},LedgerAPINotAvailable:function(){return H},MCUNotGenuineToDashboard:function(){return ve},ManagerAppAlreadyInstalledError:function(){return j},ManagerAppDepInstallRequired:function(){return Y},ManagerAppDepUninstallRequired:function(){return W},ManagerAppRelyOnBTCError:function(){return V},ManagerDeviceLockedError:function(){return X},ManagerFirmwareNotEnoughSpaceError:function(){return Q},ManagerNotEnoughSpaceError:function(){return Z},ManagerUninstallBTCDep:function(){return J},NetworkDown:function(){return $},NoAccessToCamera:function(){return ae},NoAddressesFound:function(){return ee},NoDBPathGiven:function(){return Xe},NotEnoughBalance:function(){return te},NotEnoughBalanceBecauseDestinationNotCreated:function(){return ie},NotEnoughBalanceInParentAccount:function(){return ne},NotEnoughBalanceToDelegate:function(){return re},NotEnoughGas:function(){return ue},NotEnoughSpendableBalance:function(){return oe},NotSupportedLegacyAddress:function(){return se},PairingFailed:function(){return He},PasswordIncorrectError:function(){return fe},PasswordsDontMatchError:function(){return le},RecipientRequired:function(){return ye},RecommendSubAccountsToEmpty:function(){return he},RecommendUndelegation:function(){return de},StatusCodes:function(){return $e},SyncError:function(){return Ke},TimeoutTagged:function(){return pe},TransportError:function(){return Je},TransportInterfaceNotAvailable:function(){return Re},TransportOpenUserCancelled:function(){return Ae},TransportRaceCondition:function(){return Ue},TransportStatusError:function(){return tt},TransportWebUSBGestureRequired:function(){return Pe},UnavailableTezosOriginatedAccountReceive:function(){return Ee},UnavailableTezosOriginatedAccountSend:function(){return be},UnexpectedBootloader:function(){return ge},UnknownMCU:function(){return q},UpdateFetchFileFail:function(){return we},UpdateIncorrectHash:function(){return Se},UpdateIncorrectSig:function(){return me},UpdateYourApp:function(){return _e},UserRefusedAddress:function(){return xe},UserRefusedAllowManager:function(){return ke},UserRefusedDeviceNameChange:function(){return Ie},UserRefusedFirmwareUpdate:function(){return Ce},UserRefusedOnDevice:function(){return Te},WebsocketConnectionError:function(){return De},WebsocketConnectionFailed:function(){return Oe},WrongAppForCurrency:function(){return Le},WrongDeviceForAccount:function(){return Be},addCustomErrorDeserializer:function(){return u},createCustomErrorClass:function(){return s},deserializeError:function(){return c},getAltStatusMessage:function(){return et},serializeError:function(){return l}});var n=r(25108),o=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i={},a={},u=function(e,t){a[e]=t},s=function(e){var t=function(t,r){Object.assign(this,r),this.name=e,this.message=t||e,this.stack=(new Error).stack};return t.prototype=new Error,i[e]=t,t},c=function(e){if("object"===typeof e&&e){try{var t=JSON.parse(e.message);t.message&&t.name&&(e=t)}catch(h){}var r=void 0;if("string"===typeof e.name){var o=e.name,u=a[o];if(u)r=u(e);else{var l="Error"===o?Error:i[o];l||(n.warn("deserializing an unknown class '"+o+"'"),l=s(o)),r=Object.create(l.prototype);try{for(var f in e)e.hasOwnProperty(f)&&(r[f]=e[f])}catch(h){}}}else r=new Error(e.message);return!r.stack&&Error.captureStackTrace&&Error.captureStackTrace(r,c),r}return new Error(String(e))},l=function(e){return e?"object"===typeof e?f(e,[]):"function"===typeof e?"[Function: "+(e.name||"anonymous")+"]":e:e};function f(e,t){var r,n,i={};t.push(e);try{for(var a=o(Object.keys(e)),u=a.next();!u.done;u=a.next()){var s=u.value,c=e[s];"function"!==typeof c&&(c&&"object"===typeof c?-1!==t.indexOf(e[s])?i[s]="[Circular]":i[s]=f(e[s],t.slice(0)):i[s]=c)}}catch(l){r={error:l}}finally{try{u&&!u.done&&(n=a["return"])&&n.call(a)}finally{if(r)throw r.error}}return"string"===typeof e.name&&(i.name=e.name),"string"===typeof e.message&&(i.message=e.message),"string"===typeof e.stack&&(i.stack=e.stack),i}var h=s("AccountNameRequired"),d=s("AccountNotSupported"),p=s("AmountRequired"),g=s("BluetoothRequired"),v=s("BtcUnmatchedApp"),y=s("CantOpenDevice"),E=s("CashAddrNotSupported"),b=s("CurrencyNotSupported"),w=s("DeviceAppVerifyNotSupported"),S=s("DeviceGenuineSocketEarlyClose"),m=s("DeviceNotGenuine"),_=s("DeviceOnDashboardExpected"),I=s("DeviceOnDashboardUnexpected"),x=s("DeviceInOSUExpected"),C=s("DeviceHalted"),k=s("DeviceNameInvalid"),T=s("DeviceSocketFail"),A=s("DeviceSocketNoBulkStatus"),R=s("DisconnectedDevice"),U=s("DisconnectedDeviceDuringOperation"),P=s("EnpointConfig"),N=s("EthAppPleaseEnableContractData"),D=s("FeeEstimationFailed"),O=s("FirmwareNotRecognized"),B=s("HardResetFail"),L=s("InvalidXRPTag"),z=s("InvalidAddress"),F=s("InvalidAddressBecauseDestinationIsAlsoSource"),M=s("LatestMCUInstalledError"),q=s("UnknownMCU"),G=s("LedgerAPIError"),K=s("LedgerAPIErrorWithMessage"),H=s("LedgerAPINotAvailable"),j=s("ManagerAppAlreadyInstalled"),V=s("ManagerAppRelyOnBTC"),Y=s("ManagerAppDepInstallRequired"),W=s("ManagerAppDepUninstallRequired"),X=s("ManagerDeviceLocked"),Q=s("ManagerFirmwareNotEnoughSpace"),Z=s("ManagerNotEnoughSpace"),J=s("ManagerUninstallBTCDep"),$=s("NetworkDown"),ee=s("NoAddressesFound"),te=s("NotEnoughBalance"),re=s("NotEnoughBalanceToDelegate"),ne=s("NotEnoughBalanceInParentAccount"),oe=s("NotEnoughSpendableBalance"),ie=s("NotEnoughBalanceBecauseDestinationNotCreated"),ae=s("NoAccessToCamera"),ue=s("NotEnoughGas"),se=s("NotSupportedLegacyAddress"),ce=s("GasLessThanEstimate"),le=s("PasswordsDontMatch"),fe=s("PasswordIncorrect"),he=s("RecommendSubAccountsToEmpty"),de=s("RecommendUndelegation"),pe=s("TimeoutTagged"),ge=s("UnexpectedBootloader"),ve=s("MCUNotGenuineToDashboard"),ye=s("RecipientRequired"),Ee=s("UnavailableTezosOriginatedAccountReceive"),be=s("UnavailableTezosOriginatedAccountSend"),we=s("UpdateFetchFileFail"),Se=s("UpdateIncorrectHash"),me=s("UpdateIncorrectSig"),_e=s("UpdateYourApp"),Ie=s("UserRefusedDeviceNameChange"),xe=s("UserRefusedAddress"),Ce=s("UserRefusedFirmwareUpdate"),ke=s("UserRefusedAllowManager"),Te=s("UserRefusedOnDevice"),Ae=s("TransportOpenUserCancelled"),Re=s("TransportInterfaceNotAvailable"),Ue=s("TransportRaceCondition"),Pe=s("TransportWebUSBGestureRequired"),Ne=s("DeviceShouldStayInApp"),De=s("WebsocketConnectionError"),Oe=s("WebsocketConnectionFailed"),Be=s("WrongDeviceForAccount"),Le=s("WrongAppForCurrency"),ze=s("ETHAddressNonEIP"),Fe=s("CantScanQRCode"),Me=s("FeeNotLoaded"),qe=s("FeeRequired"),Ge=s("FeeTooHigh"),Ke=s("SyncError"),He=s("PairingFailed"),je=s("GenuineCheckFailed"),Ve=s("LedgerAPI4xx"),Ye=s("LedgerAPI5xx"),We=s("FirmwareOrAppUpdateRequired"),Xe=s("NoDBPathGiven"),Qe=s("DBWrongPassword"),Ze=s("DBNotReset");function Je(e,t){this.name="TransportError",this.message=e,this.stack=(new Error).stack,this.id=t}Je.prototype=new Error,u("TransportError",(function(e){return new Je(e.message,e.id)}));var $e={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function et(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=e&&e<=28671)return"Internal error, please report"}function tt(e){this.name="TransportStatusError";var t=Object.keys($e).find((function(t){return $e[t]===e}))||"UNKNOWN_ERROR",r=et(e)||t,n=e.toString(16);this.message="Ledger device: "+r+" (0x"+n+")",this.stack=(new Error).stack,this.statusCode=e,this.statusText=t}tt.prototype=new Error,u("TransportStatusError",(function(e){return new tt(e.statusCode)}))},21562:function(e,t,r){"use strict";r.d(t,{Z:function(){return X}});var n=r(59052),o=r(44431),i=r(48764)["Buffer"];function a(e){var t,r=[1,2],a=r.includes(e[0])?e[0]:null,u=null===a?e:e.slice(1),s=(0,n.J)(u).map((function(e){return i.from(e.slice(2),"hex")})),c=0,l=(0,n.J)(u);t=2===a?{data:l[7],to:l[5],chainId:s[0]}:1===a?{data:l[6],to:l[4],chainId:s[0]}:{data:l[5],to:l[3],chainId:s.length>6?s[6]:i.from("0x01","hex")};var f=t.chainId,h=new o.BigNumber(0);if(f){h=new o.BigNumber(f.toString("hex"),16);var d=i.alloc(4);f.length>4?f.copy(d):f.copy(d,4-f.length),c=d.readUInt32BE(0)}var p=0;if(null===a&&s.length>6){var g=i.from((0,n.c)(s.slice(-3)).slice(2),"hex");if(p=e.length-(g.length-1),g[0]>247){p++;var v=g[0]-247;p+=v-1}}return{decodedTx:t,txType:a,chainId:h,chainIdTruncated:c,vrsOffset:p}}var u=r(28716),s=r(16752),c=r(81692),l=r.n(c),f=function(){return f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)},h={nftExplorerBaseURL:null,pluginBaseURL:"https://cdn.live.ledger.com",extraPlugins:null};function d(e){return f(f({},h),e)}var p=function(){return p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)},g=function(e,t,r,n){function o(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(t){i(t)}}function u(e){try{s(n["throw"](e))}catch(t){i(t)}}function s(e){e.done?r(e.value):o(e.value).then(a,u)}s((n=n.apply(e,t||[])).next())}))},v=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(e){return function(t){return s([e,t])}}function s(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},y=function(e,t,r,n){return g(void 0,void 0,void 0,(function(){var r,o,i,a,s,c,f,h;return v(this,(function(g){switch(g.label){case 0:return r=d(n),o=r.pluginBaseURL,i=r.extraPlugins,a={},o?(s="".concat(o,"/plugins/ethereum.json"),[4,l().get("".concat(o,"/plugins/ethereum.json")).then((function(e){return e.data}))["catch"]((function(e){return(0,u.log)("error","could not fetch from "+s+": "+String(e)),null}))]):[3,2];case 1:a=g.sent(),g.label=2;case 2:return i&&(a=p(p({},a),i)),a?(c=t.toLowerCase(),f=e.toLowerCase(),f in a&&(h=a[f],c in h)?[2,{payload:h[c]["serialized_data"],signature:h[c]["signature"],plugin:h[c]["plugin"],erc20OfInterest:h[c]["erc20OfInterest"],abi:h["abi"]}]:[2]):[2]}}))}))},E=r(92182),b=r.n(E),w=r(48764)["Buffer"],S=function(e,t){return _().byContractAndChainId(m(e),t)},m=function(e){var t=e.toLowerCase();return t.startsWith("0x")?t:"0x"+t},_=function(){var e;return function(){if(e)return e;var t=w.from(b(),"base64"),r={},n=[],o=0;while(o<t.length){var i=t.readUInt32BE(o);o+=4;var a=t.slice(o,o+i),u=0,s=a.readUInt8(u);u+=1;var c=a.slice(u,u+s).toString("ascii");u+=s;var l=m(a.slice(u,u+20).toString("hex"));u+=20;var f=a.readUInt32BE(u);u+=4;var h=a.readUInt32BE(u);u+=4;var d=a.slice(u),p={ticker:c,contractAddress:l,decimals:f,chainId:h,signature:d,data:a};n.push(p),r[String(h)+":"+l]=p,o+=i}var g={list:function(){return n},byContractAndChainId:function(e,t){return r[String(t)+":"+e]}};return e=g,g}}(),I=function(e,t,r,n){function o(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(t){i(t)}}function u(e){try{s(n["throw"](e))}catch(t){i(t)}}function s(e){e.done?r(e.value):o(e.value).then(a,u)}s((n=n.apply(e,t||[])).next())}))},x=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(e){return function(t){return s([e,t])}}function s(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};function C(e){if(!e||!e.status)throw e;if(404===e.status)return null;throw e}var k=function(e,t,r){return I(void 0,void 0,void 0,(function(){var n,o,i,a,u,s,c,f;return x(this,(function(h){switch(h.label){case 0:return n=d(r).nftExplorerBaseURL,n?(o="".concat(n,"/").concat(t,"/contracts/").concat(e),[4,l().get(o).then((function(e){return e.data}))["catch"](C)]):[2];case 1:return i=h.sent(),i?(a=i["payload"],u=parseInt(a.slice(4,6),16),s=a.substr(6,2*u),c=null===(f=s.match(/.{2}/g))||void 0===f?void 0:f.reduce((function(e,t){return e+String.fromCharCode(parseInt(t,16))}),""),[2,{contractAddress:e,collectionName:c||"",data:a}]):[2]}}))}))},T=function(e,t,r,n){return I(void 0,void 0,void 0,(function(){var o,i,a,u;return x(this,(function(s){switch(s.label){case 0:return o=d(n).nftExplorerBaseURL,o?(i="".concat(o,"/").concat(r,"/contracts/").concat(e,"/plugin-selector/").concat(t),[4,l().get(i).then((function(e){return e.data}))["catch"](C)]):[2];case 1:return a=s.sent(),a?(u=a["payload"],[2,u]):[2]}}))}))},A=r(48764)["Buffer"],R=function(e,t,r,n){function o(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(t){i(t)}}function u(e){try{s(n["throw"](e))}catch(t){i(t)}}function s(e){e.done?r(e.value):o(e.value).then(a,u)}s((n=n.apply(e,t||[])).next())}))},U=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(e){return function(t){return s([e,t])}}function s(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},P=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},N={resolveTransaction:function(e,t,r){return R(void 0,void 0,void 0,(function(){function n(e){l.erc20Tokens.push(e)}function o(e){l.nfts.push(e)}function i(e,t){l.externalPlugin.push({payload:e,signature:t})}function c(e){l.plugin.push(e)}var l,f,h,d,p,g,v,E,b,w,m,_,I,x,C,N,D,O,B,L,z,F,M,q,G;return U(this,(function(K){switch(K.label){case 0:return l={erc20Tokens:[],nfts:[],externalPlugin:[],plugin:[]},f=A.from(e,"hex"),h=a(f),d=h.decodedTx,p=h.chainIdTruncated,g=function(e){return R(void 0,void 0,void 0,(function(){var i,a,s;return U(this,(function(c){switch(c.label){case 0:return r.nft?[4,k(e,p,t)]:[3,2];case 1:return a=c.sent(),[3,3];case 2:a=null,c.label=3;case 3:return i=a,i?((0,u.log)("ethereum","loaded nft info for "+i.contractAddress+" ("+i.collectionName+")"),o(i.data)):(s=S(e,p),s&&((0,u.log)("ethereum","loaded erc20token info for "+s.contractAddress+" ("+s.ticker+")"),n(s.data.toString("hex")))),[2]}}))}))},d.data.length>=10?(v=d.data.substring(0,10),r.nft?[4,T(d.to,v,p,t)]:[3,2]):[3,19];case 1:return b=K.sent(),[3,3];case 2:b=null,K.label=3;case 3:return E=b,E?(c(E),[3,17]):[3,4];case 4:return r.externalPlugins?[4,y(d.to,v,p,t)]:[3,6];case 5:return m=K.sent(),[3,7];case 6:m=null,K.label=7;case 7:if(w=m,!w)return[3,16];if(_=w.plugin,I=w.payload,x=w.signature,C=w.erc20OfInterest,N=w.abi,_&&((0,u.log)("ethereum","found plugin for "+v),i(I,x)),!(C&&C.length&&N))return[3,15];D=new s.vU(N),O=D.parseTransaction(d).args,K.label=8;case 8:K.trys.push([8,13,14,15]),B=P(C),L=B.next(),K.label=9;case 9:return L.done?[3,12]:(z=L.value,F=z.split(".").reduce((function(e,t){return"-1"===t&&Array.isArray(e)?e[e.length-1]:e[t]}),O),[4,g(F)]);case 10:K.sent(),K.label=11;case 11:return L=B.next(),[3,9];case 12:return[3,15];case 13:return M=K.sent(),q={error:M},[3,15];case 14:try{L&&!L.done&&(G=B["return"])&&G.call(B)}finally{if(q)throw q.error}return[7];case 15:return[3,17];case 16:(0,u.log)("ethereum","no infos for selector "+v),K.label=17;case 17:return[4,g(d.to)];case 18:K.sent(),K.label=19;case 19:return[2,l]}}))}))}},D=N,O=r(50580),B=(0,O.createCustomErrorClass)("EthAppPleaseEnableContractData"),L=(0,O.createCustomErrorClass)("EthAppNftNotSupported"),z=r(48764)["Buffer"],F=r(25108),M=function(e,t,r,n){function o(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(t){i(t)}}function u(e){try{s(n["throw"](e))}catch(t){i(t)}}function s(e){e.done?r(e.value):o(e.value).then(a,u)}s((n=n.apply(e,t||[])).next())}))},q=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(e){return function(t){return s([e,t])}}function s(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},G=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},K={eth:1,erc20:2,erc721:3,erc20mintable:4,erc721mintable:5};function H(e){var t=[],r=e.split("/");return r.forEach((function(e){var r=parseInt(e,10);isNaN(r)||(e.length>1&&"'"===e[e.length-1]&&(r+=2147483648),t.push(r))})),t}function j(e){return z.from(e.startsWith("0x")?e.slice(2):e,"hex")}function V(e){return e?j(e):null}var Y=function(e){return e&&27264===e.statusCode?new B("Please enable Blind signing or Contract data in the Ethereum app Settings"):e},W=function(){function e(e,t,r){void 0===t&&(t="w0w"),void 0===r&&(r={}),this.transport=e,this.loadConfig=r,e.decorateAppAPIMethods(this,["getAddress","provideERC20TokenInformation","signTransaction","signPersonalMessage","getAppConfiguration","signEIP712HashedMessage","starkGetPublicKey","starkSignOrder","starkSignOrder_v2","starkSignTransfer","starkSignTransfer_v2","starkProvideQuantum","starkProvideQuantum_v2","starkUnsafeSign","eth2GetPublicKey","eth2SetWithdrawalIndex","setExternalPlugin","setPlugin","getEIP1024PublicEncryptionKey","getEIP1024SharedSecret"],t)}return e.prototype.setLoadConfig=function(e){this.loadConfig=e},e.prototype.getAddress=function(e,t,r){var n=H(e),o=z.alloc(1+4*n.length);return o[0]=n.length,n.forEach((function(e,t){o.writeUInt32BE(e,1+4*t)})),this.transport.send(224,2,t?1:0,r?1:0,o).then((function(e){var t=e[0],n=e[1+t];return{publicKey:e.slice(1,1+t).toString("hex"),address:"0x"+e.slice(1+t+1,1+t+1+n).toString("ascii"),chainCode:r?e.slice(1+t+1+n,1+t+1+n+32).toString("hex"):void 0}}))},e.prototype.signTransaction=function(e,t,r){return M(this,void 0,void 0,(function(){var n,o,i,u,s,c,l,f,h,d,p,g,v,y,E,b,w,S,m,_,I,x,C,k,T,A,R,U,P,N,O,B,L,M,K,j,V,W,X,ee,te,re,ne;return q(this,(function(oe){switch(oe.label){case 0:return void 0!==r?[3,2]:(F.warn("hw-app-eth: signTransaction(path, rawTxHex, resolution): please provide the 'resolution' parameter. See https://github.com/LedgerHQ/ledgerjs/blob/master/packages/hw-app-eth/README.md – the previous signature is deprecated and providing the 3rd 'resolution' parameter explicitly will become mandatory so you have the control on the resolution and the fallback mecanism (e.g. fallback to blind signing or not).// Possible solution:\n + import ledgerService from '@ledgerhq/hw-app-eth/lib/services/ledger';\n + const resolution = await ledgerService.resolveTransaction(rawTxHex);"),[4,D.resolveTransaction(t,this.loadConfig,{externalPlugins:!0,erc20:!0})["catch"]((function(e){return F.warn("an error occurred in resolveTransaction => fallback to blind signing: "+String(e)),null}))]);case 1:r=oe.sent(),oe.label=2;case 2:if(!r)return[3,31];oe.label=3;case 3:oe.trys.push([3,8,9,10]),n=G(r.plugin),o=n.next(),oe.label=4;case 4:return o.done?[3,7]:(i=o.value,[4,$(this.transport,i)]);case 5:oe.sent(),oe.label=6;case 6:return o=n.next(),[3,4];case 7:return[3,10];case 8:return u=oe.sent(),j={error:u},[3,10];case 9:try{o&&!o.done&&(V=n["return"])&&V.call(n)}finally{if(j)throw j.error}return[7];case 10:oe.trys.push([10,15,16,17]),s=G(r.externalPlugin),c=s.next(),oe.label=11;case 11:return c.done?[3,14]:(l=c.value,f=l.payload,h=l.signature,[4,J(this.transport,f,h)]);case 12:oe.sent(),oe.label=13;case 13:return c=s.next(),[3,11];case 14:return[3,17];case 15:return d=oe.sent(),W={error:d},[3,17];case 16:try{c&&!c.done&&(X=s["return"])&&X.call(s)}finally{if(W)throw W.error}return[7];case 17:oe.trys.push([17,22,23,24]),p=G(r.nfts),g=p.next(),oe.label=18;case 18:return g.done?[3,21]:(v=g.value,[4,Z(this.transport,z.from(v,"hex"))]);case 19:oe.sent(),oe.label=20;case 20:return g=p.next(),[3,18];case 21:return[3,24];case 22:return y=oe.sent(),ee={error:y},[3,24];case 23:try{g&&!g.done&&(te=p["return"])&&te.call(p)}finally{if(ee)throw ee.error}return[7];case 24:oe.trys.push([24,29,30,31]),E=G(r.erc20Tokens),b=E.next(),oe.label=25;case 25:return b.done?[3,28]:(w=b.value,[4,Q(this.transport,z.from(w,"hex"))]);case 26:oe.sent(),oe.label=27;case 27:return b=E.next(),[3,25];case 28:return[3,31];case 29:return S=oe.sent(),re={error:S},[3,31];case 30:try{b&&!b.done&&(ne=E["return"])&&ne.call(E)}finally{if(re)throw re.error}return[7];case 31:m=z.from(t,"hex"),_=a(m),I=_.vrsOffset,x=_.txType,C=_.chainId,k=_.chainIdTruncated,T=H(e),R=0,U=function(){var e,t,r,n;return q(this,(function(o){switch(o.label){case 0:return e=0===R,t=e?149-4*T.length:150,r=R+t>m.length?m.length-R:t,0!=I&&R+r>=I&&(r=m.length-R),n=z.alloc(e?1+4*T.length+r:r),e?(n[0]=T.length,T.forEach((function(e,t){n.writeUInt32BE(e,1+4*t)})),m.copy(n,1+4*T.length,R,R+r)):m.copy(n,0,R,R+r),[4,P.transport.send(224,4,e?0:128,0,n)["catch"]((function(e){throw Y(e)}))];case 1:return A=o.sent(),R+=r,[2]}}))},P=this,oe.label=32;case 32:return R===m.length?[3,34]:[5,U()];case 33:return oe.sent(),[3,32];case 34:return N=A[0],O="",C.times(2).plus(35).plus(1).isGreaterThan(255)?(B=(2*k+35)%256,L=Math.abs(N-B),O=null!=x?L%2==1?"00":"01":C.times(2).plus(35).plus(L).toString(16)):O=N.toString(16),O.length%2==1&&(O="0"+O),M=A.slice(1,33).toString("hex"),K=A.slice(33,65).toString("hex"),[2,{v:O,r:M,s:K}]}}))}))},e.prototype.getAppConfiguration=function(){return this.transport.send(224,6,0,0).then((function(e){return{arbitraryDataEnabled:1&e[0],erc20ProvisioningNecessary:2&e[0],starkEnabled:4&e[0],starkv2Supported:8&e[0],version:e[1]+"."+e[2]+"."+e[3]}}))},e.prototype.signPersonalMessage=function(e,t){return M(this,void 0,void 0,(function(){var r,n,o,i,a,u,s,c,l;return q(this,(function(f){switch(f.label){case 0:r=H(e),n=0,o=z.from(t,"hex"),a=function(){var e,t,a;return q(this,(function(s){switch(s.label){case 0:return e=0===n?149-4*r.length-4:150,t=n+e>o.length?o.length-n:e,a=z.alloc(0===n?1+4*r.length+4+t:t),0===n?(a[0]=r.length,r.forEach((function(e,t){a.writeUInt32BE(e,1+4*t)})),a.writeUInt32BE(o.length,1+4*r.length),o.copy(a,1+4*r.length+4,n,n+t)):o.copy(a,0,n,n+t),[4,u.transport.send(224,8,0===n?0:128,0,a)];case 1:return i=s.sent(),n+=t,[2]}}))},u=this,f.label=1;case 1:return n===o.length?[3,3]:[5,a()];case 2:return f.sent(),[3,1];case 3:return s=i[0],c=i.slice(1,33).toString("hex"),l=i.slice(33,65).toString("hex"),[2,{v:s,r:c,s:l}]}}))}))},e.prototype.signEIP712HashedMessage=function(e,t,r){var n=j(t),o=j(r),i=H(e),a=z.alloc(1+4*i.length+32+32,0),u=0;return a[0]=i.length,i.forEach((function(e,t){a.writeUInt32BE(e,1+4*t)})),u=1+4*i.length,n.copy(a,u),u+=32,o.copy(a,u),this.transport.send(224,12,0,0,a).then((function(e){var t=e[0],r=e.slice(1,33).toString("hex"),n=e.slice(33,65).toString("hex");return{v:t,r:r,s:n}}))},e.prototype.starkGetPublicKey=function(e,t){var r=H(e),n=z.alloc(1+4*r.length);return n[0]=r.length,r.forEach((function(e,t){n.writeUInt32BE(e,1+4*t)})),this.transport.send(240,2,t?1:0,0,n).then((function(e){return e.slice(0,e.length-2)}))},e.prototype.starkSignOrder=function(e,t,r,n,o,i,a,u,s,c,l){var f=V(t),h=V(n),d=H(e),p=z.alloc(1+4*d.length+20+32+20+32+4+4+8+8+4+4,0),g=0;return p[0]=d.length,d.forEach((function(e,t){p.writeUInt32BE(e,1+4*t)})),g=1+4*d.length,f&&f.copy(p,g),g+=20,z.from(r.toString(16).padStart(64,"0"),"hex").copy(p,g),g+=32,h&&h.copy(p,g),g+=20,z.from(o.toString(16).padStart(64,"0"),"hex").copy(p,g),g+=32,p.writeUInt32BE(i,g),g+=4,p.writeUInt32BE(a,g),g+=4,z.from(u.toString(16).padStart(16,"0"),"hex").copy(p,g),g+=8,z.from(s.toString(16).padStart(16,"0"),"hex").copy(p,g),g+=8,p.writeUInt32BE(c,g),g+=4,p.writeUInt32BE(l,g),this.transport.send(240,4,1,0,p).then((function(e){var t=e.slice(1,33).toString("hex"),r=e.slice(33,65).toString("hex");return{r:t,s:r}}))},e.prototype.starkSignOrder_v2=function(e,t,r,n,o,i,a,u,s,c,l,f,h,d,p){var g=V(t),v=V(i);if(!(r in K))throw new Error("eth.starkSignOrderv2 invalid source quantization type="+r);if(!(a in K))throw new Error("eth.starkSignOrderv2 invalid destination quantization type="+a);var y=H(e),E=z.alloc(1+4*y.length+1+20+32+32+1+20+32+32+4+4+8+8+4+4,0),b=0;return E[0]=y.length,y.forEach((function(e,t){E.writeUInt32BE(e,1+4*t)})),b=1+4*y.length,E[b]=K[r],b++,g&&g.copy(E,b),b+=20,n&&z.from(n.toString(16).padStart(64,"0"),"hex").copy(E,b),b+=32,o&&z.from(o.toString(16).padStart(64,"0"),"hex").copy(E,b),b+=32,E[b]=K[a],b++,v&&v.copy(E,b),b+=20,u&&z.from(u.toString(16).padStart(64,"0"),"hex").copy(E,b),b+=32,s&&z.from(s.toString(16).padStart(64,"0"),"hex").copy(E,b),b+=32,E.writeUInt32BE(c,b),b+=4,E.writeUInt32BE(l,b),b+=4,z.from(f.toString(16).padStart(16,"0"),"hex").copy(E,b),b+=8,z.from(h.toString(16).padStart(16,"0"),"hex").copy(E,b),b+=8,E.writeUInt32BE(d,b),b+=4,E.writeUInt32BE(p,b),this.transport.send(240,4,3,0,E).then((function(e){var t=e.slice(1,33).toString("hex"),r=e.slice(33,65).toString("hex");return{r:t,s:r}}))},e.prototype.starkSignTransfer=function(e,t,r,n,o,i,a,u,s){var c=V(t),l=j(n),f=H(e),h=z.alloc(1+4*f.length+20+32+32+4+4+8+4+4,0),d=0;return h[0]=f.length,f.forEach((function(e,t){h.writeUInt32BE(e,1+4*t)})),d=1+4*f.length,c&&c.copy(h,d),d+=20,z.from(r.toString(16).padStart(64,"0"),"hex").copy(h,d),d+=32,l.copy(h,d),d+=32,h.writeUInt32BE(o,d),d+=4,h.writeUInt32BE(i,d),d+=4,z.from(a.toString(16).padStart(16,"0"),"hex").copy(h,d),d+=8,h.writeUInt32BE(u,d),d+=4,h.writeUInt32BE(s,d),this.transport.send(240,4,2,0,h).then((function(e){var t=e.slice(1,33).toString("hex"),r=e.slice(33,65).toString("hex");return{r:t,s:r}}))},e.prototype.starkSignTransfer_v2=function(e,t,r,n,o,i,a,u,s,c,l,f,h){var d=V(t),p=j(i),g=V(f);if(!(r in K))throw new Error("eth.starkSignTransferv2 invalid quantization type="+r);var v=H(e),y=z.alloc(1+4*v.length+1+20+32+32+32+4+4+8+4+4+(g?52:0),0),E=0;return y[0]=v.length,v.forEach((function(e,t){y.writeUInt32BE(e,1+4*t)})),E=1+4*v.length,y[E]=K[r],E++,d&&d.copy(y,E),E+=20,n&&z.from(n.toString(16).padStart(64,"0"),"hex").copy(y,E),E+=32,o&&z.from(o.toString(16).padStart(64,"0"),"hex").copy(y,E),E+=32,p.copy(y,E),E+=32,y.writeUInt32BE(a,E),E+=4,y.writeUInt32BE(u,E),E+=4,z.from(s.toString(16).padStart(16,"0"),"hex").copy(y,E),E+=8,y.writeUInt32BE(c,E),E+=4,y.writeUInt32BE(l,E),g&&h&&(E+=4,z.from(h.toString(16).padStart(64,"0"),"hex").copy(y,E),E+=32,g.copy(y,E)),this.transport.send(240,4,g?5:4,0,y).then((function(e){var t=e.slice(1,33).toString("hex"),r=e.slice(33,65).toString("hex");return{r:t,s:r}}))},e.prototype.starkProvideQuantum=function(e,t){var r=V(e),n=z.alloc(52,0);return r&&r.copy(n,0),z.from(t.toString(16).padStart(64,"0"),"hex").copy(n,20),this.transport.send(240,8,0,0,n).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)return!1;throw e}))},e.prototype.starkProvideQuantum_v2=function(e,t,r,n){var o=V(e);if(!(t in K))throw new Error("eth.starkProvideQuantumV2 invalid quantization type="+t);var i=z.alloc(84,0),a=0;return o&&o.copy(i,a),a+=20,r&&z.from(r.toString(16).padStart(64,"0"),"hex").copy(i,a),a+=32,n&&z.from(n.toString(16).padStart(64,"0"),"hex").copy(i,a),this.transport.send(240,8,K[t],0,i).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)return!1;throw e}))},e.prototype.starkUnsafeSign=function(e,t){var r=j(t),n=H(e),o=z.alloc(1+4*n.length+32),i=0;return o[0]=n.length,n.forEach((function(e,t){o.writeUInt32BE(e,1+4*t)})),i=1+4*n.length,r.copy(o,i),this.transport.send(240,10,0,0,o).then((function(e){var t=e.slice(1,33).toString("hex"),r=e.slice(33,65).toString("hex");return{r:t,s:r}}))},e.prototype.eth2GetPublicKey=function(e,t){var r=H(e),n=z.alloc(1+4*r.length);return n[0]=r.length,r.forEach((function(e,t){n.writeUInt32BE(e,1+4*t)})),this.transport.send(224,14,t?1:0,0,n).then((function(e){return{publicKey:e.slice(0,-2).toString("hex")}}))},e.prototype.eth2SetWithdrawalIndex=function(e){var t=z.alloc(4,0);return t.writeUInt32BE(e,0),this.transport.send(224,16,0,0,t).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)return!1;throw e}))},e.prototype.getEIP1024PublicEncryptionKey=function(e,t){var r=H(e),n=z.alloc(1+4*r.length);return n[0]=r.length,r.forEach((function(e,t){n.writeUInt32BE(e,1+4*t)})),this.transport.send(224,24,t?1:0,0,n).then((function(e){return{publicKey:e.slice(0,-2).toString("hex")}}))},e.prototype.getEIP1024SharedSecret=function(e,t,r){var n=H(e),o=j(t),i=z.alloc(1+4*n.length+32),a=0;return i[0]=n.length,n.forEach((function(e,t){i.writeUInt32BE(e,1+4*t)})),a=1+4*n.length,o.copy(i,a),this.transport.send(224,24,r?1:0,1,i).then((function(e){return{sharedSecret:e.slice(0,-2).toString("hex")}}))},e.prototype.provideERC20TokenInformation=function(e){var t=e.data;return F.warn("hw-app-eth: eth.provideERC20TokenInformation is deprecated. signTransaction solves this for you when providing it in `resolution`."),Q(this.transport,t)},e.prototype.setExternalPlugin=function(e,t,r){return F.warn("hw-app-eth: eth.setExternalPlugin is deprecated. signTransaction solves this for you when providing it in `resolution`."),J(this.transport,e,r)},e.prototype.setPlugin=function(e){return F.warn("hw-app-eth: eth.setPlugin is deprecated. signTransaction solves this for you when providing it in `resolution`."),$(this.transport,e)},e}(),X=W;function Q(e,t){return e.send(224,10,0,0,t).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)return!1;throw e}))}function Z(e,t){return e.send(224,20,0,0,t).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)throw new L;throw e}))}function J(e,t,r){var n=z.from(t,"hex"),o=z.from(r,"hex"),i=z.concat([n,o]);return e.send(224,18,0,0,i).then((function(){return!0}),(function(e){if(e&&27264===e.statusCode)return!1;if(e&&27012===e.statusCode)return!1;if(e&&27904===e.statusCode)return!1;throw e}))}function $(e,t){var r=z.from(t,"hex");return e.send(224,22,0,0,r).then((function(){return!0}),(function(e){if(e&&27264===e.statusCode)return!1;if(e&&27012===e.statusCode)return!1;if(e&&27904===e.statusCode)return!1;throw e}))}},95811:function(e,t,r){e.exports=r(26066)(r(79653))},26066:function(e,t,r){const n=r(37016),o=r(5675);e.exports=function(e){const t=n(e),r=o(e);return function(e,n){const o="string"===typeof e?e.toLowerCase():e;switch(o){case"keccak224":return new t(1152,448,null,224,n);case"keccak256":return new t(1088,512,null,256,n);case"keccak384":return new t(832,768,null,384,n);case"keccak512":return new t(576,1024,null,512,n);case"sha3-224":return new t(1152,448,6,224,n);case"sha3-256":return new t(1088,512,6,256,n);case"sha3-384":return new t(832,768,6,384,n);case"sha3-512":return new t(576,1024,6,512,n);case"shake128":return new r(1344,256,31,n);case"shake256":return new r(1088,512,31,n);default:throw new Error("Invald algorithm: "+e)}}}},37016:function(e,t,r){var n=r(48764)["Buffer"];const{Transform:o}=r(88473);e.exports=e=>class t extends o{constructor(t,r,n,o,i){super(i),this._rate=t,this._capacity=r,this._delimitedSuffix=n,this._hashBitLength=o,this._options=i,this._state=new e,this._state.initialize(t,r),this._finalized=!1}_transform(e,t,r){let n=null;try{this.update(e,t)}catch(o){n=o}r(n)}_flush(e){let t=null;try{this.push(this.digest())}catch(r){t=r}e(t)}update(e,t){if(!n.isBuffer(e)&&"string"!==typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return n.isBuffer(e)||(e=n.from(e,t)),this._state.absorb(e),this}digest(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let t=this._state.squeeze(this._hashBitLength/8);return void 0!==e&&(t=t.toString(e)),this._resetState(),t}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},5675:function(e,t,r){var n=r(48764)["Buffer"];const{Transform:o}=r(88473);e.exports=e=>class t extends o{constructor(t,r,n,o){super(o),this._rate=t,this._capacity=r,this._delimitedSuffix=n,this._options=o,this._state=new e,this._state.initialize(t,r),this._finalized=!1}_transform(e,t,r){let n=null;try{this.update(e,t)}catch(o){n=o}r(n)}_flush(){}_read(e){this.push(this.squeeze(e))}update(e,t){if(!n.isBuffer(e)&&"string"!==typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return n.isBuffer(e)||(e=n.from(e,t)),this._state.absorb(e),this}squeeze(e,t){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let r=this._state.squeeze(e);return void 0!==t&&(r=r.toString(t)),r}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},34040:function(e,t){const r=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];t.p1600=function(e){for(let t=0;t<24;++t){const n=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],s=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],l=e[7]^e[17]^e[27]^e[37]^e[47],f=e[8]^e[18]^e[28]^e[38]^e[48],h=e[9]^e[19]^e[29]^e[39]^e[49];let d=f^(i<<1|a>>>31),p=h^(a<<1|i>>>31);const g=e[0]^d,v=e[1]^p,y=e[10]^d,E=e[11]^p,b=e[20]^d,w=e[21]^p,S=e[30]^d,m=e[31]^p,_=e[40]^d,I=e[41]^p;d=n^(u<<1|s>>>31),p=o^(s<<1|u>>>31);const x=e[2]^d,C=e[3]^p,k=e[12]^d,T=e[13]^p,A=e[22]^d,R=e[23]^p,U=e[32]^d,P=e[33]^p,N=e[42]^d,D=e[43]^p;d=i^(c<<1|l>>>31),p=a^(l<<1|c>>>31);const O=e[4]^d,B=e[5]^p,L=e[14]^d,z=e[15]^p,F=e[24]^d,M=e[25]^p,q=e[34]^d,G=e[35]^p,K=e[44]^d,H=e[45]^p;d=u^(f<<1|h>>>31),p=s^(h<<1|f>>>31);const j=e[6]^d,V=e[7]^p,Y=e[16]^d,W=e[17]^p,X=e[26]^d,Q=e[27]^p,Z=e[36]^d,J=e[37]^p,$=e[46]^d,ee=e[47]^p;d=c^(n<<1|o>>>31),p=l^(o<<1|n>>>31);const te=e[8]^d,re=e[9]^p,ne=e[18]^d,oe=e[19]^p,ie=e[28]^d,ae=e[29]^p,ue=e[38]^d,se=e[39]^p,ce=e[48]^d,le=e[49]^p,fe=g,he=v,de=E<<4|y>>>28,pe=y<<4|E>>>28,ge=b<<3|w>>>29,ve=w<<3|b>>>29,ye=m<<9|S>>>23,Ee=S<<9|m>>>23,be=_<<18|I>>>14,we=I<<18|_>>>14,Se=x<<1|C>>>31,me=C<<1|x>>>31,_e=T<<12|k>>>20,Ie=k<<12|T>>>20,xe=A<<10|R>>>22,Ce=R<<10|A>>>22,ke=P<<13|U>>>19,Te=U<<13|P>>>19,Ae=N<<2|D>>>30,Re=D<<2|N>>>30,Ue=B<<30|O>>>2,Pe=O<<30|B>>>2,Ne=L<<6|z>>>26,De=z<<6|L>>>26,Oe=M<<11|F>>>21,Be=F<<11|M>>>21,Le=q<<15|G>>>17,ze=G<<15|q>>>17,Fe=H<<29|K>>>3,Me=K<<29|H>>>3,qe=j<<28|V>>>4,Ge=V<<28|j>>>4,Ke=W<<23|Y>>>9,He=Y<<23|W>>>9,je=X<<25|Q>>>7,Ve=Q<<25|X>>>7,Ye=Z<<21|J>>>11,We=J<<21|Z>>>11,Xe=ee<<24|$>>>8,Qe=$<<24|ee>>>8,Ze=te<<27|re>>>5,Je=re<<27|te>>>5,$e=ne<<20|oe>>>12,et=oe<<20|ne>>>12,tt=ae<<7|ie>>>25,rt=ie<<7|ae>>>25,nt=ue<<8|se>>>24,ot=se<<8|ue>>>24,it=ce<<14|le>>>18,at=le<<14|ce>>>18;e[0]=fe^~_e&Oe,e[1]=he^~Ie&Be,e[10]=qe^~$e&ge,e[11]=Ge^~et&ve,e[20]=Se^~Ne&je,e[21]=me^~De&Ve,e[30]=Ze^~de&xe,e[31]=Je^~pe&Ce,e[40]=Ue^~Ke&tt,e[41]=Pe^~He&rt,e[2]=_e^~Oe&Ye,e[3]=Ie^~Be&We,e[12]=$e^~ge&ke,e[13]=et^~ve&Te,e[22]=Ne^~je&nt,e[23]=De^~Ve&ot,e[32]=de^~xe&Le,e[33]=pe^~Ce&ze,e[42]=Ke^~tt&ye,e[43]=He^~rt&Ee,e[4]=Oe^~Ye&it,e[5]=Be^~We&at,e[14]=ge^~ke&Fe,e[15]=ve^~Te&Me,e[24]=je^~nt&be,e[25]=Ve^~ot&we,e[34]=xe^~Le&Xe,e[35]=Ce^~ze&Qe,e[44]=tt^~ye&Ae,e[45]=rt^~Ee&Re,e[6]=Ye^~it&fe,e[7]=We^~at&he,e[16]=ke^~Fe&qe,e[17]=Te^~Me&Ge,e[26]=nt^~be&Se,e[27]=ot^~we&me,e[36]=Le^~Xe&Ze,e[37]=ze^~Qe&Je,e[46]=ye^~Ae&Ue,e[47]=Ee^~Re&Pe,e[8]=it^~fe&_e,e[9]=at^~he&Ie,e[18]=Fe^~qe&$e,e[19]=Me^~Ge&et,e[28]=be^~Se&Ne,e[29]=we^~me&De,e[38]=Xe^~Ze&de,e[39]=Qe^~Je&pe,e[48]=Ae^~Ue&Ke,e[49]=Re^~Pe&He,e[0]^=r[2*t],e[1]^=r[2*t+1]}}},79653:function(e,t,r){var n=r(48764)["Buffer"];const o=r(34040);function i(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}i.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1},i.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<this.count%4*8,this.count+=1,this.count===this.blockSize&&(o.p1600(this.state),this.count=0)},i.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8,0!==(128&e)&&this.count===this.blockSize-1&&o.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8,o.p1600(this.state),this.count=0,this.squeezing=!0},i.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=n.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>this.count%4*8&255,this.count+=1,this.count===this.blockSize&&(o.p1600(this.state),this.count=0);return t},i.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing},e.exports=i},35793:function(e,t,r){"use strict";var n=r(32904);Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeToString=g,t.processErrorResponse=y,t.getVersion=E,t.ERROR_CODE=t.P1_VALUES=t.PAYLOAD_TYPE=t.INS=t.APP_KEY=t.CHUNK_SIZE=t.CLA=void 0;var o=n(r(67212)),i=n(r(13861)),a=n(r(17964)),u=85;t.CLA=u;var s=250;t.CHUNK_SIZE=s;var c="CSM";t.APP_KEY=c;var l={GET_VERSION:0,INS_PUBLIC_KEY_SECP256K1:1,SIGN_SECP256K1:2,GET_ADDR_SECP256K1:4};t.INS=l;var f={INIT:0,ADD:1,LAST:2};t.PAYLOAD_TYPE=f;var h={ONLY_RETRIEVE:0,SHOW_ADDRESS_IN_DEVICE:1};t.P1_VALUES=h;var d={NoError:36864};t.ERROR_CODE=d;var p={1:"U2F: Unknown",2:"U2F: Bad request",3:"U2F: Configuration unsupported",4:"U2F: Device Ineligible",5:"U2F: Timeout",14:"Timeout",36864:"No errors",36865:"Device is busy",26626:"Error deriving keys",25600:"Execution Error",26368:"Wrong Length",27010:"Empty Buffer",27011:"Output buffer too small",27012:"Data is invalid",27013:"Conditions not satisfied",27014:"Transaction rejected",27264:"Bad key handle",27392:"Invalid P1/P2",27904:"Instruction not supported",28160:"App does not seem to be open",28416:"Unknown error",28417:"Sign/verify error"};function g(e){return e in p?p[e]:"Unknown Status Code: ".concat(e)}function v(e){return"object"===(0,a.default)(e)&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)}function y(e){if(e){if(v(e)){if(Object.prototype.hasOwnProperty.call(e,"statusCode"))return{return_code:e.statusCode,error_message:g(e.statusCode)};if(Object.prototype.hasOwnProperty.call(e,"return_code")&&Object.prototype.hasOwnProperty.call(e,"error_message"))return e}return{return_code:65535,error_message:e.toString()}}return{return_code:65535,error_message:e.toString()}}function E(e){return b.apply(this,arguments)}function b(){return b=(0,i.default)(o.default.mark((function e(t){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.send(u,l.GET_VERSION,0,0).then((function(e){var t=e.slice(-2),r=256*t[0]+t[1],n=0;return e.length>=9&&(n=(e[5]<<24)+(e[6]<<16)+(e[7]<<8)+(e[8]<<0)),{return_code:r,error_message:g(r),test_mode:0!==e[0],major:e[1],minor:e[2],patch:e[3],device_locked:1===e[4],target_id:n.toString(16)}}),y));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}},5496:function(e,t,r){"use strict";var n=r(48764)["Buffer"],o=r(32904);Object.defineProperty(t,"__esModule",{value:!0}),t.serializePathv1=s,t.signSendChunkv1=c,t.publicKeyv1=h;var i=o(r(67212)),a=o(r(13861)),u=r(35793);function s(e){if(null==e||e.length<3)throw new Error("Invalid path.");if(e.length>10)throw new Error("Invalid path. Length should be <= 10");var t=n.alloc(1+4*e.length);t.writeUInt8(e.length,0);for(var r=0;r<e.length;r+=1){var o=e[r];r<3&&(o|=2147483648),t.writeInt32LE(o,1+4*r)}return t}function c(e,t,r,n){return l.apply(this,arguments)}function l(){return l=(0,a.default)(i.default.mark((function e(t,r,n,o){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.transport.send(u.CLA,u.INS.SIGN_SECP256K1,r,n,o,[u.ERROR_CODE.NoError,27012,27264]).then((function(e){var t=e.slice(-2),r=256*t[0]+t[1],n=(0,u.errorCodeToString)(r);27264!==r&&27012!==r||(n="".concat(n," : ").concat(e.slice(0,e.length-2).toString("ascii")));var o=null;return e.length>2&&(o=e.slice(0,e.length-2)),{signature:o,return_code:r,error_message:n}}),u.processErrorResponse));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function f(e){if(65!==e.length)throw new Error("decompressed public key length should be 65 bytes");var t=e.slice(33,65),r=n.from([2+(1&t[t.length-1])]);return n.concat([r,e.slice(1,33)])}function h(e,t){return d.apply(this,arguments)}function d(){return d=(0,a.default)(i.default.mark((function e(t,r){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.transport.send(u.CLA,u.INS.INS_PUBLIC_KEY_SECP256K1,0,0,r,[u.ERROR_CODE.NoError]).then((function(e){var t=e.slice(-2),r=256*t[0]+t[1],o=n.from(e.slice(0,65));return{pk:o,compressed_pk:f(o),return_code:r,error_message:(0,u.errorCodeToString)(r)}}),u.processErrorResponse));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},82449:function(e,t,r){"use strict";var n=r(48764)["Buffer"],o=r(32904);Object.defineProperty(t,"__esModule",{value:!0}),t.serializePathv2=c,t.signSendChunkv2=l,t.publicKeyv2=h;var i=o(r(67212)),a=o(r(13861)),u=r(5496),s=r(35793);function c(e){if(!e||5!==e.length)throw new Error("Invalid path.");var t=n.alloc(20);return t.writeUInt32LE(2147483648+e[0],0),t.writeUInt32LE(2147483648+e[1],4),t.writeUInt32LE(2147483648+e[2],8),t.writeUInt32LE(e[3],12),t.writeUInt32LE(e[4],16),t}function l(e,t,r,n){return f.apply(this,arguments)}function f(){return f=(0,a.default)(i.default.mark((function e(t,r,n,o){var a;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s.PAYLOAD_TYPE.ADD,1===r&&(a=s.PAYLOAD_TYPE.INIT),r===n&&(a=s.PAYLOAD_TYPE.LAST),e.abrupt("return",(0,u.signSendChunkv1)(t,a,0,o));case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function h(e,t){return d.apply(this,arguments)}function d(){return d=(0,a.default)(i.default.mark((function e(t,r){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.transport.send(s.CLA,s.INS.GET_ADDR_SECP256K1,0,0,r,[s.ERROR_CODE.NoError]).then((function(e){var t=e.slice(-2),r=256*t[0]+t[1],o=n.from(e.slice(0,33));return{pk:"OBSOLETE PROPERTY",compressed_pk:o,return_code:r,error_message:(0,s.errorCodeToString)(r)}}),s.processErrorResponse));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},29246:function(e,t,r){"use strict";var n=r(48764)["Buffer"],o=r(32904);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=o(r(67212)),a=o(r(13861)),u=o(r(20172)),s=o(r(20378)),c=o(r(55835)),l=o(r(79785)),f=o(r(92882)),h=r(5496),d=r(82449),p=r(35793),g=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.APP_KEY;if((0,u.default)(this,e),!t)throw new Error("Transport has not been defined");this.transport=t,t.decorateAppAPIMethods(this,["getVersion","sign","getAddressAndPubKey","appInfo","deviceInfo","getBech32FromPK"],r)}return(0,s.default)(e,[{key:"serializePath",value:function(){var e=(0,a.default)(i.default.mark((function e(t){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getVersion)(this.transport);case 2:if(this.versionResponse=e.sent,this.versionResponse.return_code===p.ERROR_CODE.NoError){e.next=5;break}throw this.versionResponse;case 5:e.t0=this.versionResponse.major,e.next=1===e.t0?8:2===e.t0?9:10;break;case 8:return e.abrupt("return",(0,h.serializePathv1)(t));case 9:return e.abrupt("return",(0,d.serializePathv2)(t));case 10:return e.abrupt("return",{return_code:25600,error_message:"App Version is not supported"});case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signGetChunks",value:function(){var e=(0,a.default)(i.default.mark((function e(t,r){var o,a,u,s,c;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.serializePath(t);case 2:for(o=e.sent,a=[],a.push(o),u=n.from(r),s=0;s<u.length;s+=p.CHUNK_SIZE)c=s+p.CHUNK_SIZE,s>u.length&&(c=u.length),a.push(u.slice(s,c));return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getVersion",value:function(){var e=(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.getVersion)(this.transport);case 3:return this.versionResponse=e.sent,e.abrupt("return",this.versionResponse);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",(0,p.processErrorResponse)(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"appInfo",value:function(){var e=(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.transport.send(176,1,0,0).then((function(e){var t=e.slice(-2),r=256*t[0]+t[1],n={},o="err",i="err",a=0,u=0;if(1!==e[0])n.error_message="response format ID not recognized",n.return_code=36865;else{var s=e[1];o=e.slice(2,2+s).toString("ascii");var c=2+s,l=e[c];c+=1,i=e.slice(c,c+l).toString("ascii"),c+=l;var f=e[c];c+=1,a=f,u=e[c]}return{return_code:r,error_message:(0,p.errorCodeToString)(r),appName:o,appVersion:i,flagLen:a,flagsValue:u,flag_recovery:0!==(1&u),flag_signed_mcu_code:0!==(2&u),flag_onboarded:0!==(4&u),flag_pin_validated:0!==(128&u)}}),p.processErrorResponse));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"deviceInfo",value:function(){var e=(0,a.default)(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.transport.send(224,1,0,0,n.from([]),[p.ERROR_CODE.NoError,28160]).then((function(e){var t=e.slice(-2),r=256*t[0]+t[1];if(28160===r)return{return_code:r,error_message:"This command is only available in the Dashboard"};var n=e.slice(0,4).toString("hex"),o=4,i=e[o];o+=1;var a=e.slice(o,o+i).toString();o+=i;var u=e[o];o+=1;var s=e.slice(o,o+u).toString("hex");o+=u;var c=e[o];o+=1;var l=e.slice(o,o+c);0===l[c-1]&&(l=e.slice(o,o+c-1));var f=l.toString();return{return_code:r,error_message:(0,p.errorCodeToString)(r),targetId:n,seVersion:a,flag:s,mcuVersion:f}}),p.processErrorResponse));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"publicKey",value:function(){var t=(0,a.default)(i.default.mark((function t(r){var o,a;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.serializePath(r);case 3:o=t.sent,t.t0=this.versionResponse.major,t.next=1===t.t0?7:2===t.t0?8:10;break;case 7:return t.abrupt("return",(0,h.publicKeyv1)(this,o));case 8:return a=n.concat([e.serializeHRP("cosmos"),o]),t.abrupt("return",(0,d.publicKeyv2)(this,a));case 10:return t.abrupt("return",{return_code:25600,error_message:"App Version is not supported"});case 11:t.next=16;break;case 13:return t.prev=13,t.t1=t["catch"](0),t.abrupt("return",(0,p.processErrorResponse)(t.t1));case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function r(e){return t.apply(this,arguments)}return r}()},{key:"getAddressAndPubKey",value:function(){var t=(0,a.default)(i.default.mark((function t(r,o){var a=this;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",this.serializePath(r).then((function(t){var r=n.concat([e.serializeHRP(o),t]);return a.transport.send(p.CLA,p.INS.GET_ADDR_SECP256K1,p.P1_VALUES.ONLY_RETRIEVE,0,r,[p.ERROR_CODE.NoError]).then((function(e){var t=e.slice(-2),r=256*t[0]+t[1],o=n.from(e.slice(0,33)),i=n.from(e.slice(33,-2)).toString();return{bech32_address:i,compressed_pk:o,return_code:r,error_message:(0,p.errorCodeToString)(r)}}),p.processErrorResponse)})).catch((function(e){return(0,p.processErrorResponse)(e)})));case 4:return t.prev=4,t.t0=t["catch"](0),t.abrupt("return",(0,p.processErrorResponse)(t.t0));case 7:case"end":return t.stop()}}),t,this,[[0,4]])})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"showAddressAndPubKey",value:function(){var t=(0,a.default)(i.default.mark((function t(r,o){var a=this;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",this.serializePath(r).then((function(t){var r=n.concat([e.serializeHRP(o),t]);return a.transport.send(p.CLA,p.INS.GET_ADDR_SECP256K1,p.P1_VALUES.SHOW_ADDRESS_IN_DEVICE,0,r,[p.ERROR_CODE.NoError]).then((function(e){var t=e.slice(-2),r=256*t[0]+t[1],o=n.from(e.slice(0,33)),i=n.from(e.slice(33,-2)).toString();return{bech32_address:i,compressed_pk:o,return_code:r,error_message:(0,p.errorCodeToString)(r)}}),p.processErrorResponse)})).catch((function(e){return(0,p.processErrorResponse)(e)})));case 4:return t.prev=4,t.t0=t["catch"](0),t.abrupt("return",(0,p.processErrorResponse)(t.t0));case 7:case"end":return t.stop()}}),t,this,[[0,4]])})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"signSendChunk",value:function(){var e=(0,a.default)(i.default.mark((function e(t,r,n){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=this.versionResponse.major,e.next=1===e.t0?3:2===e.t0?4:5;break;case 3:return e.abrupt("return",(0,h.signSendChunkv1)(this,t,r,n));case 4:return e.abrupt("return",(0,d.signSendChunkv2)(this,t,r,n));case 5:return e.abrupt("return",{return_code:25600,error_message:"App Version is not supported"});case 6:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"sign",value:function(){var e=(0,a.default)(i.default.mark((function e(t,r){var n=this;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.signGetChunks(t,r).then((function(e){return n.signSendChunk(1,e.length,e[0],[p.ERROR_CODE.NoError]).then(function(){var t=(0,a.default)(i.default.mark((function t(r){var o,a;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o={return_code:r.return_code,error_message:r.error_message,signature:null},a=1;case 2:if(!(a<e.length)){t.next=11;break}return t.next=5,n.signSendChunk(1+a,e.length,e[a]);case 5:if(o=t.sent,o.return_code===p.ERROR_CODE.NoError){t.next=8;break}return t.abrupt("break",11);case 8:a+=1,t.next=2;break;case 11:return t.abrupt("return",{return_code:o.return_code,error_message:o.error_message,signature:o.signature});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p.processErrorResponse)}),p.processErrorResponse));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()}],[{key:"serializeHRP",value:function(e){if(null==e||e.length<3||e.length>83)throw new Error("Invalid HRP");var t=n.alloc(1+e.length);return t.writeUInt8(e.length,0),t.write(e,1),t}},{key:"getBech32FromPK",value:function(e,t){if(33!==t.length)throw new Error("expected compressed public key [31 bytes]");var r=c.default.createHash("sha256").update(t).digest(),n=(new l.default).update(r).digest();return f.default.encode(e,f.default.toWords(n))}}]),e}();t["default"]=g}}]);