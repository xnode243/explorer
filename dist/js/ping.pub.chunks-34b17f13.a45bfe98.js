(self["webpackChunkping_wallet"]=self["webpackChunkping_wallet"]||[]).push([[974],{75820:function(e,t,r){"use strict";r.d(t,{Z:function(){return F}});var n=r(17187),a=r.n(n),s=r(50580),o=r(48764)["Buffer"],c=r(25108),_=function(e,t,r,n){function a(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{_(n.next(e))}catch(t){s(t)}}function c(e){try{_(n["throw"](e))}catch(t){s(t)}}function _(e){e.done?r(e.value):a(e.value).then(o,c)}_((n=n.apply(e,t||[])).next())}))},i=function(e,t){var r,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(e){return function(t){return _([e,t])}}function _(s){if(r)throw new TypeError("Generator is already executing.");while(o)try{if(r=1,n&&(a=2&s[0]?n["return"]:s[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!(a=a.length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(c){s=[6,c],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},h=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),o=[];try{while((void 0===t||t-- >0)&&!(n=s.next()).done)o.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(r=s["return"])&&r.call(s)}finally{if(a)throw a.error}}return o},p=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},u=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=function(){function e(){var e=this;this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new(a()),this.send=function(t,r,n,a,c,h){return void 0===c&&(c=o.alloc(0)),void 0===h&&(h=[s.StatusCodes.OK]),_(e,void 0,void 0,(function(){var e,_;return i(this,(function(i){switch(i.label){case 0:if(c.length>=256)throw new s.TransportError("data.length exceed 256 bytes limit. Got: "+c.length,"DataLengthTooBig");return[4,this.exchange(o.concat([o.from([t,r,n,a]),o.from([c.length]),c]))];case 1:if(e=i.sent(),_=e.readUInt16BE(e.length-2),!h.some((function(e){return e===_})))throw new s.TransportStatusError(_);return[2,e]}}))}))},this.exchangeAtomicImpl=function(t){return _(e,void 0,void 0,(function(){var e,r,n,a,o,c=this;return i(this,(function(_){switch(_.label){case 0:if(this.exchangeBusyPromise)throw new s.TransportRaceCondition("An action was already pending on the Ledger device. Please deny or reconnect.");r=new Promise((function(t){e=t})),this.exchangeBusyPromise=r,n=!1,a=setTimeout((function(){n=!0,c.emit("unresponsive")}),this.unresponsiveTimeout),_.label=1;case 1:return _.trys.push([1,,3,4]),[4,t()];case 2:return o=_.sent(),n&&this.emit("responsive"),[2,o];case 3:return clearTimeout(a),e&&e(),this.exchangeBusyPromise=null,[7];case 4:return[2]}}))}))},this._appAPIlock=null}return e.prototype.exchange=function(e){throw new Error("exchange not implemented")},e.prototype.setScrambleKey=function(e){},e.prototype.close=function(){return Promise.resolve()},e.prototype.on=function(e,t){this._events.on(e,t)},e.prototype.off=function(e,t){this._events.removeListener(e,t)},e.prototype.emit=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];(t=this._events).emit.apply(t,p([e],h(r),!1))},e.prototype.setDebugMode=function(){c.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")},e.prototype.setExchangeTimeout=function(e){this.exchangeTimeout=e},e.prototype.setExchangeUnresponsiveTimeout=function(e){this.unresponsiveTimeout=e},e.create=function(e,t){var r=this;return void 0===e&&(e=3e3),new Promise((function(n,a){var o=!1,c=r.listen({next:function(t){o=!0,c&&c.unsubscribe(),_&&clearTimeout(_),r.open(t.descriptor,e).then(n,a)},error:function(e){_&&clearTimeout(_),a(e)},complete:function(){_&&clearTimeout(_),o||a(new s.TransportError(r.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),_=t?setTimeout((function(){c.unsubscribe(),a(new s.TransportError(r.ErrorMessage_ListenTimeout,"ListenTimeout"))}),t):null}))},e.prototype.decorateAppAPIMethods=function(e,t,r){var n,a;try{for(var s=u(t),o=s.next();!o.done;o=s.next()){var c=o.value;e[c]=this.decorateAppAPIMethod(c,e[c],e,r)}}catch(_){n={error:_}}finally{try{o&&!o.done&&(a=s["return"])&&a.call(s)}finally{if(n)throw n.error}}},e.prototype.decorateAppAPIMethod=function(e,t,r,n){var a=this;return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return _(a,void 0,void 0,(function(){var a;return i(this,(function(c){switch(c.label){case 0:if(a=this._appAPIlock,a)return[2,Promise.reject(new s.TransportError("Ledger Device is busy (lock "+a+")","TransportLocked"))];c.label=1;case 1:return c.trys.push([1,,3,4]),this._appAPIlock=e,this.setScrambleKey(n),[4,t.apply(r,o)];case 2:return[2,c.sent()];case 3:return this._appAPIlock=null,[7];case 4:return[2]}}))}))}},e.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",e.ErrorMessage_NoDeviceFound="No Ledger device found",e}(),y=l,d=r(14347),v=r(37741),g=r(53732),f=r(28716),b=r(61244),m=r(14370),E=r(51410),w=r(55760),x=r(13068),S=r(14e3),k=r(35366),T=r(55709),Y=r(26738),B=r(48764)["Buffer"],A=function(e){return b.y.create((function(t){function r(e){var r=e.target;r.value&&t.next(B.from(r.value.buffer))}return(0,f.log)("ble-verbose","start monitor "+e.uuid),e.startNotifications().then((function(){e.addEventListener("characteristicvaluechanged",r)})),function(){(0,f.log)("ble-verbose","end monitor "+e.uuid),e.stopNotifications()}}))},M=r(25108),I=r(48764)["Buffer"],K=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),N=function(e,t,r,n){function a(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{_(n.next(e))}catch(t){s(t)}}function c(e){try{_(n["throw"](e))}catch(t){s(t)}}function _(e){e.done?r(e.value):a(e.value).then(o,c)}_((n=n.apply(e,t||[])).next())}))},L=function(e,t){var r,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(e){return function(t){return _([e,t])}}function _(s){if(r)throw new TypeError("Generator is already executing.");while(o)try{if(r=1,n&&(a=2&s[0]?n["return"]:s[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!(a=a.length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(c){s=[6,c],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},P=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),o=[];try{while((void 0===t||t-- >0)&&!(n=s.next()).done)o.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(r=s["return"])&&r.call(s)}finally{if(a)throw a.error}}return o},O=function(){var e=navigator.bluetooth;if("undefined"===typeof e)throw new Error("web bluetooth not supported");return e},U=function(){return b.y.create((function(e){var t=O(),r=function(t){e.next(t.value)};t.addEventListener("availabilitychanged",r);var n=!1;return t.getAvailability().then((function(t){n||e.next(t)})),function(){n=!0,t.removeEventListener("availabilitychanged",r)}}))},C={},D=function(){return{filters:(0,d.RH)().map((function(e){return{services:[e]}}))}},R=function(e){return N(void 0,void 0,void 0,(function(){var t,r,n;return L(this,(function(a){switch(a.label){case 0:if(!e.gatt)throw new Error("bluetooth gatt not found");return[4,e.gatt.getPrimaryServices()];case 1:if(t=P.apply(void 0,[a.sent(),1]),r=t[0],!r)throw new Error("bluetooth service not found");if(n=(0,d.R7)(r.uuid),!n)throw new Error("bluetooth service infos not found");return[2,[r,n]]}}))}))};function G(e,t){return N(this,void 0,void 0,(function(){var r,n,a,o,c,_,i,h,p,u,l,y,d,v,g,b,m;return L(this,(function(E){switch(E.label){case 0:return"string"!==typeof e?[3,2]:C[e]?((0,f.log)("ble-verbose","Transport in cache, using that."),[2,C[e]]):(n=O(),[4,n.requestDevice(D())]);case 1:return r=E.sent(),[3,3];case 2:r=e,E.label=3;case 3:return r.gatt.connected?[3,5]:((0,f.log)("ble-verbose","not connected. connecting..."),[4,r.gatt.connect()]);case 4:E.sent(),E.label=5;case 5:return[4,R(r)];case 6:return a=P.apply(void 0,[E.sent(),2]),o=a[0],c=a[1],_=c.deviceModel,i=c.writeUuid,h=c.notifyUuid,[4,Promise.all([o.getCharacteristic(i),o.getCharacteristic(h)])];case 7:if(p=P.apply(void 0,[E.sent(),2]),u=p[0],l=p[1],y=A(l).pipe((0,x.b)((function(e){(0,f.log)("ble-frame","<= "+e.toString("hex"))})),(0,S.B)()),d=y.subscribe(),v=new X(r,u,y,_),!r.gatt.connected)throw new s.DisconnectedDevice;C[v.id]=v,g=function(e){M.log("onDisconnect!",e),delete C[v.id],v.notYetDisconnected=!1,d.unsubscribe(),r.removeEventListener("gattserverdisconnected",g),(0,f.log)("ble-verbose","BleTransport(".concat(v.id,") disconnected")),v.emit("disconnect",e)},r.addEventListener("gattserverdisconnected",g),b=Date.now(),E.label=8;case 8:return E.trys.push([8,,10,14]),[4,v.inferMTU()];case 9:return E.sent(),[3,14];case 10:return m=Date.now(),m-b<1e3&&(t=!1),t?[4,r.gatt.disconnect()]:[3,13];case 11:return E.sent(),[4,new Promise((function(e){return setTimeout(e,4e3)}))];case 12:E.sent(),E.label=13;case 13:return[7];case 14:return t?[2,G(r,!1)]:[2,v]}}))}))}var X=function(e){function t(t,r,n,a){var s=e.call(this)||this;return s.mtuSize=20,s.notYetDisconnected=!0,s.write=function(e){return N(s,void 0,void 0,(function(){return L(this,(function(t){switch(t.label){case 0:return(0,f.log)("ble-frame","=> "+e.toString("hex")),[4,this.writeCharacteristic.writeValue(e)];case 1:return t.sent(),[2]}}))}))},s.id=t.id,s.device=t,s.writeCharacteristic=r,s.notifyObservable=n,s.deviceModel=a,(0,f.log)("ble-verbose","BleTransport(".concat(String(s.id),") new instance")),s}var r;return K(t,e),t.listen=function(e){var t;(0,f.log)("ble-verbose","listen...");var r=O();function n(){t=!0}return r.requestDevice(D()).then((function(r){t||(e.next({type:"add",descriptor:r}),e.complete())}),(function(t){e.error(new s.TransportOpenUserCancelled(t.message))})),{unsubscribe:n}},t.open=function(e){return N(this,void 0,void 0,(function(){return L(this,(function(t){return[2,G(e,!0)]}))}))},t.prototype.inferMTU=function(){return N(this,void 0,void 0,(function(){var e,t,r=this;return L(this,(function(n){switch(n.label){case 0:return e=23,[4,this.exchangeAtomicImpl((function(){return N(r,void 0,void 0,(function(){var t,r=this;return L(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,m.T)(this.notifyObservable.pipe((0,k.P)((function(e){return 8===e.readUInt8(0)})),(0,T.U)((function(e){return e.readUInt8(5)}))),(0,E.P)((function(){return(0,w.D)(r.write(I.from([8,0,0,0,0])))})).pipe((0,Y.l)())).toPromise()];case 1:return e=n.sent()+3,[3,3];case 2:throw t=n.sent(),(0,f.log)("ble-error","inferMTU got "+String(t)),this.device.gatt.disconnect(),t;case 3:return[2]}}))}))}))];case 1:return n.sent(),e>23&&(t=e-3,(0,f.log)("ble-verbose","BleTransport(".concat(String(this.id),") mtu set to ").concat(String(t))),this.mtuSize=t),[2,this.mtuSize]}}))}))},t.prototype.exchange=function(e){return N(this,void 0,void 0,(function(){var t,r=this;return L(this,(function(n){switch(n.label){case 0:return[4,this.exchangeAtomicImpl((function(){return N(r,void 0,void 0,(function(){var t,r,n,a;return L(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),t=e.toString("hex"),(0,f.log)("apdu","=> ".concat(t)),[4,(0,m.T)(this.notifyObservable.pipe(g.n),(0,v.sendAPDU)(this.write,e,this.mtuSize)).toPromise()];case 1:return r=s.sent(),n=r.toString("hex"),(0,f.log)("apdu","<= ".concat(n)),[2,r];case 2:throw a=s.sent(),(0,f.log)("ble-error","exchange got "+String(a)),this.notYetDisconnected&&this.device.gatt.disconnect(),a;case 3:return[2]}}))}))}))];case 1:return t=n.sent(),[2,t]}}))}))},t.prototype.setScrambleKey=function(){},t.prototype.close=function(){return N(this,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return this.exchangeBusyPromise?[4,this.exchangeBusyPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},r=t,t.isSupported=function(){return Promise.resolve().then(O).then((function(){return!0}),(function(){return!1}))},t.observeAvailability=function(e){return U().subscribe(e)},t.list=function(){return Promise.resolve([])},t.disconnect=function(e){return N(void 0,void 0,void 0,(function(){var t;return L(r,(function(r){return(0,f.log)("ble-verbose","user disconnect(".concat(e,")")),t=C[e],t&&t.device.gatt.disconnect(),[2]}))}))},t}(y),F=X},22377:function(e,t,r){"use strict";r.d(t,{Z:function(){return N}});var n=r(17187),a=r.n(n),s=r(50580),o=r(48764)["Buffer"],c=r(25108),_=function(e,t,r,n){function a(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{_(n.next(e))}catch(t){s(t)}}function c(e){try{_(n["throw"](e))}catch(t){s(t)}}function _(e){e.done?r(e.value):a(e.value).then(o,c)}_((n=n.apply(e,t||[])).next())}))},i=function(e,t){var r,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(e){return function(t){return _([e,t])}}function _(s){if(r)throw new TypeError("Generator is already executing.");while(o)try{if(r=1,n&&(a=2&s[0]?n["return"]:s[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!(a=a.length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(c){s=[6,c],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},h=function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),o=[];try{while((void 0===t||t-- >0)&&!(n=s.next()).done)o.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(r=s["return"])&&r.call(s)}finally{if(a)throw a.error}}return o},p=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},u=function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=function(){function e(){var e=this;this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new(a()),this.send=function(t,r,n,a,c,h){return void 0===c&&(c=o.alloc(0)),void 0===h&&(h=[s.StatusCodes.OK]),_(e,void 0,void 0,(function(){var e,_;return i(this,(function(i){switch(i.label){case 0:if(c.length>=256)throw new s.TransportError("data.length exceed 256 bytes limit. Got: "+c.length,"DataLengthTooBig");return[4,this.exchange(o.concat([o.from([t,r,n,a]),o.from([c.length]),c]))];case 1:if(e=i.sent(),_=e.readUInt16BE(e.length-2),!h.some((function(e){return e===_})))throw new s.TransportStatusError(_);return[2,e]}}))}))},this.exchangeAtomicImpl=function(t){return _(e,void 0,void 0,(function(){var e,r,n,a,o,c=this;return i(this,(function(_){switch(_.label){case 0:if(this.exchangeBusyPromise)throw new s.TransportRaceCondition("An action was already pending on the Ledger device. Please deny or reconnect.");r=new Promise((function(t){e=t})),this.exchangeBusyPromise=r,n=!1,a=setTimeout((function(){n=!0,c.emit("unresponsive")}),this.unresponsiveTimeout),_.label=1;case 1:return _.trys.push([1,,3,4]),[4,t()];case 2:return o=_.sent(),n&&this.emit("responsive"),[2,o];case 3:return clearTimeout(a),e&&e(),this.exchangeBusyPromise=null,[7];case 4:return[2]}}))}))},this._appAPIlock=null}return e.prototype.exchange=function(e){throw new Error("exchange not implemented")},e.prototype.setScrambleKey=function(e){},e.prototype.close=function(){return Promise.resolve()},e.prototype.on=function(e,t){this._events.on(e,t)},e.prototype.off=function(e,t){this._events.removeListener(e,t)},e.prototype.emit=function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];(t=this._events).emit.apply(t,p([e],h(r),!1))},e.prototype.setDebugMode=function(){c.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")},e.prototype.setExchangeTimeout=function(e){this.exchangeTimeout=e},e.prototype.setExchangeUnresponsiveTimeout=function(e){this.unresponsiveTimeout=e},e.create=function(e,t){var r=this;return void 0===e&&(e=3e3),new Promise((function(n,a){var o=!1,c=r.listen({next:function(t){o=!0,c&&c.unsubscribe(),_&&clearTimeout(_),r.open(t.descriptor,e).then(n,a)},error:function(e){_&&clearTimeout(_),a(e)},complete:function(){_&&clearTimeout(_),o||a(new s.TransportError(r.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),_=t?setTimeout((function(){c.unsubscribe(),a(new s.TransportError(r.ErrorMessage_ListenTimeout,"ListenTimeout"))}),t):null}))},e.prototype.decorateAppAPIMethods=function(e,t,r){var n,a;try{for(var s=u(t),o=s.next();!o.done;o=s.next()){var c=o.value;e[c]=this.decorateAppAPIMethod(c,e[c],e,r)}}catch(_){n={error:_}}finally{try{o&&!o.done&&(a=s["return"])&&a.call(s)}finally{if(n)throw n.error}}},e.prototype.decorateAppAPIMethod=function(e,t,r,n){var a=this;return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return _(a,void 0,void 0,(function(){var a;return i(this,(function(c){switch(c.label){case 0:if(a=this._appAPIlock,a)return[2,Promise.reject(new s.TransportError("Ledger Device is busy (lock "+a+")","TransportLocked"))];c.label=1;case 1:return c.trys.push([1,,3,4]),this._appAPIlock=e,this.setScrambleKey(n),[4,t.apply(r,o)];case 2:return[2,c.sent()];case 3:return this._appAPIlock=null,[7];case 4:return[2]}}))}))}},e.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",e.ErrorMessage_NoDeviceFound="No Ledger device found",e}(),y=l,d=r(57204),v=r(14347),g=r(28716),f=function(e,t,r,n){function a(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{_(n.next(e))}catch(t){s(t)}}function c(e){try{_(n["throw"](e))}catch(t){s(t)}}function _(e){e.done?r(e.value):a(e.value).then(o,c)}_((n=n.apply(e,t||[])).next())}))},b=function(e,t){var r,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(e){return function(t){return _([e,t])}}function _(s){if(r)throw new TypeError("Generator is already executing.");while(o)try{if(r=1,n&&(a=2&s[0]?n["return"]:s[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!(a=a.length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(c){s=[6,c],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},m=[{vendorId:v.An}];function E(){return f(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return[4,navigator.usb.requestDevice({filters:m})];case 1:return e=t.sent(),[2,e]}}))}))}function w(){return f(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return[4,navigator.usb.getDevices()];case 1:return e=t.sent(),[2,e.filter((function(e){return e.vendorId===v.An}))]}}))}))}function x(){return f(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:return[4,w()];case 1:return e=t.sent(),e.length>0?[2,e[0]]:[2,E()]}}))}))}var S=function(){return Promise.resolve(!!navigator&&!!navigator.usb&&"function"===typeof navigator.usb.getDevices)},k=r(48764)["Buffer"],T=r(25108),Y=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),B=function(e,t,r,n){function a(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{_(n.next(e))}catch(t){s(t)}}function c(e){try{_(n["throw"](e))}catch(t){s(t)}}function _(e){e.done?r(e.value):a(e.value).then(o,c)}_((n=n.apply(e,t||[])).next())}))},A=function(e,t){var r,n,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(e){return function(t){return _([e,t])}}function _(s){if(r)throw new TypeError("Generator is already executing.");while(o)try{if(r=1,n&&(a=2&s[0]?n["return"]:s[0]?n["throw"]||((a=n["return"])&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(a=o.trys,!(a=a.length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(c){s=[6,c],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},M=1,I=3,K=function(e){function t(t,r){var n=e.call(this)||this;return n.channel=Math.floor(65535*Math.random()),n.packetSize=64,n._disconnectEmitted=!1,n._emitDisconnect=function(e){n._disconnectEmitted||(n._disconnectEmitted=!0,n.emit("disconnect",e))},n.device=t,n.interfaceNumber=r,n.deviceModel=(0,v.Ht)(t.productId),n}return Y(t,e),t.request=function(){return B(this,void 0,void 0,(function(){var e;return A(this,(function(r){switch(r.label){case 0:return[4,E()];case 1:return e=r.sent(),[2,t.open(e)]}}))}))},t.openConnected=function(){return B(this,void 0,void 0,(function(){var e;return A(this,(function(r){switch(r.label){case 0:return[4,w()];case 1:return e=r.sent(),0===e.length?[2,null]:[2,t.open(e[0])]}}))}))},t.open=function(e){return B(this,void 0,void 0,(function(){var r,n,a,o,c;return A(this,(function(_){switch(_.label){case 0:return[4,e.open()];case 1:return _.sent(),null!==e.configuration?[3,3]:[4,e.selectConfiguration(M)];case 2:_.sent(),_.label=3;case 3:return[4,L(e)];case 4:if(_.sent(),r=e.configurations[0].interfaces.find((function(e){var t=e.alternates;return t.some((function(e){return 255===e.interfaceClass}))})),!r)throw new s.TransportInterfaceNotAvailable("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");n=r.interfaceNumber,_.label=5;case 5:return _.trys.push([5,7,,9]),[4,e.claimInterface(n)];case 6:return _.sent(),[3,9];case 7:return a=_.sent(),[4,e.close()];case 8:throw _.sent(),new s.TransportInterfaceNotAvailable(a.message);case 9:return o=new t(e,n),c=function(t){e===t.device&&(navigator.usb.removeEventListener("disconnect",c),o._emitDisconnect(new s.DisconnectedDevice))},navigator.usb.addEventListener("disconnect",c),[2,o]}}))}))},t.prototype.close=function(){return B(this,void 0,void 0,(function(){return A(this,(function(e){switch(e.label){case 0:return[4,this.exchangeBusyPromise];case 1:return e.sent(),[4,this.device.releaseInterface(this.interfaceNumber)];case 2:return e.sent(),[4,L(this.device)];case 3:return e.sent(),[4,this.device.close()];case 4:return e.sent(),[2]}}))}))},t.prototype.exchange=function(e){return B(this,void 0,void 0,(function(){var t,r=this;return A(this,(function(n){switch(n.label){case 0:return[4,this.exchangeAtomicImpl((function(){return B(r,void 0,void 0,(function(){var t,r,n,a,s,o,c,_,i,h;return A(this,(function(p){switch(p.label){case 0:t=this,r=t.channel,n=t.packetSize,(0,g.log)("apdu","=> "+e.toString("hex")),a=(0,d.Z)(r,n),s=a.makeBlocks(e),o=0,p.label=1;case 1:return o<s.length?[4,this.device.transferOut(I,s[o])]:[3,4];case 2:p.sent(),p.label=3;case 3:return o++,[3,1];case 4:return(c=a.getReducedResult(_))?[3,6]:[4,this.device.transferIn(I,n)];case 5:return i=p.sent(),h=k.from(i.data.buffer),_=a.reduceResponse(_,h),[3,4];case 6:return(0,g.log)("apdu","<= "+c.toString("hex")),[2,c]}}))}))}))["catch"]((function(e){if(e&&e.message&&e.message.includes("disconnected"))throw r._emitDisconnect(e),new s.DisconnectedDeviceDuringOperation(e.message);throw e}))];case 1:return t=n.sent(),[2,t]}}))}))},t.prototype.setScrambleKey=function(){},t.isSupported=S,t.list=w,t.listen=function(e){var t=!1;function r(){t=!0}return x().then((function(r){if(!t){var n=(0,v.Ht)(r.productId);e.next({type:"add",descriptor:r,deviceModel:n}),e.complete()}}),(function(t){window.DOMException&&t instanceof window.DOMException&&18===t.code?e.error(new s.TransportWebUSBGestureRequired(t.message)):e.error(new s.TransportOpenUserCancelled(t.message))})),{unsubscribe:r}},t}(y),N=K;function L(e){return B(this,void 0,void 0,(function(){var t;return A(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.reset()];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),T.warn(t),[3,3];case 3:return[2]}}))}))}},28716:function(e,t,r){"use strict";r.r(t),r.d(t,{listen:function(){return c},log:function(){return o}});var n=r(25108),a=0,s=[],o=function(e,t,r){var n={type:e,id:String(++a),date:new Date};t&&(n.message=t),r&&(n.data=r),_(n)},c=function(e){return s.push(e),function(){var t=s.indexOf(e);-1!==t&&(s[t]=s[s.length-1],s.pop())}};function _(e){for(var t=0;t<s.length;t++)try{s[t](e)}catch(r){n.error(r)}}"undefined"!==typeof window&&(window.__ledgerLogsListen=c)},6869:function(e,t,r){var n,a,s;!function(o){function c(e,t){"use strict";var r,n=t.ready.then((function(){function n(){if(0!==r._sodium_init())throw new Error("libsodium was not correctly initialized.");for(var t=["crypto_aead_chacha20poly1305_decrypt","crypto_aead_chacha20poly1305_decrypt_detached","crypto_aead_chacha20poly1305_encrypt","crypto_aead_chacha20poly1305_encrypt_detached","crypto_aead_chacha20poly1305_ietf_decrypt","crypto_aead_chacha20poly1305_ietf_decrypt_detached","crypto_aead_chacha20poly1305_ietf_encrypt","crypto_aead_chacha20poly1305_ietf_encrypt_detached","crypto_aead_chacha20poly1305_ietf_keygen","crypto_aead_chacha20poly1305_keygen","crypto_aead_xchacha20poly1305_ietf_decrypt","crypto_aead_xchacha20poly1305_ietf_decrypt_detached","crypto_aead_xchacha20poly1305_ietf_encrypt","crypto_aead_xchacha20poly1305_ietf_encrypt_detached","crypto_aead_xchacha20poly1305_ietf_keygen","crypto_auth","crypto_auth_hmacsha256","crypto_auth_hmacsha256_final","crypto_auth_hmacsha256_init","crypto_auth_hmacsha256_keygen","crypto_auth_hmacsha256_update","crypto_auth_hmacsha256_verify","crypto_auth_hmacsha512","crypto_auth_hmacsha512_final","crypto_auth_hmacsha512_init","crypto_auth_hmacsha512_keygen","crypto_auth_hmacsha512_update","crypto_auth_hmacsha512_verify","crypto_auth_keygen","crypto_auth_verify","crypto_box_beforenm","crypto_box_curve25519xchacha20poly1305_keypair","crypto_box_curve25519xchacha20poly1305_seal","crypto_box_curve25519xchacha20poly1305_seal_open","crypto_box_detached","crypto_box_easy","crypto_box_easy_afternm","crypto_box_keypair","crypto_box_open_detached","crypto_box_open_easy","crypto_box_open_easy_afternm","crypto_box_seal","crypto_box_seal_open","crypto_box_seed_keypair","crypto_core_ed25519_add","crypto_core_ed25519_from_hash","crypto_core_ed25519_from_uniform","crypto_core_ed25519_is_valid_point","crypto_core_ed25519_random","crypto_core_ed25519_scalar_add","crypto_core_ed25519_scalar_complement","crypto_core_ed25519_scalar_invert","crypto_core_ed25519_scalar_mul","crypto_core_ed25519_scalar_negate","crypto_core_ed25519_scalar_random","crypto_core_ed25519_scalar_reduce","crypto_core_ed25519_scalar_sub","crypto_core_ed25519_sub","crypto_core_hchacha20","crypto_core_hsalsa20","crypto_core_ristretto255_add","crypto_core_ristretto255_from_hash","crypto_core_ristretto255_is_valid_point","crypto_core_ristretto255_random","crypto_core_ristretto255_scalar_add","crypto_core_ristretto255_scalar_complement","crypto_core_ristretto255_scalar_invert","crypto_core_ristretto255_scalar_mul","crypto_core_ristretto255_scalar_negate","crypto_core_ristretto255_scalar_random","crypto_core_ristretto255_scalar_reduce","crypto_core_ristretto255_scalar_sub","crypto_core_ristretto255_sub","crypto_generichash","crypto_generichash_blake2b_salt_personal","crypto_generichash_final","crypto_generichash_init","crypto_generichash_keygen","crypto_generichash_update","crypto_hash","crypto_hash_sha256","crypto_hash_sha256_final","crypto_hash_sha256_init","crypto_hash_sha256_update","crypto_hash_sha512","crypto_hash_sha512_final","crypto_hash_sha512_init","crypto_hash_sha512_update","crypto_kdf_derive_from_key","crypto_kdf_keygen","crypto_kx_client_session_keys","crypto_kx_keypair","crypto_kx_seed_keypair","crypto_kx_server_session_keys","crypto_onetimeauth","crypto_onetimeauth_final","crypto_onetimeauth_init","crypto_onetimeauth_keygen","crypto_onetimeauth_update","crypto_onetimeauth_verify","crypto_pwhash","crypto_pwhash_scryptsalsa208sha256","crypto_pwhash_scryptsalsa208sha256_ll","crypto_pwhash_scryptsalsa208sha256_str","crypto_pwhash_scryptsalsa208sha256_str_verify","crypto_pwhash_str","crypto_pwhash_str_needs_rehash","crypto_pwhash_str_verify","crypto_scalarmult","crypto_scalarmult_base","crypto_scalarmult_ed25519","crypto_scalarmult_ed25519_base","crypto_scalarmult_ed25519_base_noclamp","crypto_scalarmult_ed25519_noclamp","crypto_scalarmult_ristretto255","crypto_scalarmult_ristretto255_base","crypto_secretbox_detached","crypto_secretbox_easy","crypto_secretbox_keygen","crypto_secretbox_open_detached","crypto_secretbox_open_easy","crypto_secretstream_xchacha20poly1305_init_pull","crypto_secretstream_xchacha20poly1305_init_push","crypto_secretstream_xchacha20poly1305_keygen","crypto_secretstream_xchacha20poly1305_pull","crypto_secretstream_xchacha20poly1305_push","crypto_secretstream_xchacha20poly1305_rekey","crypto_shorthash","crypto_shorthash_keygen","crypto_shorthash_siphashx24","crypto_sign","crypto_sign_detached","crypto_sign_ed25519_pk_to_curve25519","crypto_sign_ed25519_sk_to_curve25519","crypto_sign_ed25519_sk_to_pk","crypto_sign_ed25519_sk_to_seed","crypto_sign_final_create","crypto_sign_final_verify","crypto_sign_init","crypto_sign_keypair","crypto_sign_open","crypto_sign_seed_keypair","crypto_sign_update","crypto_sign_verify_detached","crypto_stream_chacha20","crypto_stream_chacha20_ietf_xor","crypto_stream_chacha20_ietf_xor_ic","crypto_stream_chacha20_keygen","crypto_stream_chacha20_xor","crypto_stream_chacha20_xor_ic","crypto_stream_keygen","crypto_stream_xchacha20_keygen","crypto_stream_xchacha20_xor","crypto_stream_xchacha20_xor_ic","randombytes_buf","randombytes_buf_deterministic","randombytes_close","randombytes_random","randombytes_set_implementation","randombytes_stir","randombytes_uniform","sodium_version_string"],n=[E,w,x,S,k,T,Y,B,A,M,I,K,N,L,P,O,U,C,D,R,G,X,F,V,q,j,H,z,W,Z,J,Q,$,ee,te,re,ne,ae,se,oe,ce,_e,ie,he,pe,ue,le,ye,de,ve,ge,fe,be,me,Ee,we,xe,Se,ke,Te,Ye,Be,Ae,Me,Ie,Ke,Ne,Le,Pe,Oe,Ue,Ce,De,Re,Ge,Xe,Fe,Ve,qe,je,He,ze,We,Ze,Je,Qe,$e,et,tt,rt,nt,at,st,ot,ct,_t,it,ht,pt,ut,lt,yt,dt,vt,gt,ft,bt,mt,Et,wt,xt,St,kt,Tt,Yt,Bt,At,Mt,It,Kt,Nt,Lt,Pt,Ot,Ut,Ct,Dt,Rt,Gt,Xt,Ft,Vt,qt,jt,Ht,zt,Wt,Zt,Jt,Qt,$t,er,tr,rr,nr,ar,sr,or,cr,_r,ir,hr,pr,ur,lr,yr,dr,vr,gr,fr,br,mr],a=0;a<n.length;a++)"function"==typeof r["_"+t[a]]&&(e[t[a]]=n[a]);var s=["SODIUM_LIBRARY_VERSION_MAJOR","SODIUM_LIBRARY_VERSION_MINOR","crypto_aead_chacha20poly1305_ABYTES","crypto_aead_chacha20poly1305_IETF_ABYTES","crypto_aead_chacha20poly1305_IETF_KEYBYTES","crypto_aead_chacha20poly1305_IETF_MESSAGEBYTES_MAX","crypto_aead_chacha20poly1305_IETF_NPUBBYTES","crypto_aead_chacha20poly1305_IETF_NSECBYTES","crypto_aead_chacha20poly1305_KEYBYTES","crypto_aead_chacha20poly1305_MESSAGEBYTES_MAX","crypto_aead_chacha20poly1305_NPUBBYTES","crypto_aead_chacha20poly1305_NSECBYTES","crypto_aead_chacha20poly1305_ietf_ABYTES","crypto_aead_chacha20poly1305_ietf_KEYBYTES","crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX","crypto_aead_chacha20poly1305_ietf_NPUBBYTES","crypto_aead_chacha20poly1305_ietf_NSECBYTES","crypto_aead_xchacha20poly1305_IETF_ABYTES","crypto_aead_xchacha20poly1305_IETF_KEYBYTES","crypto_aead_xchacha20poly1305_IETF_MESSAGEBYTES_MAX","crypto_aead_xchacha20poly1305_IETF_NPUBBYTES","crypto_aead_xchacha20poly1305_IETF_NSECBYTES","crypto_aead_xchacha20poly1305_ietf_ABYTES","crypto_aead_xchacha20poly1305_ietf_KEYBYTES","crypto_aead_xchacha20poly1305_ietf_MESSAGEBYTES_MAX","crypto_aead_xchacha20poly1305_ietf_NPUBBYTES","crypto_aead_xchacha20poly1305_ietf_NSECBYTES","crypto_auth_BYTES","crypto_auth_KEYBYTES","crypto_auth_hmacsha256_BYTES","crypto_auth_hmacsha256_KEYBYTES","crypto_auth_hmacsha512256_BYTES","crypto_auth_hmacsha512256_KEYBYTES","crypto_auth_hmacsha512_BYTES","crypto_auth_hmacsha512_KEYBYTES","crypto_box_BEFORENMBYTES","crypto_box_MACBYTES","crypto_box_MESSAGEBYTES_MAX","crypto_box_NONCEBYTES","crypto_box_PUBLICKEYBYTES","crypto_box_SEALBYTES","crypto_box_SECRETKEYBYTES","crypto_box_SEEDBYTES","crypto_box_curve25519xchacha20poly1305_BEFORENMBYTES","crypto_box_curve25519xchacha20poly1305_MACBYTES","crypto_box_curve25519xchacha20poly1305_MESSAGEBYTES_MAX","crypto_box_curve25519xchacha20poly1305_NONCEBYTES","crypto_box_curve25519xchacha20poly1305_PUBLICKEYBYTES","crypto_box_curve25519xchacha20poly1305_SEALBYTES","crypto_box_curve25519xchacha20poly1305_SECRETKEYBYTES","crypto_box_curve25519xchacha20poly1305_SEEDBYTES","crypto_box_curve25519xsalsa20poly1305_BEFORENMBYTES","crypto_box_curve25519xsalsa20poly1305_MACBYTES","crypto_box_curve25519xsalsa20poly1305_MESSAGEBYTES_MAX","crypto_box_curve25519xsalsa20poly1305_NONCEBYTES","crypto_box_curve25519xsalsa20poly1305_PUBLICKEYBYTES","crypto_box_curve25519xsalsa20poly1305_SECRETKEYBYTES","crypto_box_curve25519xsalsa20poly1305_SEEDBYTES","crypto_core_ed25519_BYTES","crypto_core_ed25519_HASHBYTES","crypto_core_ed25519_NONREDUCEDSCALARBYTES","crypto_core_ed25519_SCALARBYTES","crypto_core_ed25519_UNIFORMBYTES","crypto_core_hchacha20_CONSTBYTES","crypto_core_hchacha20_INPUTBYTES","crypto_core_hchacha20_KEYBYTES","crypto_core_hchacha20_OUTPUTBYTES","crypto_core_hsalsa20_CONSTBYTES","crypto_core_hsalsa20_INPUTBYTES","crypto_core_hsalsa20_KEYBYTES","crypto_core_hsalsa20_OUTPUTBYTES","crypto_core_ristretto255_BYTES","crypto_core_ristretto255_HASHBYTES","crypto_core_ristretto255_NONREDUCEDSCALARBYTES","crypto_core_ristretto255_SCALARBYTES","crypto_core_salsa2012_CONSTBYTES","crypto_core_salsa2012_INPUTBYTES","crypto_core_salsa2012_KEYBYTES","crypto_core_salsa2012_OUTPUTBYTES","crypto_core_salsa20_CONSTBYTES","crypto_core_salsa20_INPUTBYTES","crypto_core_salsa20_KEYBYTES","crypto_core_salsa20_OUTPUTBYTES","crypto_generichash_BYTES","crypto_generichash_BYTES_MAX","crypto_generichash_BYTES_MIN","crypto_generichash_KEYBYTES","crypto_generichash_KEYBYTES_MAX","crypto_generichash_KEYBYTES_MIN","crypto_generichash_blake2b_BYTES","crypto_generichash_blake2b_BYTES_MAX","crypto_generichash_blake2b_BYTES_MIN","crypto_generichash_blake2b_KEYBYTES","crypto_generichash_blake2b_KEYBYTES_MAX","crypto_generichash_blake2b_KEYBYTES_MIN","crypto_generichash_blake2b_PERSONALBYTES","crypto_generichash_blake2b_SALTBYTES","crypto_hash_BYTES","crypto_hash_sha256_BYTES","crypto_hash_sha512_BYTES","crypto_kdf_BYTES_MAX","crypto_kdf_BYTES_MIN","crypto_kdf_CONTEXTBYTES","crypto_kdf_KEYBYTES","crypto_kdf_blake2b_BYTES_MAX","crypto_kdf_blake2b_BYTES_MIN","crypto_kdf_blake2b_CONTEXTBYTES","crypto_kdf_blake2b_KEYBYTES","crypto_kx_PUBLICKEYBYTES","crypto_kx_SECRETKEYBYTES","crypto_kx_SEEDBYTES","crypto_kx_SESSIONKEYBYTES","crypto_onetimeauth_BYTES","crypto_onetimeauth_KEYBYTES","crypto_onetimeauth_poly1305_BYTES","crypto_onetimeauth_poly1305_KEYBYTES","crypto_pwhash_ALG_ARGON2I13","crypto_pwhash_ALG_ARGON2ID13","crypto_pwhash_ALG_DEFAULT","crypto_pwhash_BYTES_MAX","crypto_pwhash_BYTES_MIN","crypto_pwhash_MEMLIMIT_INTERACTIVE","crypto_pwhash_MEMLIMIT_MAX","crypto_pwhash_MEMLIMIT_MIN","crypto_pwhash_MEMLIMIT_MODERATE","crypto_pwhash_MEMLIMIT_SENSITIVE","crypto_pwhash_OPSLIMIT_INTERACTIVE","crypto_pwhash_OPSLIMIT_MAX","crypto_pwhash_OPSLIMIT_MIN","crypto_pwhash_OPSLIMIT_MODERATE","crypto_pwhash_OPSLIMIT_SENSITIVE","crypto_pwhash_PASSWD_MAX","crypto_pwhash_PASSWD_MIN","crypto_pwhash_SALTBYTES","crypto_pwhash_STRBYTES","crypto_pwhash_argon2i_BYTES_MAX","crypto_pwhash_argon2i_BYTES_MIN","crypto_pwhash_argon2i_SALTBYTES","crypto_pwhash_argon2i_STRBYTES","crypto_pwhash_argon2id_BYTES_MAX","crypto_pwhash_argon2id_BYTES_MIN","crypto_pwhash_argon2id_SALTBYTES","crypto_pwhash_argon2id_STRBYTES","crypto_pwhash_scryptsalsa208sha256_BYTES_MAX","crypto_pwhash_scryptsalsa208sha256_BYTES_MIN","crypto_pwhash_scryptsalsa208sha256_MEMLIMIT_INTERACTIVE","crypto_pwhash_scryptsalsa208sha256_MEMLIMIT_MAX","crypto_pwhash_scryptsalsa208sha256_MEMLIMIT_MIN","crypto_pwhash_scryptsalsa208sha256_MEMLIMIT_SENSITIVE","crypto_pwhash_scryptsalsa208sha256_OPSLIMIT_INTERACTIVE","crypto_pwhash_scryptsalsa208sha256_OPSLIMIT_MAX","crypto_pwhash_scryptsalsa208sha256_OPSLIMIT_MIN","crypto_pwhash_scryptsalsa208sha256_OPSLIMIT_SENSITIVE","crypto_pwhash_scryptsalsa208sha256_SALTBYTES","crypto_pwhash_scryptsalsa208sha256_STRBYTES","crypto_scalarmult_BYTES","crypto_scalarmult_SCALARBYTES","crypto_scalarmult_curve25519_BYTES","crypto_scalarmult_curve25519_SCALARBYTES","crypto_scalarmult_ed25519_BYTES","crypto_scalarmult_ed25519_SCALARBYTES","crypto_scalarmult_ristretto255_BYTES","crypto_scalarmult_ristretto255_SCALARBYTES","crypto_secretbox_KEYBYTES","crypto_secretbox_MACBYTES","crypto_secretbox_MESSAGEBYTES_MAX","crypto_secretbox_NONCEBYTES","crypto_secretbox_xchacha20poly1305_KEYBYTES","crypto_secretbox_xchacha20poly1305_MACBYTES","crypto_secretbox_xchacha20poly1305_MESSAGEBYTES_MAX","crypto_secretbox_xchacha20poly1305_NONCEBYTES","crypto_secretbox_xsalsa20poly1305_KEYBYTES","crypto_secretbox_xsalsa20poly1305_MACBYTES","crypto_secretbox_xsalsa20poly1305_MESSAGEBYTES_MAX","crypto_secretbox_xsalsa20poly1305_NONCEBYTES","crypto_secretstream_xchacha20poly1305_ABYTES","crypto_secretstream_xchacha20poly1305_HEADERBYTES","crypto_secretstream_xchacha20poly1305_KEYBYTES","crypto_secretstream_xchacha20poly1305_MESSAGEBYTES_MAX","crypto_secretstream_xchacha20poly1305_TAG_FINAL","crypto_secretstream_xchacha20poly1305_TAG_MESSAGE","crypto_secretstream_xchacha20poly1305_TAG_PUSH","crypto_secretstream_xchacha20poly1305_TAG_REKEY","crypto_shorthash_BYTES","crypto_shorthash_KEYBYTES","crypto_shorthash_siphash24_BYTES","crypto_shorthash_siphash24_KEYBYTES","crypto_shorthash_siphashx24_BYTES","crypto_shorthash_siphashx24_KEYBYTES","crypto_sign_BYTES","crypto_sign_MESSAGEBYTES_MAX","crypto_sign_PUBLICKEYBYTES","crypto_sign_SECRETKEYBYTES","crypto_sign_SEEDBYTES","crypto_sign_ed25519_BYTES","crypto_sign_ed25519_MESSAGEBYTES_MAX","crypto_sign_ed25519_PUBLICKEYBYTES","crypto_sign_ed25519_SECRETKEYBYTES","crypto_sign_ed25519_SEEDBYTES","crypto_stream_KEYBYTES","crypto_stream_MESSAGEBYTES_MAX","crypto_stream_NONCEBYTES","crypto_stream_chacha20_IETF_KEYBYTES","crypto_stream_chacha20_IETF_MESSAGEBYTES_MAX","crypto_stream_chacha20_IETF_NONCEBYTES","crypto_stream_chacha20_KEYBYTES","crypto_stream_chacha20_MESSAGEBYTES_MAX","crypto_stream_chacha20_NONCEBYTES","crypto_stream_chacha20_ietf_KEYBYTES","crypto_stream_chacha20_ietf_MESSAGEBYTES_MAX","crypto_stream_chacha20_ietf_NONCEBYTES","crypto_stream_salsa2012_KEYBYTES","crypto_stream_salsa2012_MESSAGEBYTES_MAX","crypto_stream_salsa2012_NONCEBYTES","crypto_stream_salsa208_KEYBYTES","crypto_stream_salsa208_MESSAGEBYTES_MAX","crypto_stream_salsa208_NONCEBYTES","crypto_stream_salsa20_KEYBYTES","crypto_stream_salsa20_MESSAGEBYTES_MAX","crypto_stream_salsa20_NONCEBYTES","crypto_stream_xchacha20_KEYBYTES","crypto_stream_xchacha20_MESSAGEBYTES_MAX","crypto_stream_xchacha20_NONCEBYTES","crypto_stream_xsalsa20_KEYBYTES","crypto_stream_xsalsa20_MESSAGEBYTES_MAX","crypto_stream_xsalsa20_NONCEBYTES","crypto_verify_16_BYTES","crypto_verify_32_BYTES","crypto_verify_64_BYTES"];for(a=0;a<s.length;a++)"function"==typeof(c=r["_"+s[a].toLowerCase()])&&(e[s[a]]=c());var o=["SODIUM_VERSION_STRING","crypto_pwhash_STRPREFIX","crypto_pwhash_scryptsalsa208sha256_STRPREFIX"];for(a=0;a<o.length;a++){var c;"function"==typeof(c=r["_"+o[a].toLowerCase()])&&(e[o[a]]=r.UTF8ToString(c()))}}r=t;try{n();var a=new Uint8Array([98,97,108,108,115]),s=e.randombytes_buf(e.crypto_secretbox_NONCEBYTES),o=e.randombytes_buf(e.crypto_secretbox_KEYBYTES),c=e.crypto_secretbox_easy(a,s,o),_=e.crypto_secretbox_open_easy(c,s,o);if(e.memcmp(a,_))return}catch(e){if(null==r.useBackupModule)throw new Error("Both wasm and asm failed to load"+e)}r.useBackupModule(),n()}));function a(e){if("function"==typeof TextEncoder)return(new TextEncoder).encode(e);e=unescape(encodeURIComponent(e));for(var t=new Uint8Array(e.length),r=0,n=e.length;r<n;r++)t[r]=e.charCodeAt(r);return t}function s(e){if("function"==typeof TextDecoder)return new TextDecoder("utf-8",{fatal:!0}).decode(e);var t=8192,r=Math.ceil(e.length/t);if(r<=1)try{return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}catch(e){throw new TypeError("The encoded data was not valid.")}for(var n="",a=0,o=0;o<r;o++){var c=Array.prototype.slice.call(e,o*t+a,(o+1)*t+a);if(0!=c.length){var _,i=c.length,h=0;do{var p=c[--i];p>=240?(h=4,_=!0):p>=224?(h=3,_=!0):p>=192?(h=2,_=!0):p<128&&(h=1,_=!0)}while(!_);for(var u=h-(c.length-i),l=0;l<u;l++)a--,c.pop();n+=s(c)}}return n}function o(e){e=m(null,e,"input");for(var t,r,n,a="",s=0;s<e.length;s++)n=87+(r=15&e[s])+(r-10>>8&-39)<<8|87+(t=e[s]>>>4)+(t-10>>8&-39),a+=String.fromCharCode(255&n)+String.fromCharCode(n>>>8);return a}var c={ORIGINAL:1,ORIGINAL_NO_PADDING:3,URLSAFE:5,URLSAFE_NO_PADDING:7};function _(e){if(null==e)return c.URLSAFE_NO_PADDING;if(e!==c.ORIGINAL&&e!==c.ORIGINAL_NO_PADDING&&e!==c.URLSAFE&&e!=c.URLSAFE_NO_PADDING)throw new Error("unsupported base64 variant");return e}function i(e,t){t=_(t),e=m(a,e,"input");var n,a=[],o=0|Math.floor(e.length/3),c=e.length-3*o,i=4*o+(0!==c?0==(2&t)?4:2+(c>>>1):0),h=new l(i+1),p=y(e);return a.push(p),a.push(h.address),0===r._sodium_bin2base64(h.address,h.length,p,e.length,t)&&g(a,"conversion failed"),h.length=i,n=s(h.to_Uint8Array()),v(a),n}function h(e,t){var r=t||"uint8array";if(!p(r))throw new Error(r+" output format is not available");if(e instanceof l){if("uint8array"===r)return e.to_Uint8Array();if("text"===r)return s(e.to_Uint8Array());if("hex"===r)return o(e.to_Uint8Array());if("base64"===r)return i(e.to_Uint8Array(),c.URLSAFE_NO_PADDING);throw new Error('What is output format "'+r+'"?')}if("object"==typeof e){for(var n=Object.keys(e),a={},_=0;_<n.length;_++)a[n[_]]=h(e[n[_]],r);return a}if("string"==typeof e)return e;throw new TypeError("Cannot format output")}function p(e){for(var t=["uint8array","text","hex","base64"],r=0;r<t.length;r++)if(t[r]===e)return!0;return!1}function u(e){if(e){if("string"!=typeof e)throw new TypeError("When defined, the output format must be a string");if(!p(e))throw new Error(e+" is not a supported output format")}}function l(e){this.length=e,this.address=d(e)}function y(e){var t=d(e.length);return r.HEAPU8.set(e,t),t}function d(e){var t=r._malloc(e);if(0===t)throw{message:"_malloc() failed",length:e};return t}function v(e){if(e)for(var t=0;t<e.length;t++)n=e[t],r._free(n);var n}function g(e,t){throw v(e),new Error(t)}function f(e,t){throw v(e),new TypeError(t)}function b(e,t,r){null==t&&f(e,r+" cannot be null or undefined")}function m(e,t,r){return b(e,t,r),t instanceof Uint8Array?t:"string"==typeof t?a(t):void f(e,"unsupported input type for "+r)}function E(e,t,n,a,s,o){var c=[];u(o);var _=null;null!=e&&(_=y(e=m(c,e,"secret_nonce")),e.length,c.push(_)),t=m(c,t,"ciphertext");var i,p=r._crypto_aead_chacha20poly1305_abytes(),d=t.length;d<p&&f(c,"ciphertext is too short"),i=y(t),c.push(i);var b=null,E=0;null!=n&&(b=y(n=m(c,n,"additional_data")),E=n.length,c.push(b)),a=m(c,a,"public_nonce");var w,x=0|r._crypto_aead_chacha20poly1305_npubbytes();a.length!==x&&f(c,"invalid public_nonce length"),w=y(a),c.push(w),s=m(c,s,"key");var S,k=0|r._crypto_aead_chacha20poly1305_keybytes();s.length!==k&&f(c,"invalid key length"),S=y(s),c.push(S);var T=new l(d-r._crypto_aead_chacha20poly1305_abytes()|0),Y=T.address;if(c.push(Y),0===r._crypto_aead_chacha20poly1305_decrypt(Y,null,_,i,d,0,b,E,0,w,S)){var B=h(T,o);return v(c),B}g(c,"ciphertext cannot be decrypted using that key")}function w(e,t,n,a,s,o,c){var _=[];u(c);var i=null;null!=e&&(i=y(e=m(_,e,"secret_nonce")),e.length,_.push(i));var p=y(t=m(_,t,"ciphertext")),d=t.length;_.push(p),n=m(_,n,"mac");var b,E=0|r._crypto_box_macbytes();n.length!==E&&f(_,"invalid mac length"),b=y(n),_.push(b);var w=null,x=0;null!=a&&(w=y(a=m(_,a,"additional_data")),x=a.length,_.push(w)),s=m(_,s,"public_nonce");var S,k=0|r._crypto_aead_chacha20poly1305_npubbytes();s.length!==k&&f(_,"invalid public_nonce length"),S=y(s),_.push(S),o=m(_,o,"key");var T,Y=0|r._crypto_aead_chacha20poly1305_keybytes();o.length!==Y&&f(_,"invalid key length"),T=y(o),_.push(T);var B=new l(0|d),A=B.address;if(_.push(A),0===r._crypto_aead_chacha20poly1305_decrypt_detached(A,i,p,d,0,b,w,x,0,S,T)){var M=h(B,c);return v(_),M}g(_,"ciphertext cannot be decrypted using that key")}function x(e,t,n,a,s,o){var c=[];u(o);var _=y(e=m(c,e,"message")),i=e.length;c.push(_);var p=null,d=0;null!=t&&(p=y(t=m(c,t,"additional_data")),d=t.length,c.push(p));var b=null;null!=n&&(b=y(n=m(c,n,"secret_nonce")),n.length,c.push(b)),a=m(c,a,"public_nonce");var E,w=0|r._crypto_aead_chacha20poly1305_npubbytes();a.length!==w&&f(c,"invalid public_nonce length"),E=y(a),c.push(E),s=m(c,s,"key");var x,S=0|r._crypto_aead_chacha20poly1305_keybytes();s.length!==S&&f(c,"invalid key length"),x=y(s),c.push(x);var k=new l(i+r._crypto_aead_chacha20poly1305_abytes()|0),T=k.address;if(c.push(T),0===r._crypto_aead_chacha20poly1305_encrypt(T,null,_,i,0,p,d,0,b,E,x)){var Y=h(k,o);return v(c),Y}g(c,"invalid usage")}function S(e,t,n,a,s,o){var c=[];u(o);var _=y(e=m(c,e,"message")),i=e.length;c.push(_);var p=null,d=0;null!=t&&(p=y(t=m(c,t,"additional_data")),d=t.length,c.push(p));var b=null;null!=n&&(b=y(n=m(c,n,"secret_nonce")),n.length,c.push(b)),a=m(c,a,"public_nonce");var E,w=0|r._crypto_aead_chacha20poly1305_npubbytes();a.length!==w&&f(c,"invalid public_nonce length"),E=y(a),c.push(E),s=m(c,s,"key");var x,S=0|r._crypto_aead_chacha20poly1305_keybytes();s.length!==S&&f(c,"invalid key length"),x=y(s),c.push(x);var k=new l(0|i),T=k.address;c.push(T);var Y=new l(0|r._crypto_aead_chacha20poly1305_abytes()),B=Y.address;if(c.push(B),0===r._crypto_aead_chacha20poly1305_encrypt_detached(T,B,null,_,i,0,p,d,0,b,E,x)){var A=h({ciphertext:k,mac:Y},o);return v(c),A}g(c,"invalid usage")}function k(e,t,n,a,s,o){var c=[];u(o);var _=null;null!=e&&(_=y(e=m(c,e,"secret_nonce")),e.length,c.push(_)),t=m(c,t,"ciphertext");var i,p=r._crypto_aead_chacha20poly1305_ietf_abytes(),d=t.length;d<p&&f(c,"ciphertext is too short"),i=y(t),c.push(i);var b=null,E=0;null!=n&&(b=y(n=m(c,n,"additional_data")),E=n.length,c.push(b)),a=m(c,a,"public_nonce");var w,x=0|r._crypto_aead_chacha20poly1305_ietf_npubbytes();a.length!==x&&f(c,"invalid public_nonce length"),w=y(a),c.push(w),s=m(c,s,"key");var S,k=0|r._crypto_aead_chacha20poly1305_ietf_keybytes();s.length!==k&&f(c,"invalid key length"),S=y(s),c.push(S);var T=new l(d-r._crypto_aead_chacha20poly1305_ietf_abytes()|0),Y=T.address;if(c.push(Y),0===r._crypto_aead_chacha20poly1305_ietf_decrypt(Y,null,_,i,d,0,b,E,0,w,S)){var B=h(T,o);return v(c),B}g(c,"ciphertext cannot be decrypted using that key")}function T(e,t,n,a,s,o,c){var _=[];u(c);var i=null;null!=e&&(i=y(e=m(_,e,"secret_nonce")),e.length,_.push(i));var p=y(t=m(_,t,"ciphertext")),d=t.length;_.push(p),n=m(_,n,"mac");var b,E=0|r._crypto_box_macbytes();n.length!==E&&f(_,"invalid mac length"),b=y(n),_.push(b);var w=null,x=0;null!=a&&(w=y(a=m(_,a,"additional_data")),x=a.length,_.push(w)),s=m(_,s,"public_nonce");var S,k=0|r._crypto_aead_chacha20poly1305_ietf_npubbytes();s.length!==k&&f(_,"invalid public_nonce length"),S=y(s),_.push(S),o=m(_,o,"key");var T,Y=0|r._crypto_aead_chacha20poly1305_ietf_keybytes();o.length!==Y&&f(_,"invalid key length"),T=y(o),_.push(T);var B=new l(0|d),A=B.address;if(_.push(A),0===r._crypto_aead_chacha20poly1305_ietf_decrypt_detached(A,i,p,d,0,b,w,x,0,S,T)){var M=h(B,c);return v(_),M}g(_,"ciphertext cannot be decrypted using that key")}function Y(e,t,n,a,s,o){var c=[];u(o);var _=y(e=m(c,e,"message")),i=e.length;c.push(_);var p=null,d=0;null!=t&&(p=y(t=m(c,t,"additional_data")),d=t.length,c.push(p));var b=null;null!=n&&(b=y(n=m(c,n,"secret_nonce")),n.length,c.push(b)),a=m(c,a,"public_nonce");var E,w=0|r._crypto_aead_chacha20poly1305_ietf_npubbytes();a.length!==w&&f(c,"invalid public_nonce length"),E=y(a),c.push(E),s=m(c,s,"key");var x,S=0|r._crypto_aead_chacha20poly1305_ietf_keybytes();s.length!==S&&f(c,"invalid key length"),x=y(s),c.push(x);var k=new l(i+r._crypto_aead_chacha20poly1305_ietf_abytes()|0),T=k.address;if(c.push(T),0===r._crypto_aead_chacha20poly1305_ietf_encrypt(T,null,_,i,0,p,d,0,b,E,x)){var Y=h(k,o);return v(c),Y}g(c,"invalid usage")}function B(e,t,n,a,s,o){var c=[];u(o);var _=y(e=m(c,e,"message")),i=e.length;c.push(_);var p=null,d=0;null!=t&&(p=y(t=m(c,t,"additional_data")),d=t.length,c.push(p));var b=null;null!=n&&(b=y(n=m(c,n,"secret_nonce")),n.length,c.push(b)),a=m(c,a,"public_nonce");var E,w=0|r._crypto_aead_chacha20poly1305_ietf_npubbytes();a.length!==w&&f(c,"invalid public_nonce length"),E=y(a),c.push(E),s=m(c,s,"key");var x,S=0|r._crypto_aead_chacha20poly1305_ietf_keybytes();s.length!==S&&f(c,"invalid key length"),x=y(s),c.push(x);var k=new l(0|i),T=k.address;c.push(T);var Y=new l(0|r._crypto_aead_chacha20poly1305_ietf_abytes()),B=Y.address;if(c.push(B),0===r._crypto_aead_chacha20poly1305_ietf_encrypt_detached(T,B,null,_,i,0,p,d,0,b,E,x)){var A=h({ciphertext:k,mac:Y},o);return v(c),A}g(c,"invalid usage")}function A(e){var t=[];u(e);var n=new l(0|r._crypto_aead_chacha20poly1305_ietf_keybytes()),a=n.address;t.push(a),r._crypto_aead_chacha20poly1305_ietf_keygen(a);var s=h(n,e);return v(t),s}function M(e){var t=[];u(e);var n=new l(0|r._crypto_aead_chacha20poly1305_keybytes()),a=n.address;t.push(a),r._crypto_aead_chacha20poly1305_keygen(a);var s=h(n,e);return v(t),s}function I(e,t,n,a,s,o){var c=[];u(o);var _=null;null!=e&&(_=y(e=m(c,e,"secret_nonce")),e.length,c.push(_)),t=m(c,t,"ciphertext");var i,p=r._crypto_aead_xchacha20poly1305_ietf_abytes(),d=t.length;d<p&&f(c,"ciphertext is too short"),i=y(t),c.push(i);var b=null,E=0;null!=n&&(b=y(n=m(c,n,"additional_data")),E=n.length,c.push(b)),a=m(c,a,"public_nonce");var w,x=0|r._crypto_aead_xchacha20poly1305_ietf_npubbytes();a.length!==x&&f(c,"invalid public_nonce length"),w=y(a),c.push(w),s=m(c,s,"key");var S,k=0|r._crypto_aead_xchacha20poly1305_ietf_keybytes();s.length!==k&&f(c,"invalid key length"),S=y(s),c.push(S);var T=new l(d-r._crypto_aead_xchacha20poly1305_ietf_abytes()|0),Y=T.address;if(c.push(Y),0===r._crypto_aead_xchacha20poly1305_ietf_decrypt(Y,null,_,i,d,0,b,E,0,w,S)){var B=h(T,o);return v(c),B}g(c,"ciphertext cannot be decrypted using that key")}function K(e,t,n,a,s,o,c){var _=[];u(c);var i=null;null!=e&&(i=y(e=m(_,e,"secret_nonce")),e.length,_.push(i));var p=y(t=m(_,t,"ciphertext")),d=t.length;_.push(p),n=m(_,n,"mac");var b,E=0|r._crypto_box_macbytes();n.length!==E&&f(_,"invalid mac length"),b=y(n),_.push(b);var w=null,x=0;null!=a&&(w=y(a=m(_,a,"additional_data")),x=a.length,_.push(w)),s=m(_,s,"public_nonce");var S,k=0|r._crypto_aead_xchacha20poly1305_ietf_npubbytes();s.length!==k&&f(_,"invalid public_nonce length"),S=y(s),_.push(S),o=m(_,o,"key");var T,Y=0|r._crypto_aead_xchacha20poly1305_ietf_keybytes();o.length!==Y&&f(_,"invalid key length"),T=y(o),_.push(T);var B=new l(0|d),A=B.address;if(_.push(A),0===r._crypto_aead_xchacha20poly1305_ietf_decrypt_detached(A,i,p,d,0,b,w,x,0,S,T)){var M=h(B,c);return v(_),M}g(_,"ciphertext cannot be decrypted using that key")}function N(e,t,n,a,s,o){var c=[];u(o);var _=y(e=m(c,e,"message")),i=e.length;c.push(_);var p=null,d=0;null!=t&&(p=y(t=m(c,t,"additional_data")),d=t.length,c.push(p));var b=null;null!=n&&(b=y(n=m(c,n,"secret_nonce")),n.length,c.push(b)),a=m(c,a,"public_nonce");var E,w=0|r._crypto_aead_xchacha20poly1305_ietf_npubbytes();a.length!==w&&f(c,"invalid public_nonce length"),E=y(a),c.push(E),s=m(c,s,"key");var x,S=0|r._crypto_aead_xchacha20poly1305_ietf_keybytes();s.length!==S&&f(c,"invalid key length"),x=y(s),c.push(x);var k=new l(i+r._crypto_aead_xchacha20poly1305_ietf_abytes()|0),T=k.address;if(c.push(T),0===r._crypto_aead_xchacha20poly1305_ietf_encrypt(T,null,_,i,0,p,d,0,b,E,x)){var Y=h(k,o);return v(c),Y}g(c,"invalid usage")}function L(e,t,n,a,s,o){var c=[];u(o);var _=y(e=m(c,e,"message")),i=e.length;c.push(_);var p=null,d=0;null!=t&&(p=y(t=m(c,t,"additional_data")),d=t.length,c.push(p));var b=null;null!=n&&(b=y(n=m(c,n,"secret_nonce")),n.length,c.push(b)),a=m(c,a,"public_nonce");var E,w=0|r._crypto_aead_xchacha20poly1305_ietf_npubbytes();a.length!==w&&f(c,"invalid public_nonce length"),E=y(a),c.push(E),s=m(c,s,"key");var x,S=0|r._crypto_aead_xchacha20poly1305_ietf_keybytes();s.length!==S&&f(c,"invalid key length"),x=y(s),c.push(x);var k=new l(0|i),T=k.address;c.push(T);var Y=new l(0|r._crypto_aead_xchacha20poly1305_ietf_abytes()),B=Y.address;if(c.push(B),0===r._crypto_aead_xchacha20poly1305_ietf_encrypt_detached(T,B,null,_,i,0,p,d,0,b,E,x)){var A=h({ciphertext:k,mac:Y},o);return v(c),A}g(c,"invalid usage")}function P(e){var t=[];u(e);var n=new l(0|r._crypto_aead_xchacha20poly1305_ietf_keybytes()),a=n.address;t.push(a),r._crypto_aead_xchacha20poly1305_ietf_keygen(a);var s=h(n,e);return v(t),s}function O(e,t,n){var a=[];u(n);var s=y(e=m(a,e,"message")),o=e.length;a.push(s),t=m(a,t,"key");var c,_=0|r._crypto_auth_keybytes();t.length!==_&&f(a,"invalid key length"),c=y(t),a.push(c);var i=new l(0|r._crypto_auth_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_auth(p,s,o,0,c))){var d=h(i,n);return v(a),d}g(a,"invalid usage")}function U(e,t,n){var a=[];u(n);var s=y(e=m(a,e,"message")),o=e.length;a.push(s),t=m(a,t,"key");var c,_=0|r._crypto_auth_hmacsha256_keybytes();t.length!==_&&f(a,"invalid key length"),c=y(t),a.push(c);var i=new l(0|r._crypto_auth_hmacsha256_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_auth_hmacsha256(p,s,o,0,c))){var d=h(i,n);return v(a),d}g(a,"invalid usage")}function C(e,t){var n=[];u(t),b(n,e,"state_address");var a=new l(0|r._crypto_auth_hmacsha256_bytes()),s=a.address;if(n.push(s),0==(0|r._crypto_auth_hmacsha256_final(e,s))){var o=(r._free(e),h(a,t));return v(n),o}g(n,"invalid usage")}function D(e,t){var n=[];u(t);var a=null,s=0;null!=e&&(a=y(e=m(n,e,"key")),s=e.length,n.push(a));var o=new l(208).address;if(0==(0|r._crypto_auth_hmacsha256_init(o,a,s))){var c=o;return v(n),c}g(n,"invalid usage")}function R(e){var t=[];u(e);var n=new l(0|r._crypto_auth_hmacsha256_keybytes()),a=n.address;t.push(a),r._crypto_auth_hmacsha256_keygen(a);var s=h(n,e);return v(t),s}function G(e,t,n){var a=[];u(n),b(a,e,"state_address");var s=y(t=m(a,t,"message_chunk")),o=t.length;a.push(s),0!=(0|r._crypto_auth_hmacsha256_update(e,s,o))&&g(a,"invalid usage"),v(a)}function X(e,t,n){var a=[];e=m(a,e,"tag");var s,o=0|r._crypto_auth_hmacsha256_bytes();e.length!==o&&f(a,"invalid tag length"),s=y(e),a.push(s);var c=y(t=m(a,t,"message")),_=t.length;a.push(c),n=m(a,n,"key");var i,h=0|r._crypto_auth_hmacsha256_keybytes();n.length!==h&&f(a,"invalid key length"),i=y(n),a.push(i);var p=0==(0|r._crypto_auth_hmacsha256_verify(s,c,_,0,i));return v(a),p}function F(e,t,n){var a=[];u(n);var s=y(e=m(a,e,"message")),o=e.length;a.push(s),t=m(a,t,"key");var c,_=0|r._crypto_auth_hmacsha512_keybytes();t.length!==_&&f(a,"invalid key length"),c=y(t),a.push(c);var i=new l(0|r._crypto_auth_hmacsha512_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_auth_hmacsha512(p,s,o,0,c))){var d=h(i,n);return v(a),d}g(a,"invalid usage")}function V(e,t){var n=[];u(t),b(n,e,"state_address");var a=new l(0|r._crypto_auth_hmacsha512_bytes()),s=a.address;if(n.push(s),0==(0|r._crypto_auth_hmacsha512_final(e,s))){var o=(r._free(e),h(a,t));return v(n),o}g(n,"invalid usage")}function q(e,t){var n=[];u(t);var a=null,s=0;null!=e&&(a=y(e=m(n,e,"key")),s=e.length,n.push(a));var o=new l(416).address;if(0==(0|r._crypto_auth_hmacsha512_init(o,a,s))){var c=o;return v(n),c}g(n,"invalid usage")}function j(e){var t=[];u(e);var n=new l(0|r._crypto_auth_hmacsha512_keybytes()),a=n.address;t.push(a),r._crypto_auth_hmacsha512_keygen(a);var s=h(n,e);return v(t),s}function H(e,t,n){var a=[];u(n),b(a,e,"state_address");var s=y(t=m(a,t,"message_chunk")),o=t.length;a.push(s),0!=(0|r._crypto_auth_hmacsha512_update(e,s,o))&&g(a,"invalid usage"),v(a)}function z(e,t,n){var a=[];e=m(a,e,"tag");var s,o=0|r._crypto_auth_hmacsha512_bytes();e.length!==o&&f(a,"invalid tag length"),s=y(e),a.push(s);var c=y(t=m(a,t,"message")),_=t.length;a.push(c),n=m(a,n,"key");var i,h=0|r._crypto_auth_hmacsha512_keybytes();n.length!==h&&f(a,"invalid key length"),i=y(n),a.push(i);var p=0==(0|r._crypto_auth_hmacsha512_verify(s,c,_,0,i));return v(a),p}function W(e){var t=[];u(e);var n=new l(0|r._crypto_auth_keybytes()),a=n.address;t.push(a),r._crypto_auth_keygen(a);var s=h(n,e);return v(t),s}function Z(e,t,n){var a=[];e=m(a,e,"tag");var s,o=0|r._crypto_auth_bytes();e.length!==o&&f(a,"invalid tag length"),s=y(e),a.push(s);var c=y(t=m(a,t,"message")),_=t.length;a.push(c),n=m(a,n,"key");var i,h=0|r._crypto_auth_keybytes();n.length!==h&&f(a,"invalid key length"),i=y(n),a.push(i);var p=0==(0|r._crypto_auth_verify(s,c,_,0,i));return v(a),p}function J(e,t,n){var a=[];u(n),e=m(a,e,"publicKey");var s,o=0|r._crypto_box_publickeybytes();e.length!==o&&f(a,"invalid publicKey length"),s=y(e),a.push(s),t=m(a,t,"privateKey");var c,_=0|r._crypto_box_secretkeybytes();t.length!==_&&f(a,"invalid privateKey length"),c=y(t),a.push(c);var i=new l(0|r._crypto_box_beforenmbytes()),p=i.address;if(a.push(p),0==(0|r._crypto_box_beforenm(p,s,c))){var d=h(i,n);return v(a),d}g(a,"invalid usage")}function Q(e){var t=[];u(e);var n=new l(0|r._crypto_box_curve25519xchacha20poly1305_publickeybytes()),a=n.address;t.push(a);var s=new l(0|r._crypto_box_curve25519xchacha20poly1305_secretkeybytes()),o=s.address;t.push(o),r._crypto_box_curve25519xchacha20poly1305_keypair(a,o);var c=h({publicKey:n,privateKey:s,keyType:"curve25519"},e);return v(t),c}function $(e,t,n){var a=[];u(n);var s=y(e=m(a,e,"message")),o=e.length;a.push(s),t=m(a,t,"publicKey");var c,_=0|r._crypto_box_curve25519xchacha20poly1305_publickeybytes();t.length!==_&&f(a,"invalid publicKey length"),c=y(t),a.push(c);var i=new l(o+r._crypto_box_curve25519xchacha20poly1305_sealbytes()|0),p=i.address;a.push(p),r._crypto_box_curve25519xchacha20poly1305_seal(p,s,o,0,c);var d=h(i,n);return v(a),d}function ee(e,t,n,a){var s=[];u(a),e=m(s,e,"ciphertext");var o,c=r._crypto_box_curve25519xchacha20poly1305_sealbytes(),_=e.length;_<c&&f(s,"ciphertext is too short"),o=y(e),s.push(o),t=m(s,t,"publicKey");var i,p=0|r._crypto_box_curve25519xchacha20poly1305_publickeybytes();t.length!==p&&f(s,"invalid publicKey length"),i=y(t),s.push(i),n=m(s,n,"secretKey");var d,g=0|r._crypto_box_curve25519xchacha20poly1305_secretkeybytes();n.length!==g&&f(s,"invalid secretKey length"),d=y(n),s.push(d);var b=new l(_-r._crypto_box_curve25519xchacha20poly1305_sealbytes()|0),E=b.address;s.push(E),r._crypto_box_curve25519xchacha20poly1305_seal_open(E,o,_,0,i,d);var w=h(b,a);return v(s),w}function te(e,t,n,a,s){var o=[];u(s);var c=y(e=m(o,e,"message")),_=e.length;o.push(c),t=m(o,t,"nonce");var i,p=0|r._crypto_box_noncebytes();t.length!==p&&f(o,"invalid nonce length"),i=y(t),o.push(i),n=m(o,n,"publicKey");var d,b=0|r._crypto_box_publickeybytes();n.length!==b&&f(o,"invalid publicKey length"),d=y(n),o.push(d),a=m(o,a,"privateKey");var E,w=0|r._crypto_box_secretkeybytes();a.length!==w&&f(o,"invalid privateKey length"),E=y(a),o.push(E);var x=new l(0|_),S=x.address;o.push(S);var k=new l(0|r._crypto_box_macbytes()),T=k.address;if(o.push(T),0==(0|r._crypto_box_detached(S,T,c,_,0,i,d,E))){var Y=h({ciphertext:x,mac:k},s);return v(o),Y}g(o,"invalid usage")}function re(e,t,n,a,s){var o=[];u(s);var c=y(e=m(o,e,"message")),_=e.length;o.push(c),t=m(o,t,"nonce");var i,p=0|r._crypto_box_noncebytes();t.length!==p&&f(o,"invalid nonce length"),i=y(t),o.push(i),n=m(o,n,"publicKey");var d,b=0|r._crypto_box_publickeybytes();n.length!==b&&f(o,"invalid publicKey length"),d=y(n),o.push(d),a=m(o,a,"privateKey");var E,w=0|r._crypto_box_secretkeybytes();a.length!==w&&f(o,"invalid privateKey length"),E=y(a),o.push(E);var x=new l(_+r._crypto_box_macbytes()|0),S=x.address;if(o.push(S),0==(0|r._crypto_box_easy(S,c,_,0,i,d,E))){var k=h(x,s);return v(o),k}g(o,"invalid usage")}function ne(e,t,n,a){var s=[];u(a);var o=y(e=m(s,e,"message")),c=e.length;s.push(o),t=m(s,t,"nonce");var _,i=0|r._crypto_box_noncebytes();t.length!==i&&f(s,"invalid nonce length"),_=y(t),s.push(_),n=m(s,n,"sharedKey");var p,d=0|r._crypto_box_beforenmbytes();n.length!==d&&f(s,"invalid sharedKey length"),p=y(n),s.push(p);var b=new l(c+r._crypto_box_macbytes()|0),E=b.address;if(s.push(E),0==(0|r._crypto_box_easy_afternm(E,o,c,0,_,p))){var w=h(b,a);return v(s),w}g(s,"invalid usage")}function ae(e){var t=[];u(e);var n=new l(0|r._crypto_box_publickeybytes()),a=n.address;t.push(a);var s=new l(0|r._crypto_box_secretkeybytes()),o=s.address;if(t.push(o),0==(0|r._crypto_box_keypair(a,o))){var c={publicKey:h(n,e),privateKey:h(s,e),keyType:"x25519"};return v(t),c}g(t,"internal error")}function se(e,t,n,a,s,o){var c=[];u(o);var _=y(e=m(c,e,"ciphertext")),i=e.length;c.push(_),t=m(c,t,"mac");var p,d=0|r._crypto_box_macbytes();t.length!==d&&f(c,"invalid mac length"),p=y(t),c.push(p),n=m(c,n,"nonce");var b,E=0|r._crypto_box_noncebytes();n.length!==E&&f(c,"invalid nonce length"),b=y(n),c.push(b),a=m(c,a,"publicKey");var w,x=0|r._crypto_box_publickeybytes();a.length!==x&&f(c,"invalid publicKey length"),w=y(a),c.push(w),s=m(c,s,"privateKey");var S,k=0|r._crypto_box_secretkeybytes();s.length!==k&&f(c,"invalid privateKey length"),S=y(s),c.push(S);var T=new l(0|i),Y=T.address;if(c.push(Y),0==(0|r._crypto_box_open_detached(Y,_,p,i,0,b,w,S))){var B=h(T,o);return v(c),B}g(c,"incorrect key pair for the given ciphertext")}function oe(e,t,n,a,s){var o=[];u(s),e=m(o,e,"ciphertext");var c,_=r._crypto_box_macbytes(),i=e.length;i<_&&f(o,"ciphertext is too short"),c=y(e),o.push(c),t=m(o,t,"nonce");var p,d=0|r._crypto_box_noncebytes();t.length!==d&&f(o,"invalid nonce length"),p=y(t),o.push(p),n=m(o,n,"publicKey");var b,E=0|r._crypto_box_publickeybytes();n.length!==E&&f(o,"invalid publicKey length"),b=y(n),o.push(b),a=m(o,a,"privateKey");var w,x=0|r._crypto_box_secretkeybytes();a.length!==x&&f(o,"invalid privateKey length"),w=y(a),o.push(w);var S=new l(i-r._crypto_box_macbytes()|0),k=S.address;if(o.push(k),0==(0|r._crypto_box_open_easy(k,c,i,0,p,b,w))){var T=h(S,s);return v(o),T}g(o,"incorrect key pair for the given ciphertext")}function ce(e,t,n,a){var s=[];u(a);var o=y(e=m(s,e,"ciphertext")),c=e.length;s.push(o),t=m(s,t,"nonce");var _,i=0|r._crypto_box_noncebytes();t.length!==i&&f(s,"invalid nonce length"),_=y(t),s.push(_),n=m(s,n,"sharedKey");var p,d=0|r._crypto_box_beforenmbytes();n.length!==d&&f(s,"invalid sharedKey length"),p=y(n),s.push(p);var b=new l(c-r._crypto_box_macbytes()|0),E=b.address;if(s.push(E),0==(0|r._crypto_box_open_easy_afternm(E,o,c,0,_,p))){var w=h(b,a);return v(s),w}g(s,"incorrect secret key for the given ciphertext")}function _e(e,t,n){var a=[];u(n);var s=y(e=m(a,e,"message")),o=e.length;a.push(s),t=m(a,t,"publicKey");var c,_=0|r._crypto_box_publickeybytes();t.length!==_&&f(a,"invalid publicKey length"),c=y(t),a.push(c);var i=new l(o+r._crypto_box_sealbytes()|0),p=i.address;if(a.push(p),0==(0|r._crypto_box_seal(p,s,o,0,c))){var d=h(i,n);return v(a),d}g(a,"invalid usage")}function ie(e,t,n,a){var s=[];u(a),e=m(s,e,"ciphertext");var o,c=r._crypto_box_sealbytes(),_=e.length;_<c&&f(s,"ciphertext is too short"),o=y(e),s.push(o),t=m(s,t,"publicKey");var i,p=0|r._crypto_box_publickeybytes();t.length!==p&&f(s,"invalid publicKey length"),i=y(t),s.push(i),n=m(s,n,"privateKey");var d,b=0|r._crypto_box_secretkeybytes();n.length!==b&&f(s,"invalid privateKey length"),d=y(n),s.push(d);var E=new l(_-r._crypto_box_sealbytes()|0),w=E.address;if(s.push(w),0==(0|r._crypto_box_seal_open(w,o,_,0,i,d))){var x=h(E,a);return v(s),x}g(s,"incorrect key pair for the given ciphertext")}function he(e,t){var n=[];u(t),e=m(n,e,"seed");var a,s=0|r._crypto_box_seedbytes();e.length!==s&&f(n,"invalid seed length"),a=y(e),n.push(a);var o=new l(0|r._crypto_box_publickeybytes()),c=o.address;n.push(c);var _=new l(0|r._crypto_box_secretkeybytes()),i=_.address;if(n.push(i),0==(0|r._crypto_box_seed_keypair(c,i,a))){var p={publicKey:h(o,t),privateKey:h(_,t),keyType:"x25519"};return v(n),p}g(n,"invalid usage")}function pe(e,t,n){var a=[];u(n),e=m(a,e,"p");var s,o=0|r._crypto_core_ed25519_bytes();e.length!==o&&f(a,"invalid p length"),s=y(e),a.push(s),t=m(a,t,"q");var c,_=0|r._crypto_core_ed25519_bytes();t.length!==_&&f(a,"invalid q length"),c=y(t),a.push(c);var i=new l(0|r._crypto_core_ed25519_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_core_ed25519_add(p,s,c))){var d=h(i,n);return v(a),d}g(a,"input is an invalid element")}function ue(e,t){var n=[];u(t);var a=y(e=m(n,e,"r"));e.length,n.push(a);var s=new l(0|r._crypto_core_ed25519_bytes()),o=s.address;if(n.push(o),0==(0|r._crypto_core_ed25519_from_hash(o,a))){var c=h(s,t);return v(n),c}g(n,"invalid usage")}function le(e,t){var n=[];u(t);var a=y(e=m(n,e,"r"));e.length,n.push(a);var s=new l(0|r._crypto_core_ed25519_bytes()),o=s.address;if(n.push(o),0==(0|r._crypto_core_ed25519_from_uniform(o,a))){var c=h(s,t);return v(n),c}g(n,"invalid usage")}function ye(e,t){var n=[];u(t),e=m(n,e,"repr");var a,s=0|r._crypto_core_ed25519_bytes();e.length!==s&&f(n,"invalid repr length"),a=y(e),n.push(a);var o=1==(0|r._crypto_core_ed25519_is_valid_point(a));return v(n),o}function de(e){var t=[];u(e);var n=new l(0|r._crypto_core_ed25519_bytes()),a=n.address;t.push(a),r._crypto_core_ed25519_random(a);var s=h(n,e);return v(t),s}function ve(e,t,n){var a=[];u(n),e=m(a,e,"x");var s,o=0|r._crypto_core_ed25519_scalarbytes();e.length!==o&&f(a,"invalid x length"),s=y(e),a.push(s),t=m(a,t,"y");var c,_=0|r._crypto_core_ed25519_scalarbytes();t.length!==_&&f(a,"invalid y length"),c=y(t),a.push(c);var i=new l(0|r._crypto_core_ed25519_scalarbytes()),p=i.address;a.push(p),r._crypto_core_ed25519_scalar_add(p,s,c);var d=h(i,n);return v(a),d}function ge(e,t){var n=[];u(t),e=m(n,e,"s");var a,s=0|r._crypto_core_ed25519_scalarbytes();e.length!==s&&f(n,"invalid s length"),a=y(e),n.push(a);var o=new l(0|r._crypto_core_ed25519_scalarbytes()),c=o.address;n.push(c),r._crypto_core_ed25519_scalar_complement(c,a);var _=h(o,t);return v(n),_}function fe(e,t){var n=[];u(t),e=m(n,e,"s");var a,s=0|r._crypto_core_ed25519_scalarbytes();e.length!==s&&f(n,"invalid s length"),a=y(e),n.push(a);var o=new l(0|r._crypto_core_ed25519_scalarbytes()),c=o.address;if(n.push(c),0==(0|r._crypto_core_ed25519_scalar_invert(c,a))){var _=h(o,t);return v(n),_}g(n,"invalid reciprocate")}function be(e,t,n){var a=[];u(n),e=m(a,e,"x");var s,o=0|r._crypto_core_ed25519_scalarbytes();e.length!==o&&f(a,"invalid x length"),s=y(e),a.push(s),t=m(a,t,"y");var c,_=0|r._crypto_core_ed25519_scalarbytes();t.length!==_&&f(a,"invalid y length"),c=y(t),a.push(c);var i=new l(0|r._crypto_core_ed25519_scalarbytes()),p=i.address;a.push(p),r._crypto_core_ed25519_scalar_mul(p,s,c);var d=h(i,n);return v(a),d}function me(e,t){var n=[];u(t),e=m(n,e,"s");var a,s=0|r._crypto_core_ed25519_scalarbytes();e.length!==s&&f(n,"invalid s length"),a=y(e),n.push(a);var o=new l(0|r._crypto_core_ed25519_scalarbytes()),c=o.address;n.push(c),r._crypto_core_ed25519_scalar_negate(c,a);var _=h(o,t);return v(n),_}function Ee(e){var t=[];u(e);var n=new l(0|r._crypto_core_ed25519_scalarbytes()),a=n.address;t.push(a),r._crypto_core_ed25519_scalar_random(a);var s=h(n,e);return v(t),s}function we(e,t){var n=[];u(t),e=m(n,e,"sample");var a,s=0|r._crypto_core_ed25519_nonreducedscalarbytes();e.length!==s&&f(n,"invalid sample length"),a=y(e),n.push(a);var o=new l(0|r._crypto_core_ed25519_scalarbytes()),c=o.address;n.push(c),r._crypto_core_ed25519_scalar_reduce(c,a);var _=h(o,t);return v(n),_}function xe(e,t,n){var a=[];u(n),e=m(a,e,"x");var s,o=0|r._crypto_core_ed25519_scalarbytes();e.length!==o&&f(a,"invalid x length"),s=y(e),a.push(s),t=m(a,t,"y");var c,_=0|r._crypto_core_ed25519_scalarbytes();t.length!==_&&f(a,"invalid y length"),c=y(t),a.push(c);var i=new l(0|r._crypto_core_ed25519_scalarbytes()),p=i.address;a.push(p),r._crypto_core_ed25519_scalar_sub(p,s,c);var d=h(i,n);return v(a),d}function Se(e,t,n){var a=[];u(n),e=m(a,e,"p");var s,o=0|r._crypto_core_ed25519_bytes();e.length!==o&&f(a,"invalid p length"),s=y(e),a.push(s),t=m(a,t,"q");var c,_=0|r._crypto_core_ed25519_bytes();t.length!==_&&f(a,"invalid q length"),c=y(t),a.push(c);var i=new l(0|r._crypto_core_ed25519_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_core_ed25519_sub(p,s,c))){var d=h(i,n);return v(a),d}g(a,"input is an invalid element")}function ke(e,t,n,a){var s=[];u(a),e=m(s,e,"input");var o,c=0|r._crypto_core_hchacha20_inputbytes();e.length!==c&&f(s,"invalid input length"),o=y(e),s.push(o),t=m(s,t,"privateKey");var _,i=0|r._crypto_core_hchacha20_keybytes();t.length!==i&&f(s,"invalid privateKey length"),_=y(t),s.push(_);var p=null;null!=n&&(p=y(n=m(s,n,"constant")),n.length,s.push(p));var d=new l(0|r._crypto_core_hchacha20_outputbytes()),b=d.address;if(s.push(b),0==(0|r._crypto_core_hchacha20(b,o,_,p))){var E=h(d,a);return v(s),E}g(s,"invalid usage")}function Te(e,t,n,a){var s=[];u(a),e=m(s,e,"input");var o,c=0|r._crypto_core_hsalsa20_inputbytes();e.length!==c&&f(s,"invalid input length"),o=y(e),s.push(o),t=m(s,t,"privateKey");var _,i=0|r._crypto_core_hsalsa20_keybytes();t.length!==i&&f(s,"invalid privateKey length"),_=y(t),s.push(_);var p=null;null!=n&&(p=y(n=m(s,n,"constant")),n.length,s.push(p));var d=new l(0|r._crypto_core_hsalsa20_outputbytes()),b=d.address;if(s.push(b),0==(0|r._crypto_core_hsalsa20(b,o,_,p))){var E=h(d,a);return v(s),E}g(s,"invalid usage")}function Ye(e,t,n){var a=[];u(n),e=m(a,e,"p");var s,o=0|r._crypto_core_ristretto255_bytes();e.length!==o&&f(a,"invalid p length"),s=y(e),a.push(s),t=m(a,t,"q");var c,_=0|r._crypto_core_ristretto255_bytes();t.length!==_&&f(a,"invalid q length"),c=y(t),a.push(c);var i=new l(0|r._crypto_core_ristretto255_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_core_ristretto255_add(p,s,c))){var d=h(i,n);return v(a),d}g(a,"input is an invalid element")}function Be(e,t){var n=[];u(t);var a=y(e=m(n,e,"r"));e.length,n.push(a);var s=new l(0|r._crypto_core_ristretto255_bytes()),o=s.address;if(n.push(o),0==(0|r._crypto_core_ristretto255_from_hash(o,a))){var c=h(s,t);return v(n),c}g(n,"invalid usage")}function Ae(e,t){var n=[];u(t),e=m(n,e,"repr");var a,s=0|r._crypto_core_ristretto255_bytes();e.length!==s&&f(n,"invalid repr length"),a=y(e),n.push(a);var o=1==(0|r._crypto_core_ristretto255_is_valid_point(a));return v(n),o}function Me(e){var t=[];u(e);var n=new l(0|r._crypto_core_ristretto255_bytes()),a=n.address;t.push(a),r._crypto_core_ristretto255_random(a);var s=h(n,e);return v(t),s}function Ie(e,t,n){var a=[];u(n),e=m(a,e,"x");var s,o=0|r._crypto_core_ristretto255_scalarbytes();e.length!==o&&f(a,"invalid x length"),s=y(e),a.push(s),t=m(a,t,"y");var c,_=0|r._crypto_core_ristretto255_scalarbytes();t.length!==_&&f(a,"invalid y length"),c=y(t),a.push(c);var i=new l(0|r._crypto_core_ristretto255_scalarbytes()),p=i.address;a.push(p),r._crypto_core_ristretto255_scalar_add(p,s,c);var d=h(i,n);return v(a),d}function Ke(e,t){var n=[];u(t),e=m(n,e,"s");var a,s=0|r._crypto_core_ristretto255_scalarbytes();e.length!==s&&f(n,"invalid s length"),a=y(e),n.push(a);var o=new l(0|r._crypto_core_ristretto255_scalarbytes()),c=o.address;n.push(c),r._crypto_core_ristretto255_scalar_complement(c,a);var _=h(o,t);return v(n),_}function Ne(e,t){var n=[];u(t),e=m(n,e,"s");var a,s=0|r._crypto_core_ristretto255_scalarbytes();e.length!==s&&f(n,"invalid s length"),a=y(e),n.push(a);var o=new l(0|r._crypto_core_ristretto255_scalarbytes()),c=o.address;if(n.push(c),0==(0|r._crypto_core_ristretto255_scalar_invert(c,a))){var _=h(o,t);return v(n),_}g(n,"invalid reciprocate")}function Le(e,t,n){var a=[];u(n),e=m(a,e,"x");var s,o=0|r._crypto_core_ristretto255_scalarbytes();e.length!==o&&f(a,"invalid x length"),s=y(e),a.push(s),t=m(a,t,"y");var c,_=0|r._crypto_core_ristretto255_scalarbytes();t.length!==_&&f(a,"invalid y length"),c=y(t),a.push(c);var i=new l(0|r._crypto_core_ristretto255_scalarbytes()),p=i.address;a.push(p),r._crypto_core_ristretto255_scalar_mul(p,s,c);var d=h(i,n);return v(a),d}function Pe(e,t){var n=[];u(t),e=m(n,e,"s");var a,s=0|r._crypto_core_ristretto255_scalarbytes();e.length!==s&&f(n,"invalid s length"),a=y(e),n.push(a);var o=new l(0|r._crypto_core_ristretto255_scalarbytes()),c=o.address;n.push(c),r._crypto_core_ristretto255_scalar_negate(c,a);var _=h(o,t);return v(n),_}function Oe(e){var t=[];u(e);var n=new l(0|r._crypto_core_ristretto255_scalarbytes()),a=n.address;t.push(a),r._crypto_core_ristretto255_scalar_random(a);var s=h(n,e);return v(t),s}function Ue(e,t){var n=[];u(t),e=m(n,e,"sample");var a,s=0|r._crypto_core_ristretto255_nonreducedscalarbytes();e.length!==s&&f(n,"invalid sample length"),a=y(e),n.push(a);var o=new l(0|r._crypto_core_ristretto255_scalarbytes()),c=o.address;n.push(c),r._crypto_core_ristretto255_scalar_reduce(c,a);var _=h(o,t);return v(n),_}function Ce(e,t,n){var a=[];u(n),e=m(a,e,"x");var s,o=0|r._crypto_core_ristretto255_scalarbytes();e.length!==o&&f(a,"invalid x length"),s=y(e),a.push(s),t=m(a,t,"y");var c,_=0|r._crypto_core_ristretto255_scalarbytes();t.length!==_&&f(a,"invalid y length"),c=y(t),a.push(c);var i=new l(0|r._crypto_core_ristretto255_scalarbytes()),p=i.address;a.push(p),r._crypto_core_ristretto255_scalar_sub(p,s,c);var d=h(i,n);return v(a),d}function De(e,t,n){var a=[];u(n),e=m(a,e,"p");var s,o=0|r._crypto_core_ristretto255_bytes();e.length!==o&&f(a,"invalid p length"),s=y(e),a.push(s),t=m(a,t,"q");var c,_=0|r._crypto_core_ristretto255_bytes();t.length!==_&&f(a,"invalid q length"),c=y(t),a.push(c);var i=new l(0|r._crypto_core_ristretto255_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_core_ristretto255_sub(p,s,c))){var d=h(i,n);return v(a),d}g(a,"input is an invalid element")}function Re(e,t,n,a){var s=[];u(a),b(s,e,"hash_length"),("number"!=typeof e||(0|e)!==e||e<0)&&f(s,"hash_length must be an unsigned integer");var o=y(t=m(s,t,"message")),c=t.length;s.push(o);var _=null,i=0;null!=n&&(_=y(n=m(s,n,"key")),i=n.length,s.push(_));var p=new l(e|=0),d=p.address;if(s.push(d),0==(0|r._crypto_generichash(d,e,o,c,0,_,i))){var E=h(p,a);return v(s),E}g(s,"invalid usage")}function Ge(e,t,n,a,s){var o=[];u(s),b(o,e,"subkey_len"),("number"!=typeof e||(0|e)!==e||e<0)&&f(o,"subkey_len must be an unsigned integer");var c=null,_=0;null!=t&&(c=y(t=m(o,t,"key")),_=t.length,o.push(c)),n=m(o,n,"id");var i,p=0|r._crypto_generichash_blake2b_saltbytes();n.length!==p&&f(o,"invalid id length"),i=y(n),o.push(i),a=m(o,a,"ctx");var d,E=0|r._crypto_generichash_blake2b_personalbytes();a.length!==E&&f(o,"invalid ctx length"),d=y(a),o.push(d);var w=new l(0|e),x=w.address;if(o.push(x),0==(0|r._crypto_generichash_blake2b_salt_personal(x,e,null,0,0,c,_,i,d))){var S=h(w,s);return v(o),S}g(o,"invalid usage")}function Xe(e,t,n){var a=[];u(n),b(a,e,"state_address"),b(a,t,"hash_length"),("number"!=typeof t||(0|t)!==t||t<0)&&f(a,"hash_length must be an unsigned integer");var s=new l(t|=0),o=s.address;if(a.push(o),0==(0|r._crypto_generichash_final(e,o,t))){var c=(r._free(e),h(s,n));return v(a),c}g(a,"invalid usage")}function Fe(e,t,n){var a=[];u(n);var s=null,o=0;null!=e&&(s=y(e=m(a,e,"key")),o=e.length,a.push(s)),b(a,t,"hash_length"),("number"!=typeof t||(0|t)!==t||t<0)&&f(a,"hash_length must be an unsigned integer");var c=new l(357).address;if(0==(0|r._crypto_generichash_init(c,s,o,t))){var _=c;return v(a),_}g(a,"invalid usage")}function Ve(e){var t=[];u(e);var n=new l(0|r._crypto_generichash_keybytes()),a=n.address;t.push(a),r._crypto_generichash_keygen(a);var s=h(n,e);return v(t),s}function qe(e,t,n){var a=[];u(n),b(a,e,"state_address");var s=y(t=m(a,t,"message_chunk")),o=t.length;a.push(s),0!=(0|r._crypto_generichash_update(e,s,o))&&g(a,"invalid usage"),v(a)}function je(e,t){var n=[];u(t);var a=y(e=m(n,e,"message")),s=e.length;n.push(a);var o=new l(0|r._crypto_hash_bytes()),c=o.address;if(n.push(c),0==(0|r._crypto_hash(c,a,s,0))){var _=h(o,t);return v(n),_}g(n,"invalid usage")}function He(e,t){var n=[];u(t);var a=y(e=m(n,e,"message")),s=e.length;n.push(a);var o=new l(0|r._crypto_hash_sha256_bytes()),c=o.address;if(n.push(c),0==(0|r._crypto_hash_sha256(c,a,s,0))){var _=h(o,t);return v(n),_}g(n,"invalid usage")}function ze(e,t){var n=[];u(t),b(n,e,"state_address");var a=new l(0|r._crypto_hash_sha256_bytes()),s=a.address;if(n.push(s),0==(0|r._crypto_hash_sha256_final(e,s))){var o=(r._free(e),h(a,t));return v(n),o}g(n,"invalid usage")}function We(e){var t=[];u(e);var n=new l(104).address;if(0==(0|r._crypto_hash_sha256_init(n))){var a=n;return v(t),a}g(t,"invalid usage")}function Ze(e,t,n){var a=[];u(n),b(a,e,"state_address");var s=y(t=m(a,t,"message_chunk")),o=t.length;a.push(s),0!=(0|r._crypto_hash_sha256_update(e,s,o))&&g(a,"invalid usage"),v(a)}function Je(e,t){var n=[];u(t);var a=y(e=m(n,e,"message")),s=e.length;n.push(a);var o=new l(0|r._crypto_hash_sha512_bytes()),c=o.address;if(n.push(c),0==(0|r._crypto_hash_sha512(c,a,s,0))){var _=h(o,t);return v(n),_}g(n,"invalid usage")}function Qe(e,t){var n=[];u(t),b(n,e,"state_address");var a=new l(0|r._crypto_hash_sha512_bytes()),s=a.address;if(n.push(s),0==(0|r._crypto_hash_sha512_final(e,s))){var o=(r._free(e),h(a,t));return v(n),o}g(n,"invalid usage")}function $e(e){var t=[];u(e);var n=new l(208).address;if(0==(0|r._crypto_hash_sha512_init(n))){var a=n;return v(t),a}g(t,"invalid usage")}function et(e,t,n){var a=[];u(n),b(a,e,"state_address");var s=y(t=m(a,t,"message_chunk")),o=t.length;a.push(s),0!=(0|r._crypto_hash_sha512_update(e,s,o))&&g(a,"invalid usage"),v(a)}function tt(e,t,n,s,o){var c=[];u(o),b(c,e,"subkey_len"),("number"!=typeof e||(0|e)!==e||e<0)&&f(c,"subkey_len must be an unsigned integer"),b(c,t,"subkey_id"),("number"!=typeof t||(0|t)!==t||t<0)&&f(c,"subkey_id must be an unsigned integer"),"string"!=typeof n&&f(c,"ctx must be a string"),n=a(n+"\0"),null!=i&&n.length-1!==i&&f(c,"invalid ctx length");var _=y(n),i=n.length-1;c.push(_),s=m(c,s,"key");var p,d=0|r._crypto_kdf_keybytes();s.length!==d&&f(c,"invalid key length"),p=y(s),c.push(p);var g=new l(0|e),E=g.address;c.push(E),r._crypto_kdf_derive_from_key(E,e,t,t>>>24>>>8,_,p);var w=h(g,o);return v(c),w}function rt(e){var t=[];u(e);var n=new l(0|r._crypto_kdf_keybytes()),a=n.address;t.push(a),r._crypto_kdf_keygen(a);var s=h(n,e);return v(t),s}function nt(e,t,n,a){var s=[];u(a),e=m(s,e,"clientPublicKey");var o,c=0|r._crypto_kx_publickeybytes();e.length!==c&&f(s,"invalid clientPublicKey length"),o=y(e),s.push(o),t=m(s,t,"clientSecretKey");var _,i=0|r._crypto_kx_secretkeybytes();t.length!==i&&f(s,"invalid clientSecretKey length"),_=y(t),s.push(_),n=m(s,n,"serverPublicKey");var p,d=0|r._crypto_kx_publickeybytes();n.length!==d&&f(s,"invalid serverPublicKey length"),p=y(n),s.push(p);var b=new l(0|r._crypto_kx_sessionkeybytes()),E=b.address;s.push(E);var w=new l(0|r._crypto_kx_sessionkeybytes()),x=w.address;if(s.push(x),0==(0|r._crypto_kx_client_session_keys(E,x,o,_,p))){var S=h({sharedRx:b,sharedTx:w},a);return v(s),S}g(s,"invalid usage")}function at(e){var t=[];u(e);var n=new l(0|r._crypto_kx_publickeybytes()),a=n.address;t.push(a);var s=new l(0|r._crypto_kx_secretkeybytes()),o=s.address;if(t.push(o),0==(0|r._crypto_kx_keypair(a,o))){var c={publicKey:h(n,e),privateKey:h(s,e),keyType:"x25519"};return v(t),c}g(t,"internal error")}function st(e,t){var n=[];u(t),e=m(n,e,"seed");var a,s=0|r._crypto_kx_seedbytes();e.length!==s&&f(n,"invalid seed length"),a=y(e),n.push(a);var o=new l(0|r._crypto_kx_publickeybytes()),c=o.address;n.push(c);var _=new l(0|r._crypto_kx_secretkeybytes()),i=_.address;if(n.push(i),0==(0|r._crypto_kx_seed_keypair(c,i,a))){var p={publicKey:h(o,t),privateKey:h(_,t),keyType:"x25519"};return v(n),p}g(n,"internal error")}function ot(e,t,n,a){var s=[];u(a),e=m(s,e,"serverPublicKey");var o,c=0|r._crypto_kx_publickeybytes();e.length!==c&&f(s,"invalid serverPublicKey length"),o=y(e),s.push(o),t=m(s,t,"serverSecretKey");var _,i=0|r._crypto_kx_secretkeybytes();t.length!==i&&f(s,"invalid serverSecretKey length"),_=y(t),s.push(_),n=m(s,n,"clientPublicKey");var p,d=0|r._crypto_kx_publickeybytes();n.length!==d&&f(s,"invalid clientPublicKey length"),p=y(n),s.push(p);var b=new l(0|r._crypto_kx_sessionkeybytes()),E=b.address;s.push(E);var w=new l(0|r._crypto_kx_sessionkeybytes()),x=w.address;if(s.push(x),0==(0|r._crypto_kx_server_session_keys(E,x,o,_,p))){var S=h({sharedRx:b,sharedTx:w},a);return v(s),S}g(s,"invalid usage")}function ct(e,t,n){var a=[];u(n);var s=y(e=m(a,e,"message")),o=e.length;a.push(s),t=m(a,t,"key");var c,_=0|r._crypto_onetimeauth_keybytes();t.length!==_&&f(a,"invalid key length"),c=y(t),a.push(c);var i=new l(0|r._crypto_onetimeauth_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_onetimeauth(p,s,o,0,c))){var d=h(i,n);return v(a),d}g(a,"invalid usage")}function _t(e,t){var n=[];u(t),b(n,e,"state_address");var a=new l(0|r._crypto_onetimeauth_bytes()),s=a.address;if(n.push(s),0==(0|r._crypto_onetimeauth_final(e,s))){var o=(r._free(e),h(a,t));return v(n),o}g(n,"invalid usage")}function it(e,t){var n=[];u(t);var a=null;null!=e&&(a=y(e=m(n,e,"key")),e.length,n.push(a));var s=new l(144).address;if(0==(0|r._crypto_onetimeauth_init(s,a))){var o=s;return v(n),o}g(n,"invalid usage")}function ht(e){var t=[];u(e);var n=new l(0|r._crypto_onetimeauth_keybytes()),a=n.address;t.push(a),r._crypto_onetimeauth_keygen(a);var s=h(n,e);return v(t),s}function pt(e,t,n){var a=[];u(n),b(a,e,"state_address");var s=y(t=m(a,t,"message_chunk")),o=t.length;a.push(s),0!=(0|r._crypto_onetimeauth_update(e,s,o))&&g(a,"invalid usage"),v(a)}function ut(e,t,n){var a=[];e=m(a,e,"hash");var s,o=0|r._crypto_onetimeauth_bytes();e.length!==o&&f(a,"invalid hash length"),s=y(e),a.push(s);var c=y(t=m(a,t,"message")),_=t.length;a.push(c),n=m(a,n,"key");var i,h=0|r._crypto_onetimeauth_keybytes();n.length!==h&&f(a,"invalid key length"),i=y(n),a.push(i);var p=0==(0|r._crypto_onetimeauth_verify(s,c,_,0,i));return v(a),p}function lt(e,t,n,a,s,o,c){var _=[];u(c),b(_,e,"keyLength"),("number"!=typeof e||(0|e)!==e||e<0)&&f(_,"keyLength must be an unsigned integer");var i=y(t=m(_,t,"password")),p=t.length;_.push(i),n=m(_,n,"salt");var d,E=0|r._crypto_pwhash_saltbytes();n.length!==E&&f(_,"invalid salt length"),d=y(n),_.push(d),b(_,a,"opsLimit"),("number"!=typeof a||(0|a)!==a||a<0)&&f(_,"opsLimit must be an unsigned integer"),b(_,s,"memLimit"),("number"!=typeof s||(0|s)!==s||s<0)&&f(_,"memLimit must be an unsigned integer"),b(_,o,"algorithm"),("number"!=typeof o||(0|o)!==o||o<0)&&f(_,"algorithm must be an unsigned integer");var w=new l(0|e),x=w.address;if(_.push(x),0==(0|r._crypto_pwhash(x,e,0,i,p,0,d,a,0,s,o))){var S=h(w,c);return v(_),S}g(_,"invalid usage")}function yt(e,t,n,a,s,o){var c=[];u(o),b(c,e,"keyLength"),("number"!=typeof e||(0|e)!==e||e<0)&&f(c,"keyLength must be an unsigned integer");var _=y(t=m(c,t,"password")),i=t.length;c.push(_),n=m(c,n,"salt");var p,d=0|r._crypto_pwhash_scryptsalsa208sha256_saltbytes();n.length!==d&&f(c,"invalid salt length"),p=y(n),c.push(p),b(c,a,"opsLimit"),("number"!=typeof a||(0|a)!==a||a<0)&&f(c,"opsLimit must be an unsigned integer"),b(c,s,"memLimit"),("number"!=typeof s||(0|s)!==s||s<0)&&f(c,"memLimit must be an unsigned integer");var E=new l(0|e),w=E.address;if(c.push(w),0==(0|r._crypto_pwhash_scryptsalsa208sha256(w,e,0,_,i,0,p,a,0,s))){var x=h(E,o);return v(c),x}g(c,"invalid usage")}function dt(e,t,n,a,s,o,c){var _=[];u(c);var i=y(e=m(_,e,"password")),p=e.length;_.push(i);var d=y(t=m(_,t,"salt")),E=t.length;_.push(d),b(_,n,"opsLimit"),("number"!=typeof n||(0|n)!==n||n<0)&&f(_,"opsLimit must be an unsigned integer"),b(_,a,"r"),("number"!=typeof a||(0|a)!==a||a<0)&&f(_,"r must be an unsigned integer"),b(_,s,"p"),("number"!=typeof s||(0|s)!==s||s<0)&&f(_,"p must be an unsigned integer"),b(_,o,"keyLength"),("number"!=typeof o||(0|o)!==o||o<0)&&f(_,"keyLength must be an unsigned integer");var w=new l(0|o),x=w.address;if(_.push(x),0==(0|r._crypto_pwhash_scryptsalsa208sha256_ll(i,p,d,E,n,0,a,s,x,o))){var S=h(w,c);return v(_),S}g(_,"invalid usage")}function vt(e,t,n,a){var s=[];u(a);var o=y(e=m(s,e,"password")),c=e.length;s.push(o),b(s,t,"opsLimit"),("number"!=typeof t||(0|t)!==t||t<0)&&f(s,"opsLimit must be an unsigned integer"),b(s,n,"memLimit"),("number"!=typeof n||(0|n)!==n||n<0)&&f(s,"memLimit must be an unsigned integer");var _=new l(0|r._crypto_pwhash_scryptsalsa208sha256_strbytes()).address;if(s.push(_),0==(0|r._crypto_pwhash_scryptsalsa208sha256_str(_,o,c,0,t,0,n))){var i=r.UTF8ToString(_);return v(s),i}g(s,"invalid usage")}function gt(e,t,n){var s=[];u(n),"string"!=typeof e&&f(s,"hashed_password must be a string"),e=a(e+"\0"),null!=c&&e.length-1!==c&&f(s,"invalid hashed_password length");var o=y(e),c=e.length-1;s.push(o);var _=y(t=m(s,t,"password")),i=t.length;s.push(_);var h=0==(0|r._crypto_pwhash_scryptsalsa208sha256_str_verify(o,_,i,0));return v(s),h}function ft(e,t,n,a){var s=[];u(a);var o=y(e=m(s,e,"password")),c=e.length;s.push(o),b(s,t,"opsLimit"),("number"!=typeof t||(0|t)!==t||t<0)&&f(s,"opsLimit must be an unsigned integer"),b(s,n,"memLimit"),("number"!=typeof n||(0|n)!==n||n<0)&&f(s,"memLimit must be an unsigned integer");var _=new l(0|r._crypto_pwhash_strbytes()).address;if(s.push(_),0==(0|r._crypto_pwhash_str(_,o,c,0,t,0,n))){var i=r.UTF8ToString(_);return v(s),i}g(s,"invalid usage")}function bt(e,t,n,s){var o=[];u(s),"string"!=typeof e&&f(o,"hashed_password must be a string"),e=a(e+"\0"),null!=_&&e.length-1!==_&&f(o,"invalid hashed_password length");var c=y(e),_=e.length-1;o.push(c),b(o,t,"opsLimit"),("number"!=typeof t||(0|t)!==t||t<0)&&f(o,"opsLimit must be an unsigned integer"),b(o,n,"memLimit"),("number"!=typeof n||(0|n)!==n||n<0)&&f(o,"memLimit must be an unsigned integer");var i=0!=(0|r._crypto_pwhash_str_needs_rehash(c,t,0,n));return v(o),i}function mt(e,t,n){var s=[];u(n),"string"!=typeof e&&f(s,"hashed_password must be a string"),e=a(e+"\0"),null!=c&&e.length-1!==c&&f(s,"invalid hashed_password length");var o=y(e),c=e.length-1;s.push(o);var _=y(t=m(s,t,"password")),i=t.length;s.push(_);var h=0==(0|r._crypto_pwhash_str_verify(o,_,i,0));return v(s),h}function Et(e,t,n){var a=[];u(n),e=m(a,e,"privateKey");var s,o=0|r._crypto_scalarmult_scalarbytes();e.length!==o&&f(a,"invalid privateKey length"),s=y(e),a.push(s),t=m(a,t,"publicKey");var c,_=0|r._crypto_scalarmult_bytes();t.length!==_&&f(a,"invalid publicKey length"),c=y(t),a.push(c);var i=new l(0|r._crypto_scalarmult_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_scalarmult(p,s,c))){var d=h(i,n);return v(a),d}g(a,"weak public key")}function wt(e,t){var n=[];u(t),e=m(n,e,"privateKey");var a,s=0|r._crypto_scalarmult_scalarbytes();e.length!==s&&f(n,"invalid privateKey length"),a=y(e),n.push(a);var o=new l(0|r._crypto_scalarmult_bytes()),c=o.address;if(n.push(c),0==(0|r._crypto_scalarmult_base(c,a))){var _=h(o,t);return v(n),_}g(n,"unknown error")}function xt(e,t,n){var a=[];u(n),e=m(a,e,"n");var s,o=0|r._crypto_scalarmult_ed25519_scalarbytes();e.length!==o&&f(a,"invalid n length"),s=y(e),a.push(s),t=m(a,t,"p");var c,_=0|r._crypto_scalarmult_ed25519_bytes();t.length!==_&&f(a,"invalid p length"),c=y(t),a.push(c);var i=new l(0|r._crypto_scalarmult_ed25519_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_scalarmult_ed25519(p,s,c))){var d=h(i,n);return v(a),d}g(a,"invalid point or scalar is 0")}function St(e,t){var n=[];u(t),e=m(n,e,"scalar");var a,s=0|r._crypto_scalarmult_ed25519_scalarbytes();e.length!==s&&f(n,"invalid scalar length"),a=y(e),n.push(a);var o=new l(0|r._crypto_scalarmult_ed25519_bytes()),c=o.address;if(n.push(c),0==(0|r._crypto_scalarmult_ed25519_base(c,a))){var _=h(o,t);return v(n),_}g(n,"scalar is 0")}function kt(e,t){var n=[];u(t),e=m(n,e,"scalar");var a,s=0|r._crypto_scalarmult_ed25519_scalarbytes();e.length!==s&&f(n,"invalid scalar length"),a=y(e),n.push(a);var o=new l(0|r._crypto_scalarmult_ed25519_bytes()),c=o.address;if(n.push(c),0==(0|r._crypto_scalarmult_ed25519_base_noclamp(c,a))){var _=h(o,t);return v(n),_}g(n,"scalar is 0")}function Tt(e,t,n){var a=[];u(n),e=m(a,e,"n");var s,o=0|r._crypto_scalarmult_ed25519_scalarbytes();e.length!==o&&f(a,"invalid n length"),s=y(e),a.push(s),t=m(a,t,"p");var c,_=0|r._crypto_scalarmult_ed25519_bytes();t.length!==_&&f(a,"invalid p length"),c=y(t),a.push(c);var i=new l(0|r._crypto_scalarmult_ed25519_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_scalarmult_ed25519_noclamp(p,s,c))){var d=h(i,n);return v(a),d}g(a,"invalid point or scalar is 0")}function Yt(e,t,n){var a=[];u(n),e=m(a,e,"scalar");var s,o=0|r._crypto_scalarmult_ristretto255_scalarbytes();e.length!==o&&f(a,"invalid scalar length"),s=y(e),a.push(s),t=m(a,t,"element");var c,_=0|r._crypto_scalarmult_ristretto255_bytes();t.length!==_&&f(a,"invalid element length"),c=y(t),a.push(c);var i=new l(0|r._crypto_scalarmult_ristretto255_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_scalarmult_ristretto255(p,s,c))){var d=h(i,n);return v(a),d}g(a,"result is identity element")}function Bt(e,t){var n=[];u(t),e=m(n,e,"scalar");var a,s=0|r._crypto_core_ristretto255_scalarbytes();e.length!==s&&f(n,"invalid scalar length"),a=y(e),n.push(a);var o=new l(0|r._crypto_core_ristretto255_bytes()),c=o.address;if(n.push(c),0==(0|r._crypto_scalarmult_ristretto255_base(c,a))){var _=h(o,t);return v(n),_}g(n,"scalar is 0")}function At(e,t,n,a){var s=[];u(a);var o=y(e=m(s,e,"message")),c=e.length;s.push(o),t=m(s,t,"nonce");var _,i=0|r._crypto_secretbox_noncebytes();t.length!==i&&f(s,"invalid nonce length"),_=y(t),s.push(_),n=m(s,n,"key");var p,d=0|r._crypto_secretbox_keybytes();n.length!==d&&f(s,"invalid key length"),p=y(n),s.push(p);var b=new l(0|c),E=b.address;s.push(E);var w=new l(0|r._crypto_secretbox_macbytes()),x=w.address;if(s.push(x),0==(0|r._crypto_secretbox_detached(E,x,o,c,0,_,p))){var S=h({mac:w,cipher:b},a);return v(s),S}g(s,"invalid usage")}function Mt(e,t,n,a){var s=[];u(a);var o=y(e=m(s,e,"message")),c=e.length;s.push(o),t=m(s,t,"nonce");var _,i=0|r._crypto_secretbox_noncebytes();t.length!==i&&f(s,"invalid nonce length"),_=y(t),s.push(_),n=m(s,n,"key");var p,d=0|r._crypto_secretbox_keybytes();n.length!==d&&f(s,"invalid key length"),p=y(n),s.push(p);var b=new l(c+r._crypto_secretbox_macbytes()|0),E=b.address;if(s.push(E),0==(0|r._crypto_secretbox_easy(E,o,c,0,_,p))){var w=h(b,a);return v(s),w}g(s,"invalid usage")}function It(e){var t=[];u(e);var n=new l(0|r._crypto_secretbox_keybytes()),a=n.address;t.push(a),r._crypto_secretbox_keygen(a);var s=h(n,e);return v(t),s}function Kt(e,t,n,a,s){var o=[];u(s);var c=y(e=m(o,e,"ciphertext")),_=e.length;o.push(c),t=m(o,t,"mac");var i,p=0|r._crypto_secretbox_macbytes();t.length!==p&&f(o,"invalid mac length"),i=y(t),o.push(i),n=m(o,n,"nonce");var d,b=0|r._crypto_secretbox_noncebytes();n.length!==b&&f(o,"invalid nonce length"),d=y(n),o.push(d),a=m(o,a,"key");var E,w=0|r._crypto_secretbox_keybytes();a.length!==w&&f(o,"invalid key length"),E=y(a),o.push(E);var x=new l(0|_),S=x.address;if(o.push(S),0==(0|r._crypto_secretbox_open_detached(S,c,i,_,0,d,E))){var k=h(x,s);return v(o),k}g(o,"wrong secret key for the given ciphertext")}function Nt(e,t,n,a){var s=[];u(a),e=m(s,e,"ciphertext");var o,c=r._crypto_secretbox_macbytes(),_=e.length;_<c&&f(s,"ciphertext is too short"),o=y(e),s.push(o),t=m(s,t,"nonce");var i,p=0|r._crypto_secretbox_noncebytes();t.length!==p&&f(s,"invalid nonce length"),i=y(t),s.push(i),n=m(s,n,"key");var d,b=0|r._crypto_secretbox_keybytes();n.length!==b&&f(s,"invalid key length"),d=y(n),s.push(d);var E=new l(_-r._crypto_secretbox_macbytes()|0),w=E.address;if(s.push(w),0==(0|r._crypto_secretbox_open_easy(w,o,_,0,i,d))){var x=h(E,a);return v(s),x}g(s,"wrong secret key for the given ciphertext")}function Lt(e,t,n){var a=[];u(n),e=m(a,e,"header");var s,o=0|r._crypto_secretstream_xchacha20poly1305_headerbytes();e.length!==o&&f(a,"invalid header length"),s=y(e),a.push(s),t=m(a,t,"key");var c,_=0|r._crypto_secretstream_xchacha20poly1305_keybytes();t.length!==_&&f(a,"invalid key length"),c=y(t),a.push(c);var i=new l(52).address;if(0==(0|r._crypto_secretstream_xchacha20poly1305_init_pull(i,s,c))){var h=i;return v(a),h}g(a,"invalid usage")}function Pt(e,t){var n=[];u(t),e=m(n,e,"key");var a,s=0|r._crypto_secretstream_xchacha20poly1305_keybytes();e.length!==s&&f(n,"invalid key length"),a=y(e),n.push(a);var o=new l(52).address,c=new l(0|r._crypto_secretstream_xchacha20poly1305_headerbytes()),_=c.address;if(n.push(_),0==(0|r._crypto_secretstream_xchacha20poly1305_init_push(o,_,a))){var i={state:o,header:h(c,t)};return v(n),i}g(n,"invalid usage")}function Ot(e){var t=[];u(e);var n=new l(0|r._crypto_secretstream_xchacha20poly1305_keybytes()),a=n.address;t.push(a),r._crypto_secretstream_xchacha20poly1305_keygen(a);var s=h(n,e);return v(t),s}function Ut(e,t,n,a){var s=[];u(a),b(s,e,"state_address"),t=m(s,t,"cipher");var o,c=r._crypto_secretstream_xchacha20poly1305_abytes(),_=t.length;_<c&&f(s,"cipher is too short"),o=y(t),s.push(o);var i=null,p=0;null!=n&&(i=y(n=m(s,n,"ad")),p=n.length,s.push(i));var g=new l(_-r._crypto_secretstream_xchacha20poly1305_abytes()|0),E=g.address;s.push(E);var w,x=(w=d(1),s.push(w),(x=0===r._crypto_secretstream_xchacha20poly1305_pull(e,E,0,w,o,_,0,i,p)&&{tag:r.HEAPU8[w],message:g})&&{message:h(x.message,a),tag:x.tag});return v(s),x}function Ct(e,t,n,a,s){var o=[];u(s),b(o,e,"state_address");var c=y(t=m(o,t,"message_chunk")),_=t.length;o.push(c);var i=null,p=0;null!=n&&(i=y(n=m(o,n,"ad")),p=n.length,o.push(i)),b(o,a,"tag"),("number"!=typeof a||(0|a)!==a||a<0)&&f(o,"tag must be an unsigned integer");var d=new l(_+r._crypto_secretstream_xchacha20poly1305_abytes()|0),E=d.address;if(o.push(E),0==(0|r._crypto_secretstream_xchacha20poly1305_push(e,E,0,c,_,0,i,p,0,a))){var w=h(d,s);return v(o),w}g(o,"invalid usage")}function Dt(e,t){var n=[];return u(t),b(n,e,"state_address"),r._crypto_secretstream_xchacha20poly1305_rekey(e),v(n),!0}function Rt(e,t,n){var a=[];u(n);var s=y(e=m(a,e,"message")),o=e.length;a.push(s),t=m(a,t,"key");var c,_=0|r._crypto_shorthash_keybytes();t.length!==_&&f(a,"invalid key length"),c=y(t),a.push(c);var i=new l(0|r._crypto_shorthash_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_shorthash(p,s,o,0,c))){var d=h(i,n);return v(a),d}g(a,"invalid usage")}function Gt(e){var t=[];u(e);var n=new l(0|r._crypto_shorthash_keybytes()),a=n.address;t.push(a),r._crypto_shorthash_keygen(a);var s=h(n,e);return v(t),s}function Xt(e,t,n){var a=[];u(n);var s=y(e=m(a,e,"message")),o=e.length;a.push(s),t=m(a,t,"key");var c,_=0|r._crypto_shorthash_siphashx24_keybytes();t.length!==_&&f(a,"invalid key length"),c=y(t),a.push(c);var i=new l(0|r._crypto_shorthash_siphashx24_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_shorthash_siphashx24(p,s,o,0,c))){var d=h(i,n);return v(a),d}g(a,"invalid usage")}function Ft(e,t,n){var a=[];u(n);var s=y(e=m(a,e,"message")),o=e.length;a.push(s),t=m(a,t,"privateKey");var c,_=0|r._crypto_sign_secretkeybytes();t.length!==_&&f(a,"invalid privateKey length"),c=y(t),a.push(c);var i=new l(e.length+r._crypto_sign_bytes()|0),p=i.address;if(a.push(p),0==(0|r._crypto_sign(p,null,s,o,0,c))){var d=h(i,n);return v(a),d}g(a,"invalid usage")}function Vt(e,t,n){var a=[];u(n);var s=y(e=m(a,e,"message")),o=e.length;a.push(s),t=m(a,t,"privateKey");var c,_=0|r._crypto_sign_secretkeybytes();t.length!==_&&f(a,"invalid privateKey length"),c=y(t),a.push(c);var i=new l(0|r._crypto_sign_bytes()),p=i.address;if(a.push(p),0==(0|r._crypto_sign_detached(p,null,s,o,0,c))){var d=h(i,n);return v(a),d}g(a,"invalid usage")}function qt(e,t){var n=[];u(t),e=m(n,e,"edPk");var a,s=0|r._crypto_sign_publickeybytes();e.length!==s&&f(n,"invalid edPk length"),a=y(e),n.push(a);var o=new l(0|r._crypto_scalarmult_scalarbytes()),c=o.address;if(n.push(c),0==(0|r._crypto_sign_ed25519_pk_to_curve25519(c,a))){var _=h(o,t);return v(n),_}g(n,"invalid key")}function jt(e,t){var n=[];u(t),e=m(n,e,"edSk");var a,s=0|r._crypto_sign_secretkeybytes();e.length!==s&&f(n,"invalid edSk length"),a=y(e),n.push(a);var o=new l(0|r._crypto_scalarmult_scalarbytes()),c=o.address;if(n.push(c),0==(0|r._crypto_sign_ed25519_sk_to_curve25519(c,a))){var _=h(o,t);return v(n),_}g(n,"invalid key")}function Ht(e,t){var n=[];u(t),e=m(n,e,"privateKey");var a,s=0|r._crypto_sign_secretkeybytes();e.length!==s&&f(n,"invalid privateKey length"),a=y(e),n.push(a);var o=new l(0|r._crypto_sign_publickeybytes()),c=o.address;if(n.push(c),0==(0|r._crypto_sign_ed25519_sk_to_pk(c,a))){var _=h(o,t);return v(n),_}g(n,"invalid key")}function zt(e,t){var n=[];u(t),e=m(n,e,"privateKey");var a,s=0|r._crypto_sign_secretkeybytes();e.length!==s&&f(n,"invalid privateKey length"),a=y(e),n.push(a);var o=new l(0|r._crypto_sign_seedbytes()),c=o.address;if(n.push(c),0==(0|r._crypto_sign_ed25519_sk_to_seed(c,a))){var _=h(o,t);return v(n),_}g(n,"invalid key")}function Wt(e,t,n){var a=[];u(n),b(a,e,"state_address"),t=m(a,t,"privateKey");var s,o=0|r._crypto_sign_secretkeybytes();t.length!==o&&f(a,"invalid privateKey length"),s=y(t),a.push(s);var c=new l(0|r._crypto_sign_bytes()),_=c.address;if(a.push(_),0==(0|r._crypto_sign_final_create(e,_,null,s))){var i=(r._free(e),h(c,n));return v(a),i}g(a,"invalid usage")}function Zt(e,t,n,a){var s=[];u(a),b(s,e,"state_address"),t=m(s,t,"signature");var o,c=0|r._crypto_sign_bytes();t.length!==c&&f(s,"invalid signature length"),o=y(t),s.push(o),n=m(s,n,"publicKey");var _,i=0|r._crypto_sign_publickeybytes();n.length!==i&&f(s,"invalid publicKey length"),_=y(n),s.push(_);var h=0==(0|r._crypto_sign_final_verify(e,o,_));return v(s),h}function Jt(e){var t=[];u(e);var n=new l(208).address;if(0==(0|r._crypto_sign_init(n))){var a=n;return v(t),a}g(t,"internal error")}function Qt(e){var t=[];u(e);var n=new l(0|r._crypto_sign_publickeybytes()),a=n.address;t.push(a);var s=new l(0|r._crypto_sign_secretkeybytes()),o=s.address;if(t.push(o),0==(0|r._crypto_sign_keypair(a,o))){var c={publicKey:h(n,e),privateKey:h(s,e),keyType:"ed25519"};return v(t),c}g(t,"internal error")}function $t(e,t,n){var a=[];u(n),e=m(a,e,"signedMessage");var s,o=r._crypto_sign_bytes(),c=e.length;c<o&&f(a,"signedMessage is too short"),s=y(e),a.push(s),t=m(a,t,"publicKey");var _,i=0|r._crypto_sign_publickeybytes();t.length!==i&&f(a,"invalid publicKey length"),_=y(t),a.push(_);var p=new l(c-r._crypto_sign_bytes()|0),d=p.address;if(a.push(d),0==(0|r._crypto_sign_open(d,null,s,c,0,_))){var b=h(p,n);return v(a),b}g(a,"incorrect signature for the given public key")}function er(e,t){var n=[];u(t),e=m(n,e,"seed");var a,s=0|r._crypto_sign_seedbytes();e.length!==s&&f(n,"invalid seed length"),a=y(e),n.push(a);var o=new l(0|r._crypto_sign_publickeybytes()),c=o.address;n.push(c);var _=new l(0|r._crypto_sign_secretkeybytes()),i=_.address;if(n.push(i),0==(0|r._crypto_sign_seed_keypair(c,i,a))){var p={publicKey:h(o,t),privateKey:h(_,t),keyType:"ed25519"};return v(n),p}g(n,"invalid usage")}function tr(e,t,n){var a=[];u(n),b(a,e,"state_address");var s=y(t=m(a,t,"message_chunk")),o=t.length;a.push(s),0!=(0|r._crypto_sign_update(e,s,o,0))&&g(a,"invalid usage"),v(a)}function rr(e,t,n){var a=[];e=m(a,e,"signature");var s,o=0|r._crypto_sign_bytes();e.length!==o&&f(a,"invalid signature length"),s=y(e),a.push(s);var c=y(t=m(a,t,"message")),_=t.length;a.push(c),n=m(a,n,"publicKey");var i,h=0|r._crypto_sign_publickeybytes();n.length!==h&&f(a,"invalid publicKey length"),i=y(n),a.push(i);var p=0==(0|r._crypto_sign_verify_detached(s,c,_,0,i));return v(a),p}function nr(e,t,n,a){var s=[];u(a),b(s,e,"outLength"),("number"!=typeof e||(0|e)!==e||e<0)&&f(s,"outLength must be an unsigned integer"),t=m(s,t,"key");var o,c=0|r._crypto_stream_chacha20_keybytes();t.length!==c&&f(s,"invalid key length"),o=y(t),s.push(o),n=m(s,n,"nonce");var _,i=0|r._crypto_stream_chacha20_noncebytes();n.length!==i&&f(s,"invalid nonce length"),_=y(n),s.push(_);var p=new l(0|e),d=p.address;s.push(d),r._crypto_stream_chacha20(d,e,0,_,o);var g=h(p,a);return v(s),g}function ar(e,t,n,a){var s=[];u(a);var o=y(e=m(s,e,"input_message")),c=e.length;s.push(o),t=m(s,t,"nonce");var _,i=0|r._crypto_stream_chacha20_ietf_noncebytes();t.length!==i&&f(s,"invalid nonce length"),_=y(t),s.push(_),n=m(s,n,"key");var p,d=0|r._crypto_stream_chacha20_ietf_keybytes();n.length!==d&&f(s,"invalid key length"),p=y(n),s.push(p);var b=new l(0|c),E=b.address;if(s.push(E),0===r._crypto_stream_chacha20_ietf_xor(E,o,c,0,_,p)){var w=h(b,a);return v(s),w}g(s,"invalid usage")}function sr(e,t,n,a,s){var o=[];u(s);var c=y(e=m(o,e,"input_message")),_=e.length;o.push(c),t=m(o,t,"nonce");var i,p=0|r._crypto_stream_chacha20_ietf_noncebytes();t.length!==p&&f(o,"invalid nonce length"),i=y(t),o.push(i),b(o,n,"nonce_increment"),("number"!=typeof n||(0|n)!==n||n<0)&&f(o,"nonce_increment must be an unsigned integer"),a=m(o,a,"key");var d,E=0|r._crypto_stream_chacha20_ietf_keybytes();a.length!==E&&f(o,"invalid key length"),d=y(a),o.push(d);var w=new l(0|_),x=w.address;if(o.push(x),0===r._crypto_stream_chacha20_ietf_xor_ic(x,c,_,0,i,n,d)){var S=h(w,s);return v(o),S}g(o,"invalid usage")}function or(e){var t=[];u(e);var n=new l(0|r._crypto_stream_chacha20_keybytes()),a=n.address;t.push(a),r._crypto_stream_chacha20_keygen(a);var s=h(n,e);return v(t),s}function cr(e,t,n,a){var s=[];u(a);var o=y(e=m(s,e,"input_message")),c=e.length;s.push(o),t=m(s,t,"nonce");var _,i=0|r._crypto_stream_chacha20_noncebytes();t.length!==i&&f(s,"invalid nonce length"),_=y(t),s.push(_),n=m(s,n,"key");var p,d=0|r._crypto_stream_chacha20_keybytes();n.length!==d&&f(s,"invalid key length"),p=y(n),s.push(p);var b=new l(0|c),E=b.address;if(s.push(E),0===r._crypto_stream_chacha20_xor(E,o,c,0,_,p)){var w=h(b,a);return v(s),w}g(s,"invalid usage")}function _r(e,t,n,a,s){var o=[];u(s);var c=y(e=m(o,e,"input_message")),_=e.length;o.push(c),t=m(o,t,"nonce");var i,p=0|r._crypto_stream_chacha20_noncebytes();t.length!==p&&f(o,"invalid nonce length"),i=y(t),o.push(i),b(o,n,"nonce_increment"),("number"!=typeof n||(0|n)!==n||n<0)&&f(o,"nonce_increment must be an unsigned integer"),a=m(o,a,"key");var d,E=0|r._crypto_stream_chacha20_keybytes();a.length!==E&&f(o,"invalid key length"),d=y(a),o.push(d);var w=new l(0|_),x=w.address;if(o.push(x),0===r._crypto_stream_chacha20_xor_ic(x,c,_,0,i,n,0,d)){var S=h(w,s);return v(o),S}g(o,"invalid usage")}function ir(e){var t=[];u(e);var n=new l(0|r._crypto_stream_keybytes()),a=n.address;t.push(a),r._crypto_stream_keygen(a);var s=h(n,e);return v(t),s}function hr(e){var t=[];u(e);var n=new l(0|r._crypto_stream_xchacha20_keybytes()),a=n.address;t.push(a),r._crypto_stream_xchacha20_keygen(a);var s=h(n,e);return v(t),s}function pr(e,t,n,a){var s=[];u(a);var o=y(e=m(s,e,"input_message")),c=e.length;s.push(o),t=m(s,t,"nonce");var _,i=0|r._crypto_stream_xchacha20_noncebytes();t.length!==i&&f(s,"invalid nonce length"),_=y(t),s.push(_),n=m(s,n,"key");var p,d=0|r._crypto_stream_xchacha20_keybytes();n.length!==d&&f(s,"invalid key length"),p=y(n),s.push(p);var b=new l(0|c),E=b.address;if(s.push(E),0===r._crypto_stream_xchacha20_xor(E,o,c,0,_,p)){var w=h(b,a);return v(s),w}g(s,"invalid usage")}function ur(e,t,n,a,s){var o=[];u(s);var c=y(e=m(o,e,"input_message")),_=e.length;o.push(c),t=m(o,t,"nonce");var i,p=0|r._crypto_stream_xchacha20_noncebytes();t.length!==p&&f(o,"invalid nonce length"),i=y(t),o.push(i),b(o,n,"nonce_increment"),("number"!=typeof n||(0|n)!==n||n<0)&&f(o,"nonce_increment must be an unsigned integer"),a=m(o,a,"key");var d,E=0|r._crypto_stream_xchacha20_keybytes();a.length!==E&&f(o,"invalid key length"),d=y(a),o.push(d);var w=new l(0|_),x=w.address;if(o.push(x),0===r._crypto_stream_xchacha20_xor_ic(x,c,_,0,i,n,0,d)){var S=h(w,s);return v(o),S}g(o,"invalid usage")}function lr(e,t){var n=[];u(t),b(n,e,"length"),("number"!=typeof e||(0|e)!==e||e<0)&&f(n,"length must be an unsigned integer");var a=new l(0|e),s=a.address;n.push(s),r._randombytes_buf(s,e);var o=h(a,t);return v(n),o}function yr(e,t,n){var a=[];u(n),b(a,e,"length"),("number"!=typeof e||(0|e)!==e||e<0)&&f(a,"length must be an unsigned integer"),t=m(a,t,"seed");var s,o=0|r._randombytes_seedbytes();t.length!==o&&f(a,"invalid seed length"),s=y(t),a.push(s);var c=new l(0|e),_=c.address;a.push(_),r._randombytes_buf_deterministic(_,e,s);var i=h(c,n);return v(a),i}function dr(e){u(e),r._randombytes_close()}function vr(e){u(e);var t=r._randombytes_random()>>>0;return v([]),t}function gr(e,t){var n=[];u(t);for(var a=r._malloc(24),s=0;s<6;s++)r.setValue(a+4*s,r.Runtime.addFunction(e[["implementation_name","random","stir","uniform","buf","close"][s]]),"i32");0!=(0|r._randombytes_set_implementation(a))&&g(n,"unsupported implementation"),v(n)}function fr(e){u(e),r._randombytes_stir()}function br(e,t){var n=[];u(t),b(n,e,"upper_bound"),("number"!=typeof e||(0|e)!==e||e<0)&&f(n,"upper_bound must be an unsigned integer");var a=r._randombytes_uniform(e)>>>0;return v(n),a}function mr(){var e=r._sodium_version_string(),t=r.UTF8ToString(e);return v([]),t}return l.prototype.to_Uint8Array=function(){var e=new Uint8Array(this.length);return e.set(r.HEAPU8.subarray(this.address,this.address+this.length)),e},e.add=function(e,t){if(!(e instanceof Uint8Array&&t instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can added");var r=e.length,n=0,a=0;if(t.length!=e.length)throw new TypeError("Arguments must have the same length");for(a=0;a<r;a++)n>>=8,n+=e[a]+t[a],e[a]=255&n},e.base64_variants=c,e.compare=function(e,t){if(!(e instanceof Uint8Array&&t instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be compared");if(e.length!==t.length)throw new TypeError("Only instances of identical length can be compared");for(var r=0,n=1,a=e.length;a-- >0;)r|=t[a]-e[a]>>8&n,n&=(t[a]^e[a])-1>>8;return r+r+n-1},e.from_base64=function(e,t){t=_(t);var n,a=[],s=new l(3*(e=m(a,e,"input")).length/4),o=y(e),c=d(4),i=d(4);return a.push(o),a.push(s.address),a.push(s.result_bin_len_p),a.push(s.b64_end_p),0!==r._sodium_base642bin(s.address,s.length,o,e.length,0,c,i,t)&&g(a,"invalid input"),r.getValue(i,"i32")-o!==e.length&&g(a,"incomplete input"),s.length=r.getValue(c,"i32"),n=s.to_Uint8Array(),v(a),n},e.from_hex=function(e){var t,n=[],a=new l((e=m(n,e,"input")).length/2),s=y(e),o=d(4);return n.push(s),n.push(a.address),n.push(a.hex_end_p),0!==r._sodium_hex2bin(a.address,a.length,s,e.length,0,0,o)&&g(n,"invalid input"),r.getValue(o,"i32")-s!==e.length&&g(n,"incomplete input"),t=a.to_Uint8Array(),v(n),t},e.from_string=a,e.increment=function(e){if(!(e instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be incremented");for(var t=256,r=0,n=e.length;r<n;r++)t>>=8,t+=e[r],e[r]=255&t},e.is_zero=function(e){if(!(e instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be checked");for(var t=0,r=0,n=e.length;r<n;r++)t|=e[r];return 0===t},e.libsodium=t,e.memcmp=function(e,t){if(!(e instanceof Uint8Array&&t instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be compared");if(e.length!==t.length)throw new TypeError("Only instances of identical length can be compared");for(var r=0,n=0,a=e.length;n<a;n++)r|=e[n]^t[n];return 0===r},e.memzero=function(e){if(!(e instanceof Uint8Array))throw new TypeError("Only Uint8Array instances can be wiped");for(var t=0,r=e.length;t<r;t++)e[t]=0},e.output_formats=function(){return["uint8array","text","hex","base64"]},e.pad=function(e,t){if(!(e instanceof Uint8Array))throw new TypeError("buffer must be a Uint8Array");if((t|=0)<=0)throw new Error("block size must be > 0");var n,a=[],s=d(4),o=1,c=0,_=0|e.length,i=new l(_+t);a.push(s),a.push(i.address);for(var h=i.address,p=i.address+_+t;h<p;h++)r.HEAPU8[h]=e[c],c+=o=1&~((65535&((_-=o)>>>48|_>>>32|_>>>16|_))-1>>16);return 0!==r._sodium_pad(s,i.address,e.length,t,i.length)&&g(a,"internal error"),i.length=r.getValue(s,"i32"),n=i.to_Uint8Array(),v(a),n},e.unpad=function(e,t){if(!(e instanceof Uint8Array))throw new TypeError("buffer must be a Uint8Array");if((t|=0)<=0)throw new Error("block size must be > 0");var n=[],a=y(e),s=d(4);return n.push(a),n.push(s),0!==r._sodium_unpad(s,a,e.length,t)&&g(n,"unsupported/invalid padding"),e=(e=new Uint8Array(e)).subarray(0,r.getValue(s,"i32")),v(n),e},e.ready=n,e.symbols=function(){return Object.keys(e).sort()},e.to_base64=i,e.to_hex=o,e.to_string=s,e}var _="object"==typeof o.sodium&&"function"==typeof o.sodium.onload?o.sodium.onload:null;a=[t,r(94608)],n=c,s="function"===typeof n?n.apply(t,a):n,void 0!==s&&(e.exports=s),_&&o.sodium.ready.then((function(){_(o.sodium)}))}(this)}}]);